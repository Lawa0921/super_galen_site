<header class="site-header">
    <nav class="site-nav">
        <a href="{{ '/' | relative_url }}" class="site-title">SuperGalen's Dungeon</a>

        <!-- 漢堡選單按鈕（只在行動版顯示） -->
        <button class="mobile-menu-toggle" id="mobile-menu-toggle" aria-label="開啟選單">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
        </button>

        <div class="nav-container desktop-nav">
            <!-- 連接錢包按鈕 (未連接時顯示) -->
            <button class="connect-wallet-btn-header" id="connect-wallet-header" style="display: none;">
                <span class="wallet-icon"><i class="fab fa-ethereum"></i></span>
                <span class="wallet-text" data-i18n="header.connect_wallet">連接錢包</span>
            </button>

            <!-- 錢包狀態顯示 (已連接時顯示) -->
            <div class="wallet-status-header hidden" id="wallet-status-header">
                <!-- 網路狀態 -->
                <div class="network-status">
                    <span id="network-indicator"><i class="fas fa-circle text-danger"></i></span>
                    <span id="network-name" data-i18n="header.not_connected">未連接</span>
                </div>

                <!-- 錢包地址 -->
                <div class="wallet-address" id="wallet-address-header">
                    <span class="address-icon"><i class="fas fa-user"></i></span>
                    <span class="address-text" id="user-address" data-i18n="header.not_connected">未連接</span>
                </div>

                <!-- 斷開連結按鈕 -->
                <button class="disconnect-btn-header" id="disconnect-wallet-header" data-i18n-title="header.disconnect_wallet" title="斷開錢包">
                    <i class="fas fa-unlink"></i>
                </button>
            </div>

            <!-- SGT 餘額顯示 -->
            <div class="sgt-balance-header hidden" id="sgt-balance-header" title="精確餘額載入中...">
                <img src="{{ '/assets/images/sgt-token-icon.png' | relative_url }}" alt="SGT" class="balance-icon">
                <span class="balance-amount" id="sgt-balance-amount">123.45</span>
            </div>

            <!-- 網路切換按鈕 -->
            <button class="network-switch-btn-header hidden" id="switch-to-polygon-header">
                <i class="fas fa-exchange-alt"></i> <span data-i18n="header.switch_to_polygon">切換至 Polygon</span>
            </button>

        </div>
    </nav>

    <!-- 行動版選單（滑入式） -->
    <div class="mobile-menu" id="mobile-menu">
        <div class="mobile-menu-header">
            <span class="mobile-menu-title" data-i18n="header.menu">選單</span>
            <button class="mobile-menu-close" id="mobile-menu-close" aria-label="關閉選單">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div class="mobile-menu-content">
            <!-- 連接錢包按鈕 (未連接時顯示) -->
            <button class="connect-wallet-btn-mobile" id="connect-wallet-mobile" style="display: none;">
                <span class="wallet-icon"><i class="fab fa-ethereum"></i></span>
                <span class="wallet-text" data-i18n="header.connect_wallet">連接錢包</span>
            </button>

            <!-- 錢包狀態顯示 (已連接時顯示) -->
            <div class="wallet-status-mobile hidden" id="wallet-status-mobile">
                <!-- 網路狀態和錢包地址橫向排列 -->
                <div class="wallet-info-row">
                    <!-- 網路狀態 -->
                    <div class="network-status">
                        <span id="network-indicator-mobile"><i class="fas fa-circle text-danger"></i></span>
                        <span id="network-name-mobile" data-i18n="header.not_connected">未連接</span>
                    </div>

                    <!-- 錢包地址 -->
                    <div class="wallet-address" id="wallet-address-mobile">
                        <span class="address-icon"><i class="fas fa-user"></i></span>
                        <span class="address-text" id="user-address-mobile" data-i18n="header.not_connected">未連接</span>
                    </div>
                </div>

                <!-- 斷開連結按鈕 -->
                <button class="disconnect-btn-mobile" id="disconnect-wallet-mobile" data-i18n-title="header.disconnect_wallet" title="斷開錢包">
                    <i class="fas fa-unlink"></i>
                </button>
            </div>

            <!-- SGT 餘額顯示 -->
            <div class="sgt-balance-mobile hidden" id="sgt-balance-mobile" title="精確餘額載入中...">
                <img src="{{ '/assets/images/sgt-token-icon.png' | relative_url }}" alt="SGT" class="balance-icon">
                <span class="balance-amount" id="sgt-balance-amount-mobile">123.45</span>
            </div>

            <!-- 網路切換按鈕 -->
            <button class="network-switch-btn-mobile hidden" id="switch-to-polygon-mobile">
                <i class="fas fa-exchange-alt"></i> <span data-i18n="header.switch_to_polygon">切換至 Polygon</span>
            </button>

            <!-- 語言切換器（共用，會被 JS 移動到這裡） -->
            <div class="mobile-language-switcher" id="mobile-language-container">
                <!-- 語言切換器會被 JS 移動到這裡 -->
            </div>

            <!-- Dark Mode 切換開關（共用，會被 JS 移動到這裡） -->
            <div class="theme-switch-wrapper-mobile" id="mobile-theme-container">
                <span class="theme-label" data-i18n="header.theme">主題</span>
                <!-- 主題切換器會被 JS 移動到這裡 -->
            </div>
        </div>
    </div>

    <!-- 選單遮罩層 -->
    <div class="mobile-menu-overlay" id="mobile-menu-overlay"></div>

    <!-- 共用元件容器（只在桌面版顯示，行動版時會被移動） -->
    <div id="shared-controls-container" class="desktop-only">
        <!-- 語言切換器（共用） -->
        {% include language-switcher.html %}

        <!-- Dark Mode 切換開關（共用） -->
        <div class="theme-switch-wrapper" id="shared-theme-switch">
            <span class="theme-icon"><i class="fas fa-sun"></i></span>
            <label class="theme-switch">
                <input type="checkbox" id="theme-toggle">
                <span class="slider"></span>
            </label>
            <span class="theme-icon"><i class="fas fa-moon"></i></span>
        </div>
    </div>
</header>