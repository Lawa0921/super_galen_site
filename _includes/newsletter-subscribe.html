<!-- ===== RPG é¢¨æ ¼ FollowIt è¨‚é–±æ¨¡çµ„ ===== -->
<div class="newsletter-container rpg-style" id="newsletterContainer">
    <!-- è¨‚é–±æ²è»¸è§¸ç™¼æŒ‰éˆ• -->
    <button class="newsletter-scroll-button" id="newsletterToggle" aria-label="è¨‚é–±é›»å­å ±">
        <span class="scroll-icon">ğŸ“œ</span>
        <span class="scroll-text" data-i18n="newsletter.subscribe_button">è¨‚é–±å†’éšªæ—¥èªŒ</span>
    </button>

    <!-- è¨‚é–±è¡¨å–®æ¨¡æ…‹æ¡† -->
    <div class="newsletter-modal" id="newsletterModal">
        <div class="modal-backdrop" id="newsletterBackdrop"></div>

        <div class="modal-content rpg-panel">
            <!-- é—œé–‰æŒ‰éˆ• -->
            <button class="close-button" id="closeNewsletter" aria-label="é—œé–‰">
                Ã—
            </button>

            <!-- æ¨™é¡Œå€ -->
            <div class="modal-header">
                <h2 class="modal-title" data-i18n="newsletter.title">
                    ğŸ“œ è¨‚é–±å†’éšªæ—¥èªŒ
                </h2>
            </div>

            <!-- æè¿°å€ -->
            <div class="modal-description">
                <p data-i18n="newsletter.description">
                    åŠ å…¥å†’éšªè€…è¡Œåˆ—ï¼Œæ¥æ”¶æœ€æ–°çš„æŠ€è¡“æ–‡ç« ã€å€å¡Šéˆè¦‹è§£å’Œ RPG éŠæˆ²æ›´æ–°ï¼
                </p>
                <ul class="benefits-list">
                    <li data-i18n="newsletter.benefit_1">âš”ï¸ æ¯é€±ç²¾é¸æŠ€è¡“æ–‡ç« </li>
                    <li data-i18n="newsletter.benefit_2">ğŸ¯ ç¨å®¶ Web3 é–‹ç™¼æ•™å­¸</li>
                    <li data-i18n="newsletter.benefit_3">ğŸ® éŠæˆ²åŒ–å­¸ç¿’æŒ‘æˆ°</li>
                    <li data-i18n="newsletter.benefit_4">ğŸ† æ¶å…ˆé«”é©—æ–°åŠŸèƒ½</li>
                </ul>
            </div>

            <!-- FollowIt è¡¨å–®å®¹å™¨ -->
            <div class="newsletter-form-container">
                <!-- FollowIt åŸå§‹æ¨£å¼ï¼ˆéš±è—ï¼‰ -->
                <style>
                    .followit--follow-form-container[attr-a][attr-b][attr-c][attr-d][attr-e][attr-f] .form-preview {
                        display: none !important;
                    }
                    .followit--follow-form-container[attr-a][attr-b][attr-c][attr-d][attr-e][attr-f] .powered-by-line {
                        color: #96ceb4 !important;
                        font-family: 'Noto Sans TC', sans-serif !important;
                        font-size: 12px !important;
                        text-align: center !important;
                        margin-top: 15px !important;
                        display: flex !important;
                        justify-content: center !important;
                        align-items: center !important;
                    }
                    .followit--follow-form-container[attr-a][attr-b][attr-c][attr-d][attr-e][attr-f] .powered-by-line img {
                        margin-left: 5px !important;
                        height: 14px !important;
                    }
                </style>

                <div class="followit--follow-form-container" attr-a attr-b attr-c attr-d attr-e attr-f>
                    <form action="https://api.follow.it/subscription-form/UGNmLzVxMUk2YjhtVWxPV0N1VWJRa1BNMTRRb21sQmlvRHA0MXdtT3RvQUk3VTljREdKVVh3ckE1QS83ZDlCM1dobzl1eUk0UFArTDVOUFNGTjhVL3h5M21sbzkxa0djNkJ0YXlybVV5cVQ1MkU4RDY4UzMyQjl3a3BPbTNhZWt8ZmRJMEN4ckZFV1NIZFVocW5OVU03SCt6cGVEWFFvM2FscnVyRS9GMjQ0Yz0=/8" method="post" class="rpg-newsletter-form" id="followitForm">

                        <!-- è‡ªè¨‚ RPG é¢¨æ ¼è¡¨å–® -->
                        <div class="form-group">
                            <label for="newsletter-email" class="form-label">
                                <span data-i18n="newsletter.email_label">é›»å­éƒµä»¶</span>
                                <span class="required-mark">*</span>
                            </label>
                            <input
                                type="email"
                                name="email"
                                id="newsletter-email"
                                class="form-input rpg-input"
                                placeholder="your@email.com"
                                required
                                aria-required="true"
                            >
                        </div>

                        <button type="submit" class="submit-button rpg-button">
                            <span data-i18n="newsletter.submit_button">ğŸ¯ åŠ å…¥å†’éšª</span>
                        </button>

                        <div class="form-message" id="formMessage" role="alert" aria-live="polite"></div>
                    </form>

                    <a href="https://follow.it" class="powered-by-line">
                        Powered by <img src="https://follow.it/images/colored-logo.svg" alt="follow.it" height="17px"/>
                    </a>
                </div>
            </div>

            <!-- éš±ç§è²æ˜ -->
            <div class="privacy-notice">
                <p data-i18n="newsletter.privacy_notice">
                    ğŸ”’ æˆ‘å€‘å°Šé‡ä½ çš„éš±ç§ï¼Œçµ•ä¸æœƒåˆ†äº«ä½ çš„é›»å­éƒµä»¶ã€‚éš¨æ™‚å¯ä»¥å–æ¶ˆè¨‚é–±ã€‚
                </p>
            </div>
        </div>
    </div>
</div>

<!-- JavaScript åˆå§‹åŒ– -->
<script>
    // ç¢ºä¿ DOM è¼‰å…¥å®Œæˆå¾Œå†åŸ·è¡Œ
    document.addEventListener('DOMContentLoaded', function() {
        const newsletterToggle = document.getElementById('newsletterToggle');
        const newsletterModal = document.getElementById('newsletterModal');
        const newsletterBackdrop = document.getElementById('newsletterBackdrop');
        const closeNewsletter = document.getElementById('closeNewsletter');
        const followitForm = document.getElementById('followitForm');
        const formMessage = document.getElementById('formMessage');

        // é–‹å•Ÿæ¨¡æ…‹æ¡†
        function openNewsletterModal() {
            newsletterModal.classList.add('show');
            document.body.style.overflow = 'hidden'; // é˜²æ­¢èƒŒæ™¯æ»¾å‹•
        }

        // é—œé–‰æ¨¡æ…‹æ¡†
        function closeNewsletterModal() {
            newsletterModal.classList.remove('show');
            document.body.style.overflow = ''; // æ¢å¾©æ»¾å‹•
        }

        // äº‹ä»¶ç›£è½å™¨
        if (newsletterToggle) {
            newsletterToggle.addEventListener('click', openNewsletterModal);
        }

        if (closeNewsletter) {
            closeNewsletter.addEventListener('click', closeNewsletterModal);
        }

        if (newsletterBackdrop) {
            newsletterBackdrop.addEventListener('click', closeNewsletterModal);
        }

        // ESC éµé—œé–‰
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && newsletterModal.classList.contains('show')) {
                closeNewsletterModal();
            }
        });

        // è¡¨å–®æäº¤è™•ç†
        if (followitForm) {
            followitForm.addEventListener('submit', function(e) {
                // è®“ FollowIt è™•ç†æäº¤
                // é¡¯ç¤ºæˆåŠŸè¨Šæ¯
                setTimeout(function() {
                    formMessage.textContent = 'âœ… æ„Ÿè¬è¨‚é–±ï¼è«‹æª¢æŸ¥ä½ çš„ä¿¡ç®±å®Œæˆç¢ºèªã€‚';
                    formMessage.classList.add('success');
                    formMessage.style.display = 'block';

                    // 3 ç§’å¾Œé—œé–‰æ¨¡æ…‹æ¡†
                    setTimeout(function() {
                        closeNewsletterModal();
                        formMessage.style.display = 'none';
                        formMessage.classList.remove('success');
                        followitForm.reset();
                    }, 3000);
                }, 500);
            });
        }
    });
</script>
