# Jekyll â†’ Astro é·ç§»æ•ˆèƒ½åˆ†æå ±å‘Š

> æ¸¬è©¦æ—¥æœŸï¼š2026-01-31
> æ¸¬è©¦ç’°å¢ƒï¼šæœ¬åœ°é–‹ç™¼ç’°å¢ƒ (localhost)
> æ¸¬è©¦æ–¹å¼ï¼šPuppeteer è‡ªå‹•åŒ–æ¸¬è©¦ï¼Œæ¯é …æ¸¬è©¦åŸ·è¡Œ 3 æ¬¡å–å¹³å‡å€¼

---

## ğŸ“Š æ¸¬è©¦çµæœç¸½è¦½

### æ¸¬è©¦é é¢
1. **Homepage** - ä¸»é é¢ï¼ˆRPG ä»‹é¢ï¼‰
2. **Guild Index** - å…¬æœƒåˆ—è¡¨é 
3. **Guild Page (damao)** - å…¬æœƒæˆå“¡å€‹äººé é¢ï¼ˆå«å½±ç‰‡ï¼‰

### æ¸¬è©¦æŒ‡æ¨™èªªæ˜
- **FCP (First Contentful Paint)**: é¦–æ¬¡å…§å®¹ç¹ªè£½æ™‚é–“ï¼Œç”¨æˆ¶çœ‹åˆ°ç¬¬ä¸€å€‹å…§å®¹çš„æ™‚é–“
- **Load Complete**: é é¢å®Œå…¨è¼‰å…¥æ™‚é–“
- **HTML Size**: HTML æ–‡ä»¶å¤§å°
- **Transfer**: ç¸½å‚³è¼¸é‡ï¼ˆåŒ…å«æ‰€æœ‰è³‡æºï¼‰

---

## ğŸ“ˆ æ•ˆèƒ½æ¯”è¼ƒæ•¸æ“šï¼ˆ3 æ¬¡æ¸¬è©¦å¹³å‡å€¼ï¼‰

### Homepage (é¦–é )

| æŒ‡æ¨™ | Jekyll | Astro | è®ŠåŒ– | è©•åƒ¹ |
|------|--------|-------|------|------|
| FCP | 495ms | 739ms | **+49.3%** | âš ï¸ è¼ƒæ…¢ |
| Load Complete | 2015ms | 1334ms | **-33.8%** | âœ… æ”¹å–„ |
| HTML Size | 186KB | 136KB | **-26.9%** | âœ… ç¸®å° |
| Total Transfer | 4282KB | 3506KB | **-18.1%** | âœ… æ¸›å°‘ |

### Guild Index (å…¬æœƒåˆ—è¡¨)

| æŒ‡æ¨™ | Jekyll | Astro | è®ŠåŒ– | è©•åƒ¹ |
|------|--------|-------|------|------|
| FCP | 457ms | 448ms | **-2.0%** | âœ… ç›¸ç•¶ |
| Load Complete | 827ms | 750ms | **-9.3%** | âœ… æ”¹å–„ |
| HTML Size | 137KB | 52KB | **-62.0%** | âœ… å¤§å¹…ç¸®å° |
| Total Transfer | 1447KB | 468KB | **-67.7%** | âœ… å¤§å¹…æ¸›å°‘ |

### Guild Page - damao (å«å½±ç‰‡é é¢)

| æŒ‡æ¨™ | Jekyll | Astro | è®ŠåŒ– | è©•åƒ¹ |
|------|--------|-------|------|------|
| FCP | 676ms | 945ms | **+39.8%** | âš ï¸ è¼ƒæ…¢ |
| Load Complete | 2333ms | 2581ms | **+10.6%** | âš ï¸ ç•¥æ…¢ |
| HTML Size | 53KB | 38KB | **-28.3%** | âœ… ç¸®å° |
| Total Transfer | 26144KB | 4053KB | **-84.5%** | âœ… å¤§å¹…æ¸›å°‘ |

---

## ğŸ” å•é¡Œåˆ†æ

### å·²ç¢ºèªçš„å•é¡Œ

#### 1. FCP åœ¨éƒ¨åˆ†é é¢è¼ƒæ…¢ âš ï¸

**ç¾è±¡**ï¼š
- Homepage FCP: +49.3% (495ms â†’ 739ms)
- Guild/damao FCP: +39.8% (676ms â†’ 945ms)

**å¯èƒ½åŸå› **ï¼š
1. **å…§è¯ CSS éå¤§**ï¼šAstro å°‡ CSS å…§è¯åˆ° HTML ä¸­ï¼Œå°è‡´ç€è¦½å™¨éœ€è¦è§£ææ›´å¤šå…§å®¹æ‰èƒ½é–‹å§‹æ¸²æŸ“
2. **JavaScript åˆå§‹åŒ–**ï¼šAstro çš„ hydration æ©Ÿåˆ¶å¯èƒ½å¢åŠ åˆå§‹åŒ–æ™‚é–“
3. **å­—é«”è¼‰å…¥ç­–ç•¥**ï¼šå¯èƒ½éœ€è¦å„ªåŒ–å­—é«”çš„è¼‰å…¥æ–¹å¼

**é©—è­‰æ–¹å¼**ï¼š
```bash
# æª¢æŸ¥å…§è¯ CSS å¤§å°
curl -s http://localhost:4003/ | grep -o '<style[^>]*>.*</style>' | wc -c
```

#### 2. Guild å€‹äººé é¢è¼‰å…¥æ™‚é–“ç•¥å¢ âš ï¸

**ç¾è±¡**ï¼š
- Guild/damao Load: +10.6% (2333ms â†’ 2581ms)

**å¯èƒ½åŸå› **ï¼š
1. é é¢çµæ§‹å·®ç•°å°è‡´æ¸²æŸ“é †åºä¸åŒ
2. å½±ç‰‡è³‡æºçš„è¼‰å…¥ç­–ç•¥å·®ç•°

---

## âœ… å·²ç¢ºèªçš„æ”¹å–„

### 1. ç¸½å‚³è¼¸é‡å¤§å¹…æ¸›å°‘ âœ…

| é é¢ | Jekyll | Astro | æ¸›å°‘é‡ |
|------|--------|-------|--------|
| Homepage | 4.2MB | 3.5MB | -18% |
| Guild Index | 1.4MB | 0.5MB | -68% |
| Guild/damao | 25.5MB | 4.0MB | **-84%** |

**åŸå› **ï¼š
- æ›´å¥½çš„è³‡æºå„ªåŒ–
- ç§»é™¤äº†ä¸å¿…è¦çš„é‡è¤‡è³‡æº
- å½±ç‰‡è³‡æºè·¯å¾‘æ­£ç¢ºå¾Œé¿å…äº†é‡è¤‡ä¸‹è¼‰

### 2. HTML é«”ç©ç¸®å° âœ…

| é é¢ | Jekyll | Astro | æ¸›å°‘é‡ |
|------|--------|-------|--------|
| Homepage | 186KB | 136KB | -27% |
| Guild Index | 137KB | 52KB | **-62%** |
| Guild/damao | 53KB | 38KB | -28% |

**åŸå› **ï¼š
- Astro çš„çµ„ä»¶åŒ–æ¶æ§‹æ¸›å°‘äº†é‡è¤‡ä»£ç¢¼
- æ›´å¥½çš„ HTML å£“ç¸®

### 3. ç¸½è¼‰å…¥æ™‚é–“æ”¹å–„ âœ…

- Homepage: -33.8% (2015ms â†’ 1334ms)
- Guild Index: -9.3% (827ms â†’ 750ms)

---

## ğŸ› ï¸ å„ªåŒ–å»ºè­°

### é«˜å„ªå…ˆç´š

#### 1. å„ªåŒ– CSS è¼‰å…¥ç­–ç•¥

**å•é¡Œ**ï¼šå…§è¯ CSS å°è‡´ FCP å»¶é²

**å»ºè­°æ–¹æ¡ˆ**ï¼š
```javascript
// astro.config.mjs
export default defineConfig({
  build: {
    inlineStylesheets: 'auto', // åªå…§è¯å°æ–¼ 4KB çš„ CSS
  },
});
```

æˆ–è€ƒæ…®ï¼š
- å°‡é—œéµ CSS å…§è¯ï¼Œéé—œéµ CSS å¤–éƒ¨è¼‰å…¥
- ä½¿ç”¨ `<link rel="preload">` é è¼‰å…¥é—œéµ CSS

#### 2. åœ–ç‰‡å„ªåŒ–

**å»ºè­°æ–¹æ¡ˆ**ï¼š
```astro
---
import { Image } from 'astro:assets';
---
<Image src={avatar} alt="..." width={300} height={300} format="webp" />
```

å¥½è™•ï¼š
- è‡ªå‹•ç”Ÿæˆå¤šç¨®å°ºå¯¸
- è‡ªå‹•è½‰æ›ç‚º WebP/AVIF
- è‡ªå‹•æ·»åŠ  width/height é¿å… CLS

#### 3. å­—é«”è¼‰å…¥å„ªåŒ–

**å»ºè­°æ–¹æ¡ˆ**ï¼š
```html
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=...">
```

### ä¸­å„ªå…ˆç´š

#### 4. å•Ÿç”¨ Prefetch

```astro
---
// åœ¨å¸¸ç”¨é€£çµä¸Šå•Ÿç”¨ prefetch
---
<a href="/guild/" data-astro-prefetch>å…¬æœƒ</a>
```

#### 5. å½±ç‰‡æ‡¶è¼‰å…¥

```html
<video preload="none" poster="thumbnail.webp">
  <source src="video.mp4" type="video/mp4">
</video>
```

### ä½å„ªå…ˆç´š

#### 6. è€ƒæ…®ä½¿ç”¨ View Transitions

```javascript
// astro.config.mjs
export default defineConfig({
  experimental: {
    viewTransitions: true,
  },
});
```

---

## ğŸ“‹ SEO æ¯”è¼ƒ

| SEO é …ç›® | Jekyll | Astro | ç‹€æ…‹ |
|----------|--------|-------|------|
| Title Tag | âœ… | âœ… | ç›¸åŒ |
| Meta Description | âœ… | âœ… | ç›¸åŒ |
| Canonical URL | âœ… | âœ… | ç›¸åŒ |
| Open Graph Tags | âœ… | âœ… | ç›¸åŒ |
| Viewport Meta | âœ… | âœ… | ç›¸åŒ |
| Lang Attribute | âœ… | âœ… | ç›¸åŒ |
| Images Alt Text | âœ… | âœ… | ç›¸åŒ |

**çµè«–**ï¼šSEO é…ç½®å®Œæ•´ï¼Œå…©è€…ç›¸ç•¶ã€‚

---

## ğŸ“Š æ•¸æ“šä¸€è‡´æ€§é©—è­‰

æ¯é …æ¸¬è©¦åŸ·è¡Œ 3 æ¬¡ï¼Œä»¥ä¸‹ç‚ºåŸå§‹æ•¸æ“šï¼š

### Homepage FCP (ms)
| Run | Jekyll | Astro |
|-----|--------|-------|
| 1 | 580 | 772 |
| 2 | 432 | 728 |
| 3 | 472 | 716 |
| **Avg** | **495** | **739** |
| Std Dev | Â±63 | Â±24 |

### Guild Index FCP (ms)
| Run | Jekyll | Astro |
|-----|--------|-------|
| 1 | 488 | 440 |
| 2 | 428 | 428 |
| 3 | 456 | 476 |
| **Avg** | **457** | **448** |
| Std Dev | Â±25 | Â±20 |

### HTML Size ä¸€è‡´æ€§
- Jekyll Homepage: 186KB (3/3 ä¸€è‡´) âœ…
- Astro Homepage: 135-136KB (ç•¥æœ‰å·®ç•°)
- Jekyll Guild: 137KB (3/3 ä¸€è‡´) âœ…
- Astro Guild: 52KB (3/3 ä¸€è‡´) âœ…

---

## ğŸ¯ ç¸½çµ

### é·ç§»å¸¶ä¾†çš„å„ªå‹¢

1. âœ… **ç¸½è¼‰å…¥æ™‚é–“æ”¹å–„**ï¼šHomepage -34%, Guild Index -9%
2. âœ… **å‚³è¼¸é‡å¤§å¹…æ¸›å°‘**ï¼šæœ€é«˜é” -84%
3. âœ… **HTML é«”ç©ç¸®å°**ï¼šæœ€é«˜é” -62%
4. âœ… **SEO é…ç½®å®Œæ•´**ï¼šæ‰€æœ‰å¿…è¦å…ƒç´ éƒ½æœ‰
5. âœ… **ç¾ä»£åŒ–é–‹ç™¼é«”é©—**ï¼šTypeScriptã€çµ„ä»¶åŒ–ã€Vite

### éœ€è¦å„ªåŒ–çš„é …ç›®

1. âš ï¸ **FCP åœ¨éƒ¨åˆ†é é¢è¼ƒæ…¢**ï¼šéœ€å„ªåŒ– CSS è¼‰å…¥ç­–ç•¥
2. âš ï¸ **Guild å€‹äººé é¢è¼‰å…¥ç•¥æ…¢**ï¼šè€ƒæ…®å½±ç‰‡æ‡¶è¼‰å…¥

### ä¸‹ä¸€æ­¥è¡Œå‹•

1. [ ] å¯¦æ–½ CSS è¼‰å…¥å„ªåŒ–
2. [ ] ä½¿ç”¨ Astro Image çµ„ä»¶å„ªåŒ–åœ–ç‰‡
3. [ ] æ·»åŠ å­—é«” preload
4. [ ] æ¸¬è©¦ production éƒ¨ç½²å¾Œçš„çœŸå¯¦æ•ˆèƒ½

---

## æ¸¬è©¦ç’°å¢ƒè³‡è¨Š

```
Platform: Linux (WSL2)
Node.js: v22.22.0
Astro: v5.16.15
Jekyll: 4.x
Browser: Chromium (Puppeteer headless)
Test Date: 2026-01-31
```
