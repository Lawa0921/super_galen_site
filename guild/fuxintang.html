<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç¦é¦¨å ‚ | The Cozy Cottage Journal</title>

    <!-- LIBRARIES -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/js/all.min.js"></script>

    <!-- FONTS -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&family=Caveat:wght@400;700&family=LXGW+WenKai+TC:wght@300;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --c-cream: #FDFBF7;
            --c-olive: #8A9A5B;
            --c-mustard: #E1AD01;
            --c-rose: #D29494;
            --c-brown: #8B4513;
            --c-dark-brown: #5D4037;
            --c-tape: rgba(255, 255, 255, 0.85);

            --f-hand: 'Caveat', cursive;
            --f-cute: 'Fredoka', sans-serif;
            --f-text: 'LXGW WenKai TC', cursive;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: var(--c-cream);
            color: var(--c-brown);
            font-family: var(--f-text);
            overflow-x: hidden;
            width: 100vw;
            cursor: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 32 32'><circle cx='16' cy='16' r='8' fill='%23E1AD01' opacity='0.8'/></svg>") 16 16, auto;
        }

        /* 3D SCENE (Fixed Background) */
        #webgl-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: -2;
            background: linear-gradient(180deg, #fffcf5 0%, #f4e4bc 100%);
        }

        /* DRAWING LAYER */
        #drawing-layer {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 9999;
        }
        .trail-dot {
            position: absolute; width: 6px; height: 6px; border-radius: 50%;
            background: var(--c-mustard); pointer-events: none;
        }

        /* UI ELEMENTS */
        .back-link {
            position: fixed; top: 2rem; left: 2rem; z-index: 100;
            text-decoration: none; color: var(--c-brown);
            font-family: var(--f-cute); font-weight: 600;
            background: #fff; padding: 10px 25px;
            border-radius: 30px; border: 2px dashed var(--c-olive);
            box-shadow: 3px 3px 0 rgba(0,0,0,0.1);
            transition: 0.2s;
        }
        .back-link:hover { transform: scale(1.05); background: var(--c-cream); }

        /* LOADING */
        #loader {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--c-cream); z-index: 10000;
            display: flex; justify-content: center; align-items: center; flex-direction: column;
        }
        .loader-icon { font-size: 3rem; margin-bottom: 1rem; animation: spin 2s infinite linear; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* --- MAIN LAYOUT --- */
        main {
            position: relative; z-index: 10;
            max-width: 900px; margin: 0 auto;
            padding: 80px 20px;
        }

        .section { margin-bottom: 120px; position: relative; }

        /* HERO */
        .paper-note {
            background: #fff; padding: 4rem; transform: rotate(-2deg);
            box-shadow: 5px 10px 20px rgba(0,0,0,0.1);
            max-width: 600px; margin: 0 auto;
            text-align: center; position: relative;
            mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 300' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0,10 Q50,0 100,10 T200,10 T300,10 T400,10 V290 Q350,300 300,290 T200,290 T100,290 T0,290 Z' fill='black'/%3E%3C/svg%3E");
            mask-size: 100% 100%;
        }
        .tape-top {
            width: 120px; height: 35px; background: var(--c-tape);
            position: absolute; top: -15px; left: 50%; transform: translateX(-50%) rotate(2deg);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .hero h1 { font-family: var(--f-hand); font-size: 4.5rem; color: var(--c-dark-brown); line-height: 1; margin-bottom: 1rem; }
        .hero p { font-family: var(--f-cute); font-size: 1.2rem; color: var(--c-olive); letter-spacing: 1px; }

        /* TIMELINE (Journey) */
        .timeline-container {
            position: relative; padding: 2rem 0;
            border-left: 4px dashed var(--c-rose); margin-left: 20px;
        }
        .timeline-item {
            margin-bottom: 4rem; padding-left: 3rem; position: relative;
            opacity: 0; transform: translateX(-30px); /* Init for GSAP */
        }
        .timeline-marker {
            position: absolute; left: -14px; top: 0; width: 24px; height: 24px;
            background: var(--c-mustard); border-radius: 50%;
            border: 4px solid var(--c-cream); box-shadow: 0 0 0 2px var(--c-rose);
        }
        .timeline-card {
            background: #fff; padding: 2rem; border-radius: 15px;
            box-shadow: 5px 5px 0 var(--c-olive);
            border: 2px solid var(--c-brown);
            display: flex; gap: 1.5rem; align-items: center;
        }
        .timeline-icon { font-size: 3rem; }
        .timeline-content h3 { font-family: var(--f-cute); font-size: 1.5rem; color: var(--c-dark-brown); margin-bottom: 0.5rem; }
        .timeline-content p { line-height: 1.6; color: #666; }

        /* INGREDIENTS */
        .ingredients-grid {
            display: grid; grid-template-columns: repeat(3, 1fr); gap: 2rem;
            text-align: center;
        }
        .ingredient-circle {
            background: #fff; width: 100%; aspect-ratio: 1; border-radius: 50%;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            border: 3px dashed var(--c-mustard);
            box-shadow: 0 10px 20px rgba(0,0,0,0.05);
            transition: 0.3s;
        }
        .ingredient-circle:hover { transform: scale(1.1) rotate(5deg); background: #fffdf5; }
        .ing-icon { font-size: 3.5rem; margin-bottom: 0.5rem; }
        .ing-label { font-family: var(--f-hand); font-size: 2rem; color: var(--c-brown); }

        /* MENU */
        .menu-board {
            background: #fff; padding: 3rem;
            border: 10px solid var(--c-brown); border-radius: 10px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.2);
            text-align: center;
        }
        .menu-title { font-family: var(--f-hand); font-size: 3.5rem; margin-bottom: 2rem; color: var(--c-dark-brown); text-decoration: underline wavy var(--c-mustard); }
        .menu-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
        }
        .menu-item {
            background: var(--c-cream); padding: 1.5rem; border-radius: 10px;
            transition: 0.3s;
        }
        .menu-item:hover { transform: translateY(-5px); box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .menu-img { width: 100%; aspect-ratio: 1; object-fit: cover; border-radius: 5px; margin-bottom: 1rem; border: 1px solid #ddd; }
        .menu-name { font-family: var(--f-cute); font-weight: bold; font-size: 1.2rem; margin-bottom: 0.5rem; }
        .menu-desc { font-size: 0.9rem; color: #777; }

        /* FOOTER */
        .footer-note { text-align: center; font-family: var(--f-hand); font-size: 2rem; margin-top: 4rem; }
        .socials { margin-top: 1rem; display: flex; justify-content: center; gap: 1.5rem; }
        .social-link {
            font-size: 2rem; color: var(--c-brown); transition: 0.3s;
            background: #fff; width: 50px; height: 50px; border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            border: 2px solid var(--c-brown);
        }
        .social-link:hover { transform: rotate(15deg) scale(1.1); color: var(--c-rose); border-color: var(--c-rose); }

        /* COOKIE JAR (Fixed) */
        .jar-trigger {
            position: fixed; bottom: 30px; right: 30px;
            width: 80px; height: 80px; background: #fff;
            border-radius: 50%; border: 3px solid var(--c-brown);
            display: flex; justify-content: center; align-items: center;
            font-size: 3rem; cursor: pointer; z-index: 500;
            box-shadow: 5px 5px 0 var(--c-olive);
            transition: 0.3s;
        }
        .jar-trigger:hover { transform: scale(1.1) rotate(-10deg); }
        .jar-hint {
            position: absolute; top: -40px; right: 0; background: var(--c-mustard); color: #fff;
            padding: 5px 15px; border-radius: 20px; font-family: var(--f-cute); white-space: nowrap;
            opacity: 0; transition: 0.3s; pointer-events: none;
        }
        .jar-trigger:hover .jar-hint { opacity: 1; top: -50px; }

        /* MODAL */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255, 252, 245, 0.95); z-index: 2000;
            display: flex; justify-content: center; align-items: center;
            opacity: 0; pointer-events: none; transition: 0.5s;
        }
        .modal-overlay.active { opacity: 1; pointer-events: all; }
        .modal-content { text-align: center; position: relative; }
        .close-btn { position: absolute; top: -50px; right: 0; font-size: 2rem; cursor: pointer; color: var(--c-brown); }
        .fortune-paper {
            background: #fff; padding: 2rem 3rem; border: 2px dashed var(--c-rose);
            font-family: var(--f-hand); font-size: 2rem; transform: rotate(-2deg);
            box-shadow: 5px 10px 30px rgba(0,0,0,0.1); margin-top: 2rem;
            opacity: 0;
        }

        @media (max-width: 768px) {
            .ingredients-grid { grid-template-columns: 1fr; }
            .menu-grid { grid-template-columns: 1fr; }
            .timeline-card { flex-direction: column; text-align: center; }
            .timeline-container { border-left: none; margin-left: 0; }
            .timeline-marker { display: none; }
            .timeline-item { padding-left: 0; }
        }
    </style>
</head>
<body>

    <div id="loader"><div class="loader-icon">ğŸª</div></div>
    <div id="webgl-container"></div>
    <div id="drawing-layer"></div>

    <a href="index.html" class="back-link">â† Guild</a>

    <main>
        <!-- HERO -->
        <section class="section hero">
            <div class="paper-note">
                <div class="tape-top"></div>
                <h1>Hello! <br> I'm Fuxintang</h1>
                <p>Welcome to my little forest cottage.</p>
                <div style="font-size: 3rem; position: absolute; bottom: -20px; right: -20px; transform: rotate(20deg);">ğŸŒ»</div>
            </div>
        </section>

        <!-- TIMELINE -->
        <section class="section journey">
            <h2 style="text-align: center; font-family: var(--f-hand); font-size: 3rem; color: var(--c-olive); margin-bottom: 2rem;">My Journey</h2>
            <div class="timeline-container">
                <div class="timeline-item">
                    <div class="timeline-marker"></div>
                    <div class="timeline-card">
                        <div class="timeline-icon">ğŸ¨</div>
                        <div class="timeline-content">
                            <h3>The Art Teacher</h3>
                            <p>åŸæœ¬æ˜¯å€‹å…’ç«¥ç¾è¡“è€å¸«ï¼Œæ¯å¤©èˆ‡è‰²å½©ç‚ºä¼ã€‚ç•«ç•«æ˜¯æˆ‘çš„åˆæˆ€ï¼Œä¹Ÿæ˜¯æˆ‘è§€å¯Ÿä¸–ç•Œçš„æ–¹å¼ã€‚</p>
                        </div>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-marker"></div>
                    <div class="timeline-card">
                        <div class="timeline-icon">ğŸŒ§ï¸</div>
                        <div class="timeline-content">
                            <h3>The Pause</h3>
                            <p>æŸå¹´ç”Ÿäº†ä¸€å ´å¤§ç—…ï¼Œç„¡æ³•é•·æ™‚é–“å·¥ä½œã€‚ç”Ÿå‘½å¥½åƒæŒ‰ä¸‹äº†æš«åœéµï¼Œæˆ‘åªèƒ½åœ¨æ—©é¤åº—æ‰“å·¥ï¼Œé‡æ–°èª¿æ•´æ­¥ä¼ã€‚</p>
                        </div>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-marker"></div>
                    <div class="timeline-card">
                        <div class="timeline-icon">ğŸª</div>
                        <div class="timeline-content">
                            <h3>The Impulse</h3>
                            <p>è·¯é‚Šå¯«è‘—ã€Œå‡ºç§Ÿæ”¤ä½ 3000ã€ï¼Œè¦ºå¾—å¾ˆä¾¿å®œå°±è¡å‹•ç§Ÿä¸‹... è«åå…¶å¦™é–‹å§‹äº†é›è›‹ç³•ä¹‹è·¯ï¼</p>
                        </div>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-marker"></div>
                    <div class="timeline-card">
                        <div class="timeline-icon">ğŸ¥£</div>
                        <div class="timeline-content">
                            <h3>The Research</h3>
                            <p>æˆ‘æ˜¯ã€Œä¸å°ˆæ¥­ç ”ç©¶å®¶ã€ã€‚éºµç³Šé…æ–¹è‡ªå·±ç ”ç™¼ï¼Œå …æŒä¸åŠ å¥‡æ€ªçš„æ±è¥¿ã€‚å®¢äººéƒ½å•åŠ äº†ä»€éº¼ï¼Ÿæˆ‘èªªï¼šæ„›ï¼</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- INGREDIENTS -->
        <section class="section ingredients">
            <div class="ingredients-grid">
                <div class="ingredient-circle">
                    <div class="ing-icon">ğŸ¥š</div>
                    <div class="ing-label">Fresh Eggs</div>
                </div>
                <div class="ingredient-circle">
                    <div class="ing-icon">ğŸŒ¾</div>
                    <div class="ing-label">Pure Flour</div>
                </div>
                <div class="ingredient-circle">
                    <div class="ing-icon">â¤ï¸</div>
                    <div class="ing-label">Lot of Love</div>
                </div>
            </div>
        </section>

        <!-- MENU -->
        <section class="section menu">
            <div class="menu-board">
                <div class="menu-title">Daily Specials</div>
                <div class="menu-grid">
                    <div class="menu-item">
                        <img src="../assets/img/guild/fuxintang/gallery_1.webp" class="menu-img" alt="Cake 1">
                        <div class="menu-name">Classic Original</div>
                        <div class="menu-desc">Pure egg aroma, crispy edges.</div>
                    </div>
                    <div class="menu-item">
                        <img src="../assets/img/guild/fuxintang/gallery_2.webp" class="menu-img" alt="Cake 2">
                        <div class="menu-name">Custard Dream</div>
                        <div class="menu-desc">Smooth, creamy, not too sweet.</div>
                    </div>
                    <div class="menu-item">
                        <img src="../assets/img/guild/fuxintang/gallery_3.webp" class="menu-img" alt="Cake 3">
                        <div class="menu-name">Forest Special</div>
                        <div class="menu-desc">Seasonal surprise flavors!</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- FOOTER -->
        <section class="section footer">
            <div class="footer-note">
                <p>"ä¸–é–“åƒè¬ å†é›£é‡æ­¤"</p>
                <div style="font-size: 1rem; color: #888; margin-top: 0.5rem;">â€” ç´€å¿µå¤–å…¬çš„ç¦æ˜Ÿå ‚ ğŸŒ¿</div>
                <div class="socials">
                    <a href="https://www.threads.com/@fuxintang_tw" target="_blank" class="social-link"><i class="fa-brands fa-threads"></i></a>
                    <a href="https://www.instagram.com/fuxintang_tw/" target="_blank" class="social-link"><i class="fa-brands fa-instagram"></i></a>
                </div>
                <div style="font-size: 0.8rem; margin-top: 2rem; opacity: 0.5;">Made by SuperGalen's Dungeon</div>
            </div>
        </section>
    </main>

    <!-- INTERACTION -->
    <div class="jar-trigger" id="jar-trigger">
        ğŸº
        <div class="jar-hint">Grandpa's Fortune!</div>
    </div>

    <div class="modal-overlay" id="fortune-modal">
        <div class="modal-content">
            <div class="close-btn">&times;</div>
            <div style="font-size: 5rem; margin-bottom: 1rem;" id="modal-jar">ğŸº</div>
            <button id="shake-btn" style="padding: 10px 30px; font-family: var(--f-cute); font-size: 1.2rem; background: var(--c-rose); color: white; border: none; border-radius: 20px; cursor: pointer;">Shake It!</button>
            <div class="fortune-paper" id="fortune-text"></div>
        </div>
    </div>

    <script>
        // --- SETUP ---
        const state = { mouse: {x:0, y:0} };
        window.addEventListener('mousemove', e => { state.mouse.x = e.clientX; state.mouse.y = e.clientY; });

        // Loader
        window.onload = () => {
            gsap.to('#loader', { opacity: 0, duration: 0.5, onComplete: () => document.getElementById('loader').remove() });
        };

        // --- THREE.JS (Steady Diorama) ---
        const initThree = () => {
            const scene = new THREE.Scene();
            scene.fog = new THREE.Fog(0xFFFCF5, 10, 40);

            const camera = new THREE.PerspectiveCamera(40, window.innerWidth/window.innerHeight, 0.1, 100);
            // Steady Isometric-ish View
            camera.position.set(0, 10, 15);
            camera.lookAt(0, 0, 0);

            const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.getElementById('webgl-container').appendChild(renderer.domElement);

            const light = new THREE.DirectionalLight(0xffeebb, 1);
            light.position.set(5, 10, 5);
            scene.add(light);
            scene.add(new THREE.AmbientLight(0xffffff, 0.7));

            // Ground
            const plane = new THREE.Mesh(
                new THREE.PlaneGeometry(100, 100),
                new THREE.MeshStandardMaterial({ color: 0xeae2c6 })
            );
            plane.rotation.x = -Math.PI/2;
            plane.position.y = -2;
            scene.add(plane);

            // Procedural Forest (Dense Borders)
            function addTree(x, z) {
                const group = new THREE.Group();
                const trunk = new THREE.Mesh(
                    new THREE.CylinderGeometry(0.2, 0.4, 1.5, 6),
                    new THREE.MeshToonMaterial({ color: 0x8B4513 })
                );
                trunk.position.y = -1.25;
                group.add(trunk);

                const foliage = new THREE.Mesh(
                    new THREE.ConeGeometry(1.2, 2.5, 7),
                    new THREE.MeshToonMaterial({ color: 0x8A9A5B })
                );
                foliage.position.y = 0.5;
                group.add(foliage);

                group.position.set(x, 0, z);
                group.rotation.y = Math.random() * Math.PI;
                scene.add(group);
            }

            // Scatter trees around the edges, leaving center clear
            for(let i=0; i<60; i++) {
                const angle = Math.random() * Math.PI * 2;
                const radius = 8 + Math.random() * 15; // Farther out
                addTree(Math.cos(angle)*radius, Math.sin(angle)*radius);
            }

            // Render Loop
            function animate() {
                requestAnimationFrame(animate);
                renderer.render(scene, camera);
            }
            animate();

            // GSAP Camera Scroll (Gentle Pan Down)
            gsap.registerPlugin(ScrollTrigger);
            gsap.to(camera.position, {
                z: 22, // Pull back slightly
                y: 12, // Go up slightly
                scrollTrigger: {
                    trigger: "body",
                    start: "top top",
                    end: "bottom bottom",
                    scrub: 1
                }
            });

            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            });
        };
        initThree();

        // --- CUTE INTERACTIONS ---

        // 1. Timeline Reveal
        gsap.utils.toArray('.timeline-item').forEach((item, i) => {
            gsap.to(item, {
                scrollTrigger: { trigger: item, start: "top 80%" },
                opacity: 1, x: 0, duration: 0.8, ease: "back.out(1.7)"
            });
        });

        // 2. Ingredients Pop
        gsap.utils.toArray('.ingredient-circle').forEach((item, i) => {
            gsap.from(item, {
                scrollTrigger: { trigger: ".ingredients", start: "top 70%" },
                scale: 0, rotation: 180, duration: 0.8, delay: i*0.2, ease: "elastic.out(1, 0.5)"
            });
        });

        // 3. Menu Cards Slide
        gsap.utils.toArray('.menu-item').forEach((item, i) => {
            gsap.from(item, {
                scrollTrigger: { trigger: ".menu", start: "top 75%" },
                y: 50, opacity: 0, duration: 0.6, delay: i*0.1
            });
        });

        // 4. Crayon Cursor
        const trailLayer = document.getElementById('drawing-layer');
        document.addEventListener('mousemove', (e) => {
            if(Math.random() > 0.8) {
                const dot = document.createElement('div');
                dot.className = 'trail-dot';
                dot.style.left = e.clientX + 'px';
                dot.style.top = e.clientY + 'px';
                dot.style.backgroundColor = ['#E1AD01', '#8A9A5B', '#D29494'][Math.floor(Math.random()*3)];
                trailLayer.appendChild(dot);
                gsap.to(dot, { y: 20, opacity: 0, duration: 1, onComplete: () => dot.remove() });
            }
        });

        // 5. Fortune Jar
        const modal = document.getElementById('fortune-modal');
        const jarBtn = document.getElementById('jar-trigger');
        const shakeBtn = document.getElementById('shake-btn');
        const fortuneText = document.getElementById('fortune-text');
        const fortunes = ["å¿ƒèª å‰‡éˆ", "è¬äº‹å¦‚æ„", "é£Ÿä¹‹æœ‰å‘³", "è‰æœ¨é€¢æ˜¥", "ç¦æ˜Ÿé«˜ç…§"];

        jarBtn.onclick = () => {
            modal.classList.add('active');
            fortuneText.style.opacity = 0;
            gsap.set(shakeBtn, { display: 'inline-block', opacity: 1 });
        };
        document.querySelector('.close-btn').onclick = () => modal.classList.remove('active');

        shakeBtn.onclick = () => {
            const jar = document.getElementById('modal-jar');
            gsap.to(jar, { rotation: 20, yoyo: true, repeat: 5, duration: 0.1, onComplete: () => {
                const text = fortunes[Math.floor(Math.random()*fortunes.length)];
                fortuneText.innerText = text;
                gsap.to(fortuneText, { opacity: 1, duration: 0.5 });
                gsap.to(shakeBtn, { opacity: 0, display: 'none' });
            }});
        };

    </script>
</body>
</html>
