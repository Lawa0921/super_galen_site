<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¦é¦¨å ‚ | å®‡å®™ç¬¬ä¸‰å¥½åƒé›è›‹ç³•</title>

    <!-- Three.js & GSAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=LXGW+WenKai+TC:wght@300;700&family=Zen+Maru+Gothic:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <style>
        :root {
            --c-pink: #E8B4B8;     /* Nadeshiko Pink - Softer, more mature */
            --c-purple: #DCD6D9;   /* Misty Purple */
            --c-green: #A2D5AB;    /* Herbal Green */
            --c-dark-green: #4A5D23; /* Dark Moss */
            --c-wood: #8B5A2B;     /* Wood */
            --c-cream: #F9F7F2;    /* Rice Paper */
            --c-accent: #D67293;   /* Old Rose */
            --font-hand: 'LXGW WenKai TC', cursive;
            --font-title: 'Zen Maru Gothic', sans-serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: var(--font-hand);
            background-color: var(--c-cream);
            color: var(--c-dark-green);
            overflow-x: hidden;
            cursor: none;
        }

        /* WATERCOLOR BACKGROUND LAYERS */
        .bg-layer {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: -2; pointer-events: none;
            opacity: 0.8;
            background:
                radial-gradient(circle at 15% 25%, var(--c-pink) 0%, transparent 50%),
                radial-gradient(circle at 85% 75%, var(--c-purple) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(255,255,255,0.9) 0%, transparent 60%),
                radial-gradient(circle at 20% 80%, var(--c-green) 0%, transparent 40%);
            filter: blur(80px);
            animation: breatheBg 15s infinite alternate ease-in-out;
        }
        @keyframes breatheBg {
            0% { transform: scale(1); }
            100% { transform: scale(1.1); }
        }

        /* PAPER TEXTURE OVERLAY */
        .texture-layer {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1; pointer-events: none;
            opacity: 0.4;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='1'/%3E%3C/svg%3E");
        }

        /* CUSTOM CURSOR */
        #cursor-trail {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 99999;
        }
        #cursor-dot {
            position: fixed; width: 30px; height: 30px;
            background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23FF69B4'%3E%3Cpath d='M12 2l2.4 7.2h7.6l-6 4.8 2.4 7.2-6-4.8-6 4.8 2.4-7.2-6-4.8h7.6z'/%3E%3C/svg%3E") no-repeat center/contain;
            pointer-events: none; z-index: 100000;
            transform: translate(-50%, -50%);
            transition: transform 0.1s;
        }
        body:hover #cursor-dot { opacity: 1; }

        /* ENTRY OVERLAY */
        #entry-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #FDFBF7;
            display: flex; justify-content: center; align-items: center;
            z-index: 10000;
        }
        .overlay-content {
            text-align: center;
            padding: 4rem;
            /* Rough Edge using Mask */
            background: #fff;
            -webkit-mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 10 Q 5 0 10 10 T 20 10 T 30 10 T 40 10 T 50 10 T 60 10 T 70 10 T 80 10 T 90 10 T 100 10 T 110 10 T 120 10 T 130 10 T 140 10 T 150 10 T 160 10 T 170 10 T 180 10 T 190 10 T 200 10 L 200 90 Q 195 100 190 90 T 180 90 T 170 90 T 160 90 T 150 90 T 140 90 T 130 90 T 120 90 T 110 90 T 100 90 T 90 90 T 80 90 T 70 90 T 60 90 T 50 90 T 40 90 T 30 90 T 20 90 T 10 90 T 0 90 Z' fill='black'/%3E%3C/svg%3E");
            mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 10 Q 5 0 10 10 T 20 10 T 30 10 T 40 10 T 50 10 T 60 10 T 70 10 T 80 10 T 90 10 T 100 10 T 110 10 T 120 10 T 130 10 T 140 10 T 150 10 T 160 10 T 170 10 T 180 10 T 190 10 T 200 10 L 200 90 Q 195 100 190 90 T 180 90 T 170 90 T 160 90 T 150 90 T 140 90 T 130 90 T 120 90 T 110 90 T 100 90 T 90 90 T 80 90 T 70 90 T 60 90 T 50 90 T 40 90 T 30 90 T 20 90 T 10 90 T 0 90 Z' fill='black'/%3E%3C/svg%3E");
            mask-size: 100% 100%;
            mask-repeat: no-repeat;
            box-shadow: 0 0 0 10px rgba(0,0,0,0.1); /* Fallback */
            color: var(--c-dark-green);
        }
        .overlay-content h1 {
            font-family: var(--font-hand); font-size: 4rem; margin-bottom: 1rem;
            color: var(--c-wood);
        }
        #enter-btn {
            padding: 0.8rem 2.5rem; font-size: 1.5rem;
            background: transparent; color: var(--c-accent);
            border: 2px dashed var(--c-accent);
            border-radius: 50px; cursor: none;
            font-family: var(--font-hand); font-weight: bold;
            transition: 0.3s;
        }
        #enter-btn:hover { background: var(--c-accent); color: #fff; transform: scale(1.05); }

        /* NAV */
        nav {
            position: fixed; top: 2rem; left: 2rem; z-index: 100;
        }
        .back-link {
            text-decoration: none; color: var(--c-wood); font-weight: bold; font-size: 1.2rem;
            background: rgba(255, 255, 255, 0.9); padding: 0.8rem 1.5rem;
            border-radius: 5px;
            box-shadow: 2px 2px 0 var(--c-green);
            cursor: none; border: 1px solid var(--c-wood);
            transition: 0.3s;
            font-family: var(--font-hand);
        }
        .back-link:hover { transform: translate(-2px, -2px); box-shadow: 4px 4px 0 var(--c-green); }

        /* HERO */
        .hero {
            height: 100vh; position: relative;
            display: flex; align-items: center; justify-content: center;
            text-align: center;
        }
        .hero-content { z-index: 2; }
        .hero-badge {
            display: inline-block;
            background: var(--c-wood); color: #fff;
            padding: 0.5rem 1.5rem; border-radius: 50px;
            font-family: var(--font-hand); font-size: 1.2rem;
            margin-bottom: 1.5rem; letter-spacing: 2px;
        }
        .main-title {
            font-family: var(--font-hand); font-size: 6rem;
            color: var(--c-dark-green);
            text-shadow: 3px 3px 0 rgba(255, 183, 197, 0.5);
            margin: 0.5rem 0;
            line-height: 1.2;
        }
        .subtitle {
            font-family: var(--font-title);
            font-size: 1.5rem; color: #666;
            letter-spacing: 0.2em;
            margin-top: 1rem;
        }

        /* BIO - CANVAS STYLE */
        .bio {
            min-height: 100vh; padding: 6rem 2rem;
            position: relative;
        }
        .bio-container {
            max-width: 1000px; margin: 0 auto;
            display: flex; gap: 5rem; align-items: flex-start;
            position: relative;
        }

        .bio-image-wrapper {
            flex: 0 0 400px;
            position: relative;
        }
        .bio-image img {
            width: 100%;
            border-radius: 2px;
            box-shadow: 0 20px 40px -10px rgba(0,0,0,0.15);
            /* Watercolor Bleed Edge */
            -webkit-mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.05' numOctaves='5' stitchTiles='stitch'/%3E%3CfeDisplacementMap in='SourceGraphic' scale='10'/%3E%3C/filter%3E%3Crect x='10' y='10' width='180' height='180' rx='20' ry='20' fill='black' filter='url(%23noise)'/%3E%3C/svg%3E");
            mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.05' numOctaves='5' stitchTiles='stitch'/%3E%3CfeDisplacementMap in='SourceGraphic' scale='10'/%3E%3C/filter%3E%3Crect x='10' y='10' width='180' height='180' rx='20' ry='20' fill='black' filter='url(%23noise)'/%3E%3C/svg%3E");
            mask-size: 100% 100%;
        }

        .bio-text {
            flex: 1;
            background: rgba(255,255,255,0.4);
            padding: 3rem;
            border-radius: 10px;
            box-shadow: 0 10px 30px -5px rgba(139, 90, 43, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.6);
        }

        .bio-text h3 {
            font-family: var(--font-hand); font-size: 2.5rem; color: var(--c-wood);
            margin-bottom: 2rem;
            border-bottom: 2px solid rgba(143, 188, 143, 0.3);
            padding-bottom: 1rem;
            display: inline-block;
        }
        .bio-text p {
            font-size: 1.15rem; line-height: 2; margin-bottom: 1.5rem;
            color: #444; text-align: justify;
        }
        .quote {
            font-size: 1.5rem !important; color: var(--c-dark-green) !important;
            font-family: var(--font-hand);
            text-align: center; margin-top: 2rem;
            background: #f0f8ff;
            padding: 1.5rem; border-radius: 5px;
            display: block;
            border: 1px solid #dae1e7;
        }

        /* SHOWCASE (Menu / Gallery) */
        .showcase {
            padding: 8rem 2rem;
            text-align: center; position: relative;
        }
        .showcase h2 {
            font-family: var(--font-hand); font-size: 3.5rem; margin-bottom: 5rem;
            color: var(--c-dark-green);
            text-shadow: 0 0 20px rgba(255,255,255,0.8);
        }

        .card-container {
            display: flex; justify-content: center; gap: 4rem; flex-wrap: wrap;
            max-width: 1200px; margin: 0 auto;
        }

        .card {
            width: 300px; background: #fff; padding: 20px 20px 50px 20px; /* Polaroids style */
            box-shadow: 0 10px 25px rgba(139, 90, 43, 0.15);
            transition: 0.4s cubic-bezier(0.23, 1, 0.32, 1);
            cursor: none; position: relative;
            transform: rotate(-2deg);
            border-radius: 2px;
        }
        .card:nth-child(2) { transform: rotate(2deg); }
        .card:nth-child(3) { transform: rotate(-1deg); }

        .card:hover {
            transform: translateY(-10px) rotate(0deg) scale(1.02);
            box-shadow: 0 20px 40px rgba(139, 90, 43, 0.25);
            z-index: 10;
        }

        .card img {
            width: 100%; aspect-ratio: 1/1; object-fit: cover;
            filter: sepia(0.1) contrast(0.95);
        }

        /* FOOTER */
        footer {
            background: var(--c-wood); color: var(--c-cream);
            padding: 6rem 2rem 4rem; text-align: center;
            position: relative;
        }
        .footer-deco {
            position: absolute; top: -30px; left: 0; width: 100%; height: 30px;
            background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 120' preserveAspectRatio='none'%3E%3Cpath d='M0,0V46.29c47,0,47,36,94,36H94c47,0,47-36,94-36h0c47,0,47,36,94,36h0c47,0,47-36,94-36h0c47,0,47,36,94,36h0c47,0,47-36,94-36h0c47,0,47,36,94,36h0c47,0,47-36,94-36h0c47,0,47,36,94,36h0c47,0,47-36,94-36h0c47,0,47,36,94,36h0c47,0,47-36,94-36h0c47,0,47,36,94,36V0Z' fill='%238B4513'/%3E%3C/svg%3E") repeat-x;
            background-size: 60px 100%; transform: rotate(180deg); top: -25px;
        }

        .social-links { margin-bottom: 2rem; display: flex; justify-content: center; gap: 2rem; }
        .social-links a {
            width: 60px; height: 60px; background: #fff; color: var(--c-wood);
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            font-size: 1.8rem; transition: 0.3s; cursor: none;
            box-shadow: 0 5px 0 var(--c-pink);
        }
        .social-links a:hover { transform: translateY(-5px); background: var(--c-pink); color: #fff; box-shadow: 0 5px 0 #d698a6; }

        footer p { font-family: var(--font-cute); letter-spacing: 1px; }
        footer a { color: var(--c-pink); text-decoration: none; cursor: none; font-weight: bold; }

        /* FORTUNE DRAWER */
        #fortune-trigger {
            position: fixed; bottom: 30px; right: 30px;
            background: var(--c-wood); color: #fff;
            width: 60px; height: 60px; border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            font-size: 2rem; cursor: none;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            z-index: 900; transition: 0.3s;
            border: 2px solid var(--c-cream);
        }
        #fortune-trigger:hover { transform: scale(1.1) rotate(10deg); background: var(--c-accent); }

        #fortune-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6);
            display: flex; justify-content: center; align-items: center;
            z-index: 200000; /* Above cursor */
            opacity: 0; pointer-events: none;
            transition: 0.5s;
            backdrop-filter: blur(5px);
        }
        #fortune-modal.active { opacity: 1; pointer-events: all; }

        .fortune-content {
            background: var(--c-cream);
            padding: 3rem; border-radius: 20px;
            text-align: center; max-width: 400px; width: 90%;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            position: relative;
            border: 5px solid var(--c-wood);
        }

        .close-fortune {
            position: absolute; top: 10px; right: 15px;
            font-size: 2rem; cursor: none; color: var(--c-wood);
            transition: 0.2s;
        }
        .close-fortune:hover { color: var(--c-accent); transform: scale(1.2); }

        #cylinder {
            font-size: 5rem; margin-bottom: 1rem;
            transition: 0.1s;
        }
        .shake-anim { animation: shake 0.5s infinite; }
        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            10% { transform: translate(-1px, -2px) rotate(-1deg); }
            20% { transform: translate(-3px, 0px) rotate(1deg); }
            30% { transform: translate(3px, 2px) rotate(0deg); }
            40% { transform: translate(1px, -1px) rotate(1deg); }
            50% { transform: translate(-1px, 2px) rotate(-1deg); }
            60% { transform: translate(-3px, 1px) rotate(0deg); }
            70% { transform: translate(3px, 1px) rotate(-1deg); }
            80% { transform: translate(-1px, -1px) rotate(1deg); }
            90% { transform: translate(1px, 2px) rotate(0deg); }
            100% { transform: translate(1px, -2px) rotate(-1deg); }
        }

        #fortune-paper {
            background: #fff0f5;
            border: 2px solid var(--c-accent);
            padding: 2rem 1rem; margin-top: 2rem;
            font-family: var(--font-hand); font-size: 1.5rem;
            color: var(--c-dark-green);
            writing-mode: vertical-rl; /* Traditional vertical text */
            min-height: 200px; display: flex; align-items: center; justify-content: center;
            margin-left: auto; margin-right: auto;
            width: 100px;
            box-shadow: 5px 5px 0 rgba(0,0,0,0.1);
            opacity: 0; transform: translateY(-20px);
        }

        #shake-btn {
            padding: 0.8rem 2rem; font-size: 1.2rem;
            background: var(--c-wood); color: #fff;
            border: none; border-radius: 50px; cursor: none;
            font-family: var(--font-hand); margin-top: 1rem;
            transition: 0.2s;
        }
        #shake-btn:hover { background: var(--c-accent); transform: scale(1.05); }

        @media (max-width: 768px) {
            .main-title { font-size: 4rem; }
            .bio-container { grid-template-columns: 1fr; padding: 2rem; border-radius: 30px; }
            .card { width: 100%; margin-bottom: 2rem; }
            .card:nth-child(2) { margin-top: 0; }
        }
    </style>
</head>
<body>

    <!-- BACKGROUND LAYERS -->
    <div class="bg-layer"></div>
    <div class="texture-layer"></div>

    <!-- CUSTOM CURSOR -->
    <div id="cursor"></div>

    <!-- ENTRY OVERLAY -->
    <div id="entry-overlay">
        <div class="overlay-content">
            <h1>ç¦é¦¨å ‚</h1>
            <p>æ•²æ•²é–€ï¼Œé€²å…¥é­”æ³•è‰æœ¬æ£®æ—</p>
            <button id="enter-btn">Knock Knock</button>
        </div>
    </div>

    <!-- NAVIGATION -->
    <nav>
        <a href="index.html" class="back-link">â† å›åˆ°å…¬æœƒ</a>
    </nav>

    <!-- HERO SECTION -->
    <section class="hero" id="hero">
        <div class="hero-content">
            <div class="hero-badge">Welcome to my Magical Forest</div>
            <h1 class="main-title">ç¦é¦¨å ‚</h1>
            <h2 class="subtitle">âœ¨ å®‡å®™ç¬¬ä¸‰å¥½åƒçš„é›è›‹ç³• âœ¨</h2>
        </div>
    </section>

    <!-- FORTUNE DRAWER UI -->
    <div id="fortune-trigger" title="å¤–å…¬çš„ç±¤ç­’">ğŸ¥¡</div>

    <div id="fortune-modal">
        <div class="fortune-content">
            <div class="close-fortune">&times;</div>
            <h2>å¤–å…¬çš„ç±¤ç­’</h2>
            <p>å¿ƒä¸­é»˜å¿µå•é¡Œï¼Œèª å¿ƒæ±‚ç±¤</p>
            <div id="cylinder">ğŸ¥¡</div>
            <button id="shake-btn">æ–ä¸€æ–</button>

            <div id="fortune-paper">
                <span id="fortune-text">ä¸–é–“åƒè¬<br>å†é›£é‡æ­¤</span>
            </div>
        </div>
    </div>

    <!-- BIO SECTION -->
    <section class="bio" id="bio">
        <div class="bio-container">
            <div class="bio-image-wrapper">
                <div class="sticker s-1">ğŸŒ¿</div>
                <div class="sticker s-2">ğŸ¥š</div>
                <div class="bio-image">
                    <img src="../assets/img/guild/fuxintang/avatar.webp" alt="Fuxintang Avatar">
                </div>
            </div>
            <div class="bio-text">
                <h3>ä¸å°ˆæ¥­é›è›‹ç³•ç ”ç©¶å®¶</h3>
                <p>ä½ å¥½ï½æˆ‘ç®—æ˜¯å€‹ä¸å°ˆæ¥­é›è›‹ç³•ç ”ç©¶å®¶ï¼Œéºµç³Šé…æ–¹æ˜¯æˆ‘è‡ªå·±ç ”ç™¼å‡ºä¾†çš„ ğŸ¥£</p>
                <p>åŸæœ¬æ˜¯å­¸ç•«ç•«ï¼Œæ˜¯å€‹å…’ç«¥ç¾è¡“è€å¸« ğŸ¨ï¼Œä½†ä¸€ç›´å°é¤é£²æœ‰èˆˆè¶£ã€‚æŸå¹´ç”Ÿäº†ä¸€å ´å¤§ç—…ï¼Œç„¡æ³•é•·æ™‚é–“å·¥ä½œï¼Œåªèƒ½åœ¨æ—©é¤åº—æ‰“å·¥ã€‚</p>
                <p>æŸå¤©è·¯éä¸€å€‹è·¯é‚Šå¯«è‘—å‡ºç§Ÿæ”¤ä½ 3000ï¼Œè¦ºå¾—å¾ˆä¾¿å®œå°±è¡å‹•ç§Ÿä¸‹â€¦â€¦å°±è«åå› ç·£éš›æœƒé–‹å§‹è³£é›è›‹ç³•äº†ã€‚</p>
                <p>æˆ‘çš„é›è›‹ç³•åƒéçš„éƒ½æœƒå–œæ­¡ ğŸ’• å®¢äººéƒ½å•åŠ äº†ä»€éº¼ï¼Ÿæˆ‘èªªï¼šæ‡‰è©²æ˜¯æ„›å§ï¼å“ˆå“ˆ</p>
                <p>åº—å–åã€Œç¦é¦¨å ‚ã€æ˜¯ç‚ºäº†ç´€å¿µæˆ‘å¤–å…¬ï¼Œåœ¨ç”Ÿå‰é–‹äº†ä¸€å®¶ã€Œç¦æ˜Ÿå ‚ã€ä¸­è—¥è¡Œå…¼ç®—å‘½çš„åº— ğŸ•¯ï¸</p>
                <p class="quote">ä¸–é–“åƒè¬ å†é›£é‡æ­¤</p>
            </div>
        </div>
    </section>

    <!-- SHOWCASE SECTION (Candy House / Menu) -->
    <section class="showcase" id="showcase">
        <h2>é­”æ³•è‰æœ¬ MENU</h2>
        <div class="card-container">
            <!-- Will be populated with images -->
            <div class="card">
                <img src="../assets/img/guild/fuxintang/gallery_1.webp" alt="Product 1">
            </div>
            <div class="card">
                <img src="../assets/img/guild/fuxintang/gallery_2.webp" alt="Product 2">
            </div>
            <div class="card">
                <img src="../assets/img/guild/fuxintang/gallery_3.webp" alt="Product 3">
            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <footer>
        <div class="footer-deco"></div>
        <div class="social-links">
            <a href="https://www.threads.com/@fuxintang_tw" target="_blank"><i class="fa-brands fa-threads"></i></a>
            <a href="https://www.instagram.com/fuxintang_tw/" target="_blank"><i class="fa-brands fa-instagram"></i></a>
        </div>
        <p>Made with love by <a href="index.html">SuperGalen's Dungeon</a></p>
    </footer>

    <script>
        // --- CURSOR ---
        const cursorDot = document.getElementById('cursor-dot');

        document.addEventListener('mousemove', (e) => {
            gsap.to(cursorDot, {
                x: e.clientX,
                y: e.clientY,
                duration: 0.1,
                ease: 'power2.out'
            });
            // Little bounce on move
            gsap.to(cursorDot, {
                rotation: "+=2",
                duration: 0.1
            });
        });

        document.addEventListener('mousedown', () => gsap.to(cursorDot, { scale: 0.8 }));
        document.addEventListener('mouseup', () => gsap.to(cursorDot, { scale: 1 }));

        const hoverables = document.querySelectorAll('a, button, .card, .sticker');
        hoverables.forEach(el => {
            el.addEventListener('mouseenter', () => gsap.to(cursorDot, { scale: 1.5 }));
            el.addEventListener('mouseleave', () => gsap.to(cursorDot, { scale: 1 }));
        });

        // --- THREE.JS BACKGROUND (Aromatic Spirit Flow) ---
        const initThreeJS = () => {
            const heroSection = document.getElementById('hero');
            const scene = new THREE.Scene();

            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 20;

            const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            renderer.domElement.style.position = 'fixed';
            renderer.domElement.style.top = '0';
            renderer.domElement.style.left = '0';
            renderer.domElement.style.zIndex = '-1';
            renderer.domElement.style.pointerEvents = 'none'; // Allow clicks through
            document.body.appendChild(renderer.domElement);

            // --- HELPER: Watercolor Blob Texture ---
            function createWatercolorTexture(colorStr, type = 'blob') {
                const canvas = document.createElement('canvas');
                canvas.width = 128;
                canvas.height = 128;
                const ctx = canvas.getContext('2d');

                const centerX = 64;
                const centerY = 64;
                const radius = 50;

                if (type === 'blob') {
                    // Soft Radial Blob
                    const grd = ctx.createRadialGradient(centerX, centerY, 0, centerX, centerY, radius);
                    grd.addColorStop(0, colorStr);
                    grd.addColorStop(0.3, colorStr);
                    grd.addColorStop(1, 'rgba(255,255,255,0)');

                    ctx.fillStyle = grd;
                    ctx.beginPath();
                    ctx.arc(centerX, centerY, 64, 0, Math.PI * 2);
                    ctx.fill();
                } else if (type === 'stroke') {
                    // Brush Stroke-ish
                    ctx.strokeStyle = colorStr;
                    ctx.lineWidth = 10;
                    ctx.lineCap = 'round';
                    ctx.filter = 'blur(8px)';
                    ctx.beginPath();
                    ctx.moveTo(20, 64);
                    ctx.bezierCurveTo(40, 40, 80, 80, 108, 64);
                    ctx.stroke();
                }

                return new THREE.CanvasTexture(canvas);
            }

            // Colors
            const colors = [
                'rgba(232, 180, 184, 0.6)', // Pink
                'rgba(162, 213, 171, 0.5)', // Green
                'rgba(220, 214, 217, 0.5)', // Purple
                'rgba(255, 250, 240, 0.4)'  // Cream
            ];

            const sprites = [];
            const group = new THREE.Group();
            scene.add(group);

            // Create "Scent" Particles
            for (let i = 0; i < 60; i++) {
                const color = colors[Math.floor(Math.random() * colors.length)];
                const map = createWatercolorTexture(color, Math.random() > 0.8 ? 'stroke' : 'blob');
                const material = new THREE.SpriteMaterial({
                    map: map,
                    transparent: true,
                    opacity: 0.8,
                    blending: THREE.NormalBlending // Softer look than Additive
                });
                const sprite = new THREE.Sprite(material);

                // Wide distribution
                sprite.position.set(
                    (Math.random() - 0.5) * 40,
                    (Math.random() - 0.5) * 40,
                    (Math.random() - 0.5) * 20
                );

                // Varied scale for depth
                const scale = Math.random() * 4 + 2;
                sprite.scale.set(scale, scale, 1);

                // Custom animation data
                sprite.userData = {
                    baseX: sprite.position.x,
                    baseY: sprite.position.y,
                    speed: Math.random() * 0.2 + 0.1,
                    angle: Math.random() * Math.PI * 2,
                    radius: Math.random() * 2 + 1, // Sway radius
                    floatSpeed: Math.random() * 0.01 + 0.005
                };

                group.add(sprite);
                sprites.push(sprite);
            }

            // Animation Loop
            const clock = new THREE.Clock();

            // Mouse Interaction (Subtle Wind)
            let mouseX = 0;
            let mouseY = 0;
            const windowHalfX = window.innerWidth / 2;
            const windowHalfY = window.innerHeight / 2;

            document.addEventListener( 'mousemove', ( event ) => {
                mouseX = ( event.clientX - windowHalfX ) * 0.005; // Reduced sensitivity
                mouseY = ( event.clientY - windowHalfY ) * 0.005;
            });

            // --- INTERACTION: Scent Bursts on Click ---
            const burstParticles = [];

            function createBurst(x, y) {
                const burstColor = colors[Math.floor(Math.random() * colors.length)];

                // Get 3D Position
                const vec = new THREE.Vector3();
                const pos = new THREE.Vector3();
                vec.set(
                    (x / window.innerWidth) * 2 - 1,
                    - (y / window.innerHeight) * 2 + 1,
                    0.5 );
                vec.unproject( camera );
                vec.sub( camera.position ).normalize();
                const distance = - camera.position.z / vec.z;
                pos.copy( camera.position ).add( vec.multiplyScalar( distance ) );

                for(let i=0; i<8; i++) {
                    const map = createWatercolorTexture(burstColor, 'blob');
                    const material = new THREE.SpriteMaterial({
                        map: map,
                        transparent: true,
                        opacity: 1,
                        blending: THREE.AdditiveBlending
                    });
                    const sprite = new THREE.Sprite(material);
                    sprite.position.copy(pos);
                    sprite.scale.set(0, 0, 1); // Start small

                    // Explosion velocities
                    const angle = Math.random() * Math.PI * 2;
                    const speed = Math.random() * 0.1 + 0.05;

                    sprite.userData = {
                        vx: Math.cos(angle) * speed,
                        vy: Math.sin(angle) * speed,
                        life: 1.0,
                        decay: Math.random() * 0.02 + 0.01
                    };

                    scene.add(sprite);
                    burstParticles.push(sprite);
                }
            }

            document.addEventListener('click', (e) => {
                createBurst(e.clientX, e.clientY);
            });

            function animate() {
                const elapsedTime = clock.getElapsedTime();

                // Gentle Camera Float
                camera.position.x += ( mouseX - camera.position.x ) * 0.02;
                camera.position.y += ( - mouseY - camera.position.y ) * 0.02;
                camera.lookAt( scene.position );

                // Sprite Animation (Organic Floating)
                sprites.forEach((sprite, i) => {
                    const u = sprite.userData;

                    // Circular swaying
                    sprite.position.x = u.baseX + Math.cos(elapsedTime * u.speed + i) * u.radius;
                    sprite.position.y = u.baseY + Math.sin(elapsedTime * u.speed * 0.8 + i) * u.radius;

                    // Slow Rise
                    u.baseY += u.floatSpeed;
                    if (u.baseY > 20) u.baseY = -20;

                    // Pulsing Opacity
                    sprite.material.opacity = 0.5 + Math.sin(elapsedTime + i) * 0.2;
                });

                // Burst Animation
                for (let i = burstParticles.length - 1; i >= 0; i--) {
                    const p = burstParticles[i];
                    p.position.x += p.userData.vx;
                    p.position.y += p.userData.vy;
                    p.userData.life -= p.userData.decay;

                    // Scale up then fade
                    const s = (1 - p.userData.life) * 3;
                    p.scale.set(s, s, 1);
                    p.material.opacity = p.userData.life;

                    if (p.userData.life <= 0) {
                        scene.remove(p);
                        burstParticles.splice(i, 1);
                    }
                }

                renderer.render(scene, camera);
                requestAnimationFrame(animate);
            }
            animate();

            // Resize
            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            });
        };

        initThreeJS();

        // --- GSAP ANIMATIONS ---
        gsap.registerPlugin(ScrollTrigger);

        // Entry Animation
        const overlay = document.getElementById('entry-overlay');
        const enterBtn = document.getElementById('enter-btn');

        enterBtn.addEventListener('click', () => {
            const tl = gsap.timeline();

            // Pulse button out
            tl.to(enterBtn, { scale: 1.5, opacity: 0, duration: 0.3, ease: "back.in" })
              // Overlay splits or fades? Let's do a "Curtain Up" feel
              .to(overlay, {
                  yPercent: -100,
                  borderRadius: "0% 0% 50% 50%", // Wobbly exit
                  duration: 1.5,
                  ease: "elastic.inOut(1, 0.75)"
              })
              // Hero Reveal
              .from(".main-title", { scale: 0, rotation: -10, duration: 1, ease: "elastic.out(1, 0.5)" }, "-=0.5")
              .from(".subtitle", { y: 20, opacity: 0, duration: 0.8 }, "-=0.8")
              .from(".hero-badge", { x: -50, opacity: 0, rotation: -20, duration: 0.5 }, "-=0.6");
        });

        // Scroll Animations (Playful)

        // Bio Container Pop-up
        gsap.from(".bio-container", {
            scrollTrigger: { trigger: ".bio", start: "top 75%" },
            scale: 0.8,
            rotation: 2,
            opacity: 0,
            duration: 1,
            ease: "back.out(1.7)"
        });

        // Stickers dropping in
        gsap.from(".sticker", {
            scrollTrigger: { trigger: ".bio", start: "top 60%" },
            y: -100,
            opacity: 0,
            stagger: 0.2,
            duration: 1,
            ease: "bounce.out"
        });

        // Cards Staggered Pop
        gsap.utils.toArray('.card').forEach((card, i) => {
            gsap.from(card, {
                scrollTrigger: { trigger: ".showcase", start: "top 70%" },
                y: 100,
                rotation: Math.random() * 10 - 5,
                opacity: 0,
                duration: 0.8,
                delay: i * 0.2,
                ease: "back.out(1.5)"
            });
        });

        // Title float
        gsap.to(".main-title", {
            y: 15,
            rotation: 2,
            duration: 2,
            repeat: -1,
            yoyo: true,
            ease: "sine.inOut"
        });

        // --- FORTUNE DRAWER LOGIC ---
        const fortuneTrigger = document.getElementById('fortune-trigger');
        const fortuneModal = document.getElementById('fortune-modal');
        const closeFortune = document.querySelector('.close-fortune');
        const shakeBtn = document.getElementById('shake-btn');
        const cylinder = document.getElementById('cylinder');
        const fortunePaper = document.getElementById('fortune-paper');
        const fortuneText = document.getElementById('fortune-text');

        const fortunes = [
            "ä¸–é–“åƒè¬<br>å†é›£é‡æ­¤",
            "å¿ƒèª å‰‡éˆ<br>è¬äº‹å¦‚æ„",
            "é£Ÿä¹‹æœ‰å‘³<br>æ„›åœ¨å…¶ä¸­",
            "è‰æœ¨é€¢æ˜¥<br>ç”Ÿæ©Ÿå‹ƒå‹ƒ",
            "åˆå¿ƒä¸å¿˜<br>æ–¹å¾—å§‹çµ‚",
            "ç¦æ˜Ÿé«˜ç…§<br>é¦¨é¦™æ»¿å ‚"
        ];

        fortuneTrigger.addEventListener('click', () => {
            fortuneModal.classList.add('active');
            gsap.set(fortunePaper, { opacity: 0, y: -20 });
            shakeBtn.style.display = 'inline-block';
        });

        closeFortune.addEventListener('click', () => {
            fortuneModal.classList.remove('active');
        });

        shakeBtn.addEventListener('click', () => {
            cylinder.classList.add('shake-anim');
            shakeBtn.disabled = true;

            // Shake for 1.5s
            setTimeout(() => {
                cylinder.classList.remove('shake-anim');

                // Pick random fortune
                const randomFortune = fortunes[Math.floor(Math.random() * fortunes.length)];
                fortuneText.innerHTML = randomFortune;

                // Reveal Paper
                gsap.to(fortunePaper, { opacity: 1, y: 0, duration: 1, ease: "power2.out" });

                shakeBtn.disabled = false;
                shakeBtn.style.display = 'none'; // Hide button after drawing
            }, 1500);
        });

        // Add Hover for Modal elements
        const modalHoverables = document.querySelectorAll('#fortune-trigger, .close-fortune, #shake-btn');
        modalHoverables.forEach(el => {
            el.addEventListener('mouseenter', () => gsap.to(cursorDot, { scale: 1.5 }));
            el.addEventListener('mouseleave', () => gsap.to(cursorDot, { scale: 1 }));
        });

    </script>
</body>
</html>
