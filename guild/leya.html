<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leya | The Drifting Current</title>
    <meta name="description" content="Leya - 漂泊的勇敢靈魂，隨風而行，自由書寫。">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,600;1,400&family=Noto+Serif+TC:wght@300;500;700&family=La+Belle+Aurore&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <!-- Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>

    <style>
        :root {
            --bg-color: #f8f9fa;
            --text-main: #2c3e50;
            --text-accent: #8e44ad; /* Lavender/Purple */
            --text-muted: #95a5a6;
            --font-serif: 'Cormorant Garamond', serif;
            --font-hand: 'La+Belle+Aurore', cursive;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: 'Noto Serif TC', serif;
            overflow-x: hidden; /* Hide horizontal scrollbar initially */
            overflow-y: auto;   /* Allow vertical scroll to drive horizontal */
            width: 100vw;
        }

        /* Hide scrollbars */
        ::-webkit-scrollbar { width: 0px; background: transparent; }

        /* --- Layers --- */
        #p5-container {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: 0;
            pointer-events: none;
            opacity: 0.6;
        }

        #horizontal-wrapper {
            display: flex;
            flex-wrap: nowrap;
            width: 400vw; /* 4 sections wide */
            height: 100vh;
            position: relative;
            z-index: 10;
            overflow: hidden; /* GSAP will transform this */
        }

        /* --- Sections --- */
        .panel {
            width: 100vw;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            flex-shrink: 0;
            padding: 4rem;
        }

        /* Typography */
        h1 {
            font-family: var(--font-serif);
            font-size: clamp(4rem, 15vw, 12rem);
            font-weight: 300;
            letter-spacing: -0.02em;
            line-height: 0.8;
            color: var(--text-main);
            mix-blend-mode: multiply;
        }

        h2 {
            font-family: var(--font-serif);
            font-size: 3rem;
            font-weight: 300;
            font-style: italic;
            color: var(--text-accent);
            margin-bottom: 2rem;
        }

        .subtitle {
            font-family: var(--font-hand);
            font-size: 2rem;
            color: var(--text-muted);
            transform: rotate(-5deg);
            display: inline-block;
            margin-top: 1rem;
        }

        .text-float {
            font-size: 1.2rem;
            line-height: 2;
            max-width: 500px;
            color: var(--text-main);
            position: relative;
        }

        .highlight {
            background: linear-gradient(120deg, rgba(142, 68, 173, 0.1) 0%, rgba(142, 68, 173, 0.3) 100%);
            padding: 0 5px;
        }

        /* Gallery / Floating Images */
        .image-container {
            position: absolute;
            width: 300px;
            height: 400px;
            overflow: hidden;
            box-shadow: 0 20px 50px rgba(0,0,0,0.1);
            border-radius: 2px;
            opacity: 0.9;
            transition: transform 0.5s ease;
        }

        .image-container img {
            width: 100%; height: 100%; object-fit: cover;
            filter: grayscale(20%);
            transition: filter 0.5s ease;
        }

        .image-container:hover img {
            filter: grayscale(0%);
            transform: scale(1.05);
        }

        /* Navigation */
        .nav-fixed {
            position: fixed;
            top: 2rem; left: 2rem;
            z-index: 100;
            font-family: var(--font-serif);
            font-size: 1rem;
            letter-spacing: 0.1em;
        }

        .nav-fixed a {
            color: var(--text-main);
            text-decoration: none;
            border-bottom: 1px solid transparent;
            transition: border-color 0.3s;
        }
        .nav-fixed a:hover { border-color: var(--text-accent); }

        .progress-bar {
            position: fixed;
            bottom: 2rem; left: 2rem; right: 2rem;
            height: 2px;
            background: rgba(0,0,0,0.1);
            z-index: 100;
        }

        .progress-fill {
            height: 100%; width: 0%;
            background: var(--text-accent);
        }

        /* Specific Layouts */
        #panel-1 {
            flex-direction: column;
            text-align: center;
        }

        #panel-2 {
            justify-content: space-around;
        }

        #panel-3 {
            /* Scattered Layout */
        }

        #panel-4 {
            flex-direction: column;
            text-align: center;
        }

        /* Quote */
        .quote-huge {
            font-family: var(--font-serif);
            font-size: clamp(2rem, 5vw, 4rem);
            font-style: italic;
            color: var(--text-muted);
            line-height: 1.2;
            max-width: 800px;
        }

        /* Footer Links */
        .social-dock {
            margin-top: 3rem;
            display: flex;
            gap: 2rem;
            justify-content: center;
        }

        .social-link {
            font-size: 2rem;
            color: var(--text-main);
            transition: color 0.3s;
        }

        .social-link:hover { color: var(--text-accent); }

    </style>
</head>
<body>

    <div id="p5-container"></div>

    <div class="nav-fixed">
        <a href="index.html">← GUILD / LEYA</a>
    </div>

    <div class="progress-bar"><div class="progress-fill"></div></div>

    <div id="horizontal-wrapper">

        <!-- Panel 1: Intro -->
        <section class="panel" id="panel-1">
            <h1 class="gsap-title">LEYA</h1>
            <div class="subtitle gsap-subtitle">The Drifting Current</div>
            <div style="margin-top: 2rem; opacity: 0.6;">SCROLL TO FLOW &rarr;</div>
        </section>

        <!-- Panel 2: The Bio (Split Layout) -->
        <section class="panel" id="panel-2">
            <div class="text-float gsap-text">
                <h2>The Drifter</h2>
                <p>
                    三十歲以前的日子，有三分之一漂泊在外。<br>
                    無房、無車、無婚姻，只有一顆<span class="highlight">勇敢的心</span>。<br><br>
                    我是個感性與理性並存的漫遊者。<br>
                    喜歡創作、思考人性，敢於質疑表象。
                </p>
            </div>

            <div class="image-container gsap-img" style="transform: rotate(3deg); right: 10vw;">
                <img src="../assets/img/guild/leya/avatar.webp" alt="Leya Profile">
            </div>
        </section>

        <!-- Panel 3: Fragments (Gallery) -->
        <section class="panel" id="panel-3">
            <h2 style="position: absolute; top: 10vh; left: 10vw; z-index: 5;">Fragments of Time</h2>

            <!-- Scattered Images -->
            <div class="image-container gallery-item" style="top: 20vh; left: 5vw; width: 250px; height: 250px; transform: rotate(-5deg);">
                <img src="../assets/img/guild/leya/gallery_1.webp">
            </div>

            <div class="image-container gallery-item" style="bottom: 10vh; left: 25vw; width: 300px; height: 200px; transform: rotate(2deg);">
                <img src="../assets/img/guild/leya/gallery_2.webp">
            </div>

            <div class="image-container gallery-item" style="top: 15vh; right: 20vw; width: 220px; height: 300px; transform: rotate(4deg);">
                <img src="../assets/img/guild/leya/gallery_3.webp">
            </div>

            <div class="image-container gallery-item" style="bottom: 20vh; right: 5vw; width: 280px; height: 280px; transform: rotate(-3deg);">
                <img src="../assets/img/guild/leya/gallery_4.webp">
            </div>

            <!-- Floating Text -->
            <div class="text-float" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; background: rgba(255,255,255,0.8); padding: 2rem;">
                "在成長與挫折中學習，<br>一邊害怕、一邊前進。"
            </div>
        </section>

        <!-- Panel 4: Future -->
        <section class="panel" id="panel-4">
            <div class="quote-huge">
                "慢慢走也可以，<br>走在自己要的路上都會發光。"
            </div>

            <div style="margin-top: 4rem; display: flex; gap: 4rem; text-align: center;">
                <div>
                    <i class="fa-solid fa-earth-oceania" style="font-size: 2rem; color: var(--text-accent);"></i>
                    <p style="margin-top: 1rem;">AUSTRALIA</p>
                </div>
                <div>
                    <i class="fa-solid fa-route" style="font-size: 2rem; color: var(--text-accent);"></i>
                    <p style="margin-top: 1rem;">SPAIN</p>
                </div>
                <div>
                    <i class="fa-solid fa-wifi" style="font-size: 2rem; color: var(--text-accent);"></i>
                    <p style="margin-top: 1rem;">CHANNEL</p>
                </div>
            </div>

            <div class="social-dock">
                <a href="https://www.instagram.com/goodays.leya/" target="_blank" class="social-link"><i class="fa-brands fa-instagram"></i></a>
                <a href="https://www.threads.com/@goodays.leya" target="_blank" class="social-link"><i class="fa-brands fa-threads"></i></a>
            </div>

            <div style="margin-top: 2rem; font-size: 0.8rem; color: var(--text-muted);">
                Made with love by <a href="../index.html" style="color:inherit;">SuperGalen's Dungeon</a>
            </div>
        </section>

    </div>

    <script>
        // --- 1. P5.JS (Flow Field Background) ---
        const initP5 = () => {
            const sketch = (p) => {
                let particles = [];
                const num = 1000;
                const noiseScale = 0.01;

                p.setup = () => {
                    const container = document.getElementById('p5-container');
                    const canvas = p.createCanvas(window.innerWidth, window.innerHeight);
                    canvas.parent('p5-container');

                    for(let i=0; i<num; i++) {
                        particles.push(p.createVector(p.random(p.width), p.random(p.height)));
                    }

                    p.stroke(142, 68, 173, 20); // Lavender, very transparent
                };

                p.draw = () => {
                    // Slight fade for trails? Or just clear?
                    // Let's create trails by not clearing fully
                    p.background(248, 249, 250, 5); // Very light fade

                    for(let i=0; i<num; i++) {
                        let particle = particles[i];

                        // Flow field logic
                        let n = p.noise(particle.x * noiseScale, particle.y * noiseScale, p.frameCount * 0.001);
                        let a = p.TAU * n;

                        particle.x += p.cos(a);
                        particle.y += p.sin(a);

                        // Wrap around
                        if(!onScreen(particle)) {
                            particle.x = p.random(p.width);
                            particle.y = p.random(p.height);
                        }

                        p.point(particle.x, particle.y);
                    }
                };

                function onScreen(v) {
                    return v.x >= 0 && v.x <= p.width && v.y >= 0 && v.y <= p.height;
                }

                p.windowResized = () => {
                    p.resizeCanvas(window.innerWidth, window.innerHeight);
                };
            };
            new p5(sketch);
        };

        // --- 2. GSAP (Horizontal Scroll) ---
        const initGSAP = () => {
            gsap.registerPlugin(ScrollTrigger);

            const wrapper = document.getElementById('horizontal-wrapper');
            const sections = gsap.utils.toArray('.panel');

            // Horizontal Scroll
            let scrollTween = gsap.to(sections, {
                xPercent: -100 * (sections.length - 1),
                ease: "none",
                scrollTrigger: {
                    trigger: wrapper,
                    pin: true,
                    scrub: 1,
                    snap: 1 / (sections.length - 1),
                    end: () => "+=" + wrapper.offsetWidth,
                    onUpdate: (self) => {
                        gsap.to('.progress-fill', { width: (self.progress * 100) + '%' });
                    }
                }
            });

            // Parallax Animations within sections

            // Panel 1: Title Fade
            gsap.from(".gsap-title", {
                opacity: 0, y: 50, duration: 1.5, ease: "power2.out"
            });
            gsap.from(".gsap-subtitle", {
                opacity: 0, x: -50, duration: 1.5, delay: 0.5
            });

            // Panel 2: Image Parallax
            // We need to trigger this when Panel 2 comes into view horizontally
            // Using containerAnimation property of ScrollTrigger

            gsap.from(".gsap-text", {
                y: 100, opacity: 0,
                scrollTrigger: {
                    trigger: "#panel-2",
                    containerAnimation: scrollTween,
                    start: "left center",
                    toggleActions: "play none none reverse"
                }
            });

            gsap.from(".gsap-img", {
                x: 200, opacity: 0,
                scrollTrigger: {
                    trigger: "#panel-2",
                    containerAnimation: scrollTween,
                    start: "left center",
                    toggleActions: "play none none reverse"
                }
            });

            // Panel 3: Gallery Stagger
            gsap.utils.toArray(".gallery-item").forEach((item, i) => {
                gsap.from(item, {
                    y: (Math.random() - 0.5) * 200,
                    x: (Math.random() - 0.5) * 200,
                    opacity: 0,
                    duration: 1,
                    scrollTrigger: {
                        trigger: "#panel-3",
                        containerAnimation: scrollTween,
                        start: "left center",
                        toggleActions: "play none none reverse"
                    },
                    delay: i * 0.1
                });
            });

        };

        // --- Execute ---
        window.addEventListener('DOMContentLoaded', () => {
            initP5();
            initGSAP();
        });

    </script>
</body>
</html>