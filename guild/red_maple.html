---
layout: none
---
<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RED MAPLE | 靈魂主廚的數位工坊</title>
    <!-- Three.js & GSAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=Orbitron:wght@400;700&family=Zen+Maru+Gothic:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            /* STATE: VOID (Default) */
            --c-bg: #0b001a;       /* Deep Void Purple */
            --c-primary: #00f3ff;  /* Cyan */
            --c-secondary: #d400ff;/* Magenta */
            --c-accent: #333333;   /* Grey */
            --c-text: #f0f0f0;
            --c-text-shadow: rgba(0, 243, 255, 0.5);

            --f-title: 'Ma Shan Zheng', cursive;
            --f-tech: 'Orbitron', sans-serif;
            --f-body: 'Zen Maru Gothic', sans-serif;

            --transition-speed: 2.5s;
        }

        /* STATE: AWAKENED (Chef/Fire) */
        body.awakened {
            --c-bg: #1a0500;       /* Dark Ember */
            --c-primary: #ffaa00;  /* Gold */
            --c-secondary: #ff3333;/* Fire Red */
            --c-accent: #551a1a;   /* Burnt Red */
            --c-text: #fff8e1;     /* Warm White */
            --c-text-shadow: rgba(255, 51, 51, 0.5);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; cursor: none; }

        body {
            background-color: var(--c-bg);
            color: var(--c-text);
            font-family: var(--f-body);
            overflow-x: hidden;
            transition: background-color var(--transition-speed), color var(--transition-speed);
        }

        /* BOOT SCREEN */
        #boot-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000;
            z-index: 20000;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            color: #00f3ff;
            font-family: var(--f-tech);
            transition: opacity 1s, visibility 1s;
            visibility: visible;
            cursor: auto; /* Ensure cursor is visible */
        }
        #boot-screen.hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }
        .boot-loader {
            width: 200px; height: 2px; background: #333; margin: 2rem 0;
            position: relative; overflow: hidden;
        }
        .boot-bar {
            position: absolute; top: 0; left: 0; height: 100%; width: 0%;
            background: #00f3ff;
            animation: load 2s ease-in-out forwards;
        }
        @keyframes load { 0% { width: 0%; } 100% { width: 100%; } }

        .boot-btn {
            padding: 1rem 3rem;
            border: 1px solid #00f3ff;
            color: #00f3ff;
            background: transparent;
            font-family: var(--f-tech);
            font-size: 1.2rem;
            letter-spacing: 2px;
            cursor: none;
            opacity: 0;
            transition: 0.3s;
            pointer-events: none; /* Disabled until loaded */
        }
        .boot-btn:hover { background: rgba(0, 243, 255, 0.1); box-shadow: 0 0 15px #00f3ff; }
        .boot-btn.ready { opacity: 1; pointer-events: auto; }


        /* CUSTOM CURSOR */
        #cursor {
            position: fixed; top: 0; left: 0; width: 20px; height: 20px;
            border: 2px solid var(--c-primary);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            pointer-events: none; z-index: 20001; /* Higher than boot screen */
            transition: width 0.3s, height 0.3s, border-color var(--transition-speed);
            mix-blend-mode: difference;
            box-shadow: 0 0 10px var(--c-primary);
        }
        #cursor.active {
            width: 50px; height: 50px;
            background-color: rgba(255, 255, 255, 0.1);
        }
        .trail {
            position: fixed; width: 8px; height: 8px;
            background: var(--c-primary);
            border-radius: 50%;
            pointer-events: none; z-index: 9999;
            opacity: 0.6;
            box-shadow: 0 0 5px var(--c-primary);
            transition: background var(--transition-speed);
        }

        /* SCENE */
        #canvas-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 0;
        }

        /* UI */
        .container {
            position: relative; z-index: 10;
            max-width: 1200px; margin: 0 auto;
            padding: 0 2rem;
            min-height: 100vh;
            opacity: 0; transform: translateY(20px);
            transition: opacity 1s, transform 1s;
        }
        .container.visible { opacity: 1; transform: translateY(0); }

        /* NAV */
        nav {
            padding: 2rem 0;
            display: flex; justify-content: space-between; align-items: center;
        }
        .back-link {
            color: var(--c-text); text-decoration: none;
            font-family: var(--f-tech); display: flex; align-items: center; gap: 0.5rem;
            transition: 0.3s;
        }
        .back-link:hover { color: var(--c-primary); text-shadow: 0 0 10px var(--c-primary); }

        /* HERO & AVATAR */
        .hero {
            min-height: 80vh;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            text-align: center;
            position: relative;
        }

        .avatar-wrapper {
            position: relative;
            width: 300px; height: 300px;
            margin-bottom: 2rem;
            cursor: pointer; /* Explicitly clickable */
        }

        /* The Eye Mask */
        .avatar-mask {
            width: 100%; height: 100%;
            clip-path: circle(48% at 50% 50%);
            position: relative;
            z-index: 5;
            overflow: hidden;
            border: 2px solid var(--c-primary);
            border-radius: 50%;
            transition: border-color var(--transition-speed), box-shadow 0.3s;
        }
        .avatar-wrapper:hover .avatar-mask {
            box-shadow: 0 0 30px var(--c-primary);
        }
        body.awakened .avatar-wrapper:hover .avatar-mask {
            box-shadow: 0 0 30px var(--c-secondary);
        }

        .avatar-img {
            width: 100%; height: 100%; object-fit: cover;
            /* transition: transform 0.1s; Removed to avoid conflict with GSAP */
            will-change: transform;
        }

        /* Eyelid Overlay */
        .eyelid {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: #000;
            z-index: 10;
            transform-origin: top;
            transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            transform: scaleY(0.55); /* Default: Half-Awake/Drowsy */
            pointer-events: none;
        }
        .eyelid.bottom {
            transform-origin: bottom;
            top: auto; bottom: 0;
        }

        /* Awakened State: Fully Open */
        body.awakened .eyelid { transform: scaleY(0); }

        /* Blink Animations */
        /* Drowsy Blink (Default): Slow, heavy close and reopen */
        @keyframes blink-drowsy {
            0% { transform: scaleY(0.55); }
            40% { transform: scaleY(1); } /* Close */
            60% { transform: scaleY(1); } /* Hold */
            100% { transform: scaleY(0.55); }
        }

        /* Alert Blink (Awakened): Fast snap */
        @keyframes blink-alert {
            0% { transform: scaleY(0); }
            50% { transform: scaleY(1); }
            100% { transform: scaleY(0); }
        }

        .eyelid.blinking-drowsy { animation: blink-drowsy 2.5s ease-in-out; }
        .eyelid.blinking-alert { animation: blink-alert 0.15s linear; }

        /* Rune Ring */
        .rune-ring {
            position: absolute; top: -10%; left: -10%; width: 120%; height: 120%;
            border: 1px dashed var(--c-primary);
            border-radius: 50%;
            animation: rotate 20s linear infinite;
            z-index: 1;
            transition: border-color var(--transition-speed), transform 0.5s;
        }
        .avatar-wrapper:hover .rune-ring {
            transform: scale(1.1);
            animation-duration: 2s; /* Spin fast on hover */
            border-color: #fff;
            box-shadow: 0 0 20px var(--c-primary);
        }
        body.awakened .avatar-wrapper:hover .rune-ring {
            box-shadow: 0 0 20px var(--c-secondary);
        }

        .rune-ring::before {
            content: ''; position: absolute; top: 10%; left: 10%; width: 80%; height: 80%;
            border: 1px solid var(--c-secondary);
            border-radius: 50%;
            animation: rotate-rev 15s linear infinite;
        }

        /* Interaction Hint */
        .interaction-hint {
            position: absolute; bottom: -40px; left: 50%;
            transform: translateX(-50%);
            font-family: var(--f-tech);
            font-size: 0.8rem;
            color: var(--c-primary);
            opacity: 0.8;
            letter-spacing: 2px;
            white-space: nowrap;
            animation: pulse 2s infinite;
        }
        @keyframes pulse { 0%, 100% { opacity: 0.4; } 50% { opacity: 1; text-shadow: 0 0 10px var(--c-primary); } }

        @keyframes rotate { 100% { transform: rotate(360deg); } }
        @keyframes rotate-rev { 100% { transform: rotate(-360deg); } }

        .title {
            font-family: var(--f-title);
            font-size: clamp(4rem, 10vw, 7rem);
            color: var(--c-text);
            text-shadow: 0 0 20px var(--c-secondary);
            margin-bottom: 1rem;
            transition: color var(--transition-speed), text-shadow var(--transition-speed);
        }

        .role-badge {
            font-family: var(--f-tech);
            color: var(--c-primary);
            border: 1px solid var(--c-primary);
            padding: 0.5rem 2rem;
            letter-spacing: 3px;
            text-transform: uppercase;
            background: rgba(0,0,0,0.5);
            transition: all var(--transition-speed);
        }

        .status-text {
            margin-top: 1rem;
            color: #888;
            font-size: 0.9rem;
            font-family: var(--f-body);
            transition: color 0.5s;
        }
        body.awakened .status-text { color: var(--c-primary); text-shadow: 0 0 5px var(--c-primary); }

        /* CONTENT */
        .content-section { margin-bottom: 6rem; }

        .section-header {
            display: flex; align-items: center; gap: 1rem;
            margin-bottom: 3rem;
            color: var(--c-secondary);
            transition: color var(--transition-speed);
        }
        .section-header h2 { font-family: var(--f-title); font-size: 2.5rem; }
        .line {
            flex: 1; height: 1px;
            background: linear-gradient(90deg, var(--c-secondary), transparent);
            transition: background var(--transition-speed);
        }

        .grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 2rem;
        }

        .card {
            background: rgba(0,0,0,0.4);
            border: 1px solid var(--c-accent);
            padding: 2rem;
            position: relative;
            transition: all 0.3s, border-color var(--transition-speed);
            backdrop-filter: blur(5px);
        }
        .card:hover {
            border-color: var(--c-primary);
            transform: translateY(-5px);
            background: rgba(20, 20, 20, 0.6);
            box-shadow: 0 10px 30px -10px rgba(0,0,0,0.5);
        }

        .card h3 {
            font-family: var(--f-tech); color: var(--c-primary);
            margin-bottom: 1rem; font-size: 1.4rem;
            display: flex; align-items: center; gap: 0.8rem;
            transition: color var(--transition-speed);
        }
        .card p { line-height: 1.8; color: #ccc; margin-bottom: 0.8rem; }

        .menu-item {
            display: flex; align-items: baseline; gap: 1rem;
            margin-bottom: 1rem; padding-bottom: 1rem;
            border-bottom: 1px dashed #333;
        }
        .menu-item:last-child { border-bottom: none; }
        .menu-name { color: var(--c-text); font-weight: bold; min-width: 140px; }
        .menu-desc { color: #aaa; font-size: 0.9rem; }

        /* FULL WIDTH FOOTER */
        footer {
            width: 100%;
            padding: 4rem 2rem;
            background: #050505;
            border-top: 1px solid var(--c-accent);
            text-align: center;
            position: relative; z-index: 20;
            transition: border-color var(--transition-speed);
        }
        .footer-content { max-width: 1200px; margin: 0 auto; }

        .socials { display: flex; justify-content: center; gap: 2rem; margin-bottom: 2rem; }
        .social-link {
            font-size: 1.8rem; color: #555;
            transition: 0.3s;
        }
        .social-link:hover { color: var(--c-primary); transform: scale(1.2); }

        /* Blueprint Stylization (Skill Tree) */
        .blueprint-placeholder {
            width: 100%; padding: 2rem;
            background:
                linear-gradient(90deg, rgba(0,243,255,0.05) 1px, transparent 1px),
                linear-gradient(rgba(0,243,255,0.05) 1px, transparent 1px);
            background-size: 30px 30px;
            border: 1px solid var(--c-primary);
            margin-top: 1rem;
        }
        .skill-tree {
            display: flex; justify-content: space-around; align-items: center;
            position: relative;
        }
        .skill-node {
            display: flex; flex-direction: column; align-items: center; gap: 0.5rem;
            position: relative; z-index: 2;
        }
        .node-icon {
            width: 60px; height: 60px;
            border: 2px solid var(--c-primary);
            border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            font-size: 1.5rem; color: var(--c-primary);
            background: rgba(0,0,0,0.8);
            transition: 0.3s;
        }
        .skill-node:hover .node-icon {
            background: var(--c-primary); color: #000; box-shadow: 0 0 20px var(--c-primary);
        }
        .node-label { font-family: var(--f-tech); font-size: 0.8rem; color: #aaa; }

        .tree-line {
            position: absolute; top: 30px; left: 10%; width: 80%; height: 2px;
            background: var(--c-primary); opacity: 0.3; z-index: 1;
        }

        @media (max-width: 768px) {
            .title { font-size: 3.5rem; }
            .avatar-wrapper { width: 220px; height: 220px; }
        }
    </style>
</head>
<body class="">

    <!-- BOOT SCREEN -->
    <div id="boot-screen">
        <div style="font-size: 2rem; letter-spacing: 5px;">SYSTEM INIT</div>
        <div class="boot-loader"><div class="boot-bar"></div></div>
        <button class="boot-btn hover-trigger" id="enter-btn">CONNECT NEURAL LINK</button>
    </div>

    <!-- THREE.JS CANVAS -->
    <div id="canvas-container"></div>

    <!-- CUSTOM CURSOR -->
    <div id="cursor"></div>

    <div class="container" id="main-content">
        <nav>
            <a href="index.html" class="back-link hover-trigger"><i class="fas fa-arrow-left"></i> GUILD HALL</a>
            <div style="font-family: var(--f-tech); color: var(--c-secondary); opacity: 0.7;">ID: RED_MAPLE</div>
        </nav>

        <section class="hero">
            <div class="avatar-wrapper hover-trigger" id="avatar-btn">
                <div class="rune-ring"></div>
                <div class="avatar-mask">
                    <img src="../assets/img/guild/red_maple/avatar.webp" alt="The Eye" class="avatar-img">
                    <div class="eyelid top"></div>
                    <div class="eyelid bottom"></div>
                </div>
                <div class="interaction-hint" id="eye-hint">CLICK TO AWAKEN</div>
            </div>

            <h1 class="title">紅 葉</h1>
            <div class="role-badge" id="role-text">DIGITAL ASCETIC // 數位苦行僧</div>
            <div class="status-text" id="status-text">State: MEDITATING</div>
        </section>

        <section class="content-section">
            <div class="section-header">
                <h2>主廚推薦 // CHEF'S SPECIALS</h2>
                <div class="line"></div>
            </div>

            <div class="grid">
                <div class="card hover-trigger">
                    <h3><i class="fas fa-fire-alt"></i> 靈魂廚房 (The Kitchen)</h3>
                    <p>曾經，我以烈火烹調食材，在凡世的廚房修煉靈魂。那裡的熱度教會了我人情世故。</p>
                    <p>如今，我將這份熱情轉移至代碼的虛空。我是一名「怪人」，既隨和如水，又像幽靈般難以捉摸。</p>
                    <p style="color: var(--c-primary); margin-top: 1rem;">"Cooking code with the same passion as a 5-star dish."</p>
                </div>

                <div class="card hover-trigger">
                    <h3><i class="fas fa-utensils"></i> 單點服務 (A La Carte)</h3>
                    <div class="menu-item">
                        <span class="menu-name">靈魂休憩</span>
                        <span class="menu-desc">無壓力的傾聽與對話，情緒發洩的避風港。</span>
                    </div>
                    <div class="menu-item">
                        <span class="menu-name">機巧共鳴</span>
                        <span class="menu-desc">Godot、機器人、焊接技術交流與共研。</span>
                    </div>
                    <div class="menu-item">
                        <span class="menu-name">幽靈協作</span>
                        <span class="menu-desc">慵懶但可靠的隨叫隨到助手服務。</span>
                    </div>
                </div>
            </div>
        </section>

        <section class="content-section">
            <div class="section-header">
                <h2>開發日誌 // DEV LOG</h2>
                <div class="line"></div>
            </div>

            <div class="grid">
                <div class="card hover-trigger" style="grid-column: 1 / -1;">
                    <h3><i class="fas fa-scroll"></i> 未來藍圖 (Blueprint)</h3>
                    <p>夢想建立一個遊戲人群統合協作的工會，或是單純地幫助他人變得更好。</p>
                    <div class="blueprint-placeholder">
                        <div class="skill-tree">
                            <div class="tree-line"></div>
                            <div class="skill-node">
                                <div class="node-icon"><i class="fas fa-cube"></i></div>
                                <div class="node-label">GODOT</div>
                            </div>
                            <div class="skill-node">
                                <div class="node-icon"><i class="fas fa-microchip"></i></div>
                                <div class="node-label">AUTO</div>
                            </div>
                            <div class="skill-node">
                                <div class="node-icon"><i class="fas fa-users"></i></div>
                                <div class="node-label">GUILD</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card hover-trigger">
                    <h3><i class="fas fa-gamepad"></i> 當前副本 (Current Quest)</h3>
                    <p><strong>主線：</strong> 等待大學畢業，尋找轉職契機。</p>
                    <p><strong>支線：</strong> 鑽研 Godot 遊戲引擎，學習電工與自動化技術。</p>
                </div>

                <div class="card hover-trigger">
                    <h3><i class="fas fa-id-card"></i> 人物屬性 (Attributes)</h3>
                    <p>#廚師 #轉職 #遊戲 #自動化 #眼睛 #魔幻 #楓葉</p>
                </div>
            </div>
        </section>
    </div>

    <!-- FOOTER (Full Width) -->
    <footer>
        <div class="footer-content">
            <div class="socials">
                <a href="https://www.threads.com/@red_mapl_e" target="_blank" class="social-link hover-trigger"><i class="fa-solid fa-at"></i></a>
                <a href="https://www.instagram.com/red_mapl_e/" target="_blank" class="social-link hover-trigger"><i class="fab fa-instagram"></i></a>
            </div>
            <p style="color: #666; font-size: 0.8rem;">Rendered by SuperGalen's Guild</p>
        </div>
    </footer>

    <script>
        // BOOT SEQUENCE
        const enterBtn = document.getElementById('enter-btn');
        const bootScreen = document.getElementById('boot-screen');

        // Failsafe: Make button ready faster (1s) and ensure it's clickable
        setTimeout(() => enterBtn.classList.add('ready'), 1000);

        enterBtn.addEventListener('click', () => {
            // Use CSS class for transition instead of GSAP dependency for critical path
            bootScreen.classList.add('hidden');

            // Show content immediately
            setTimeout(() => {
                document.getElementById('main-content').classList.add('visible');
            }, 500);
        });

        // STATE MANAGEMENT
        let isAwakened = false;
        const body = document.body;
        const avatarWrapper = document.getElementById('avatar-btn');
        const avatarImg = document.querySelector('.avatar-img');
        const roleText = document.getElementById('role-text');
        const statusText = document.getElementById('status-text');
        const eyeHint = document.getElementById('eye-hint');

        // GLOBAL Eye Tracking Logic (Follows cursor everywhere)
        document.addEventListener('mousemove', (e) => {
            const rect = avatarWrapper.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;

            // Calculate distance from center normalized
            // We clamp movement to avoid the eye disappearing too far
            const dx = e.clientX - centerX;
            const dy = e.clientY - centerY;

            // Limit movement range (e.g., max 30px offset)
            const maxOffset = 30;
            const angle = Math.atan2(dy, dx);
            const dist = Math.min(Math.sqrt(dx*dx + dy*dy), 500); // 500px radius of influence or linear?

            // Linear mapping: closer mouse = precise tracking, far mouse = look in general direction
            // Let's just normalize direction * intensity
            const intensity = Math.min(dist / 500, 1.0); // 0 to 1

            const moveX = Math.cos(angle) * maxOffset * intensity;
            const moveY = Math.sin(angle) * maxOffset * intensity;

            // Apply GSAP
            gsap.to(avatarImg, {
                x: moveX,
                y: moveY,
                duration: 0.2,
                ease: "power2.out"
            });
        });

        // Blinking Logic (Handles both states)
        const eyelids = document.querySelectorAll('.eyelid');
        let blinkTimer;

        function triggerBlink() {
            const className = isAwakened ? 'blinking-alert' : 'blinking-drowsy';
            const duration = isAwakened ? 200 : 2500;

            eyelids.forEach(el => el.classList.add(className));

            setTimeout(() => {
                eyelids.forEach(el => el.classList.remove(className));
                scheduleNextBlink();
            }, duration);
        }

        function scheduleNextBlink() {
            // Drowsy: Random 3-7s, Alert: Random 2-5s
            const delay = isAwakened
                ? Math.random() * 3000 + 2000
                : Math.random() * 4000 + 3000;

            clearTimeout(blinkTimer);
            blinkTimer = setTimeout(triggerBlink, delay);
        }

        // Initialize Blinking
        scheduleNextBlink();

        // Toggle State
        avatarWrapper.addEventListener('click', () => {
            isAwakened = !isAwakened;

            // Clear current blink animations immediately
            eyelids.forEach(el => {
                el.classList.remove('blinking-drowsy');
                el.classList.remove('blinking-alert');
            });
            clearTimeout(blinkTimer);

            if (isAwakened) {
                // WAKE UP -> FIRE MODE
                body.classList.add('awakened');
                roleText.innerText = "SOUL CHEF // 靈魂主廚";
                statusText.innerText = "State: IGNITED (Cooking in Progress)";
                eyeHint.innerText = "CLICK TO MEDITATE";
                roleText.style.borderColor = "#ffaa00";
                roleText.style.color = "#ffaa00";
            } else {
                // SLEEP -> VOID MODE
                body.classList.remove('awakened');
                roleText.innerText = "DIGITAL ASCETIC // 數位苦行僧";
                statusText.innerText = "State: MEDITATING";
                eyeHint.innerText = "CLICK TO AWAKEN";
                roleText.style.borderColor = "#00f3ff";
                roleText.style.color = "#00f3ff";
            }

            // Restart blink schedule with new state parameters
            scheduleNextBlink();
        });


        // CURSOR LOGIC
        const cursor = document.getElementById('cursor');
        document.addEventListener('mousemove', (e) => {
            cursor.style.left = e.clientX + 'px';
            cursor.style.top = e.clientY + 'px';

            // Trail creation
            if (Math.random() > (isAwakened ? 0.3 : 0.6)) {
                const trail = document.createElement('div');
                trail.className = 'trail';
                trail.style.left = e.clientX + 'px';
                trail.style.top = e.clientY + 'px';
                // Color based on state (computed style is safest but we can cheat)
                trail.style.background = isAwakened ? '#ffaa00' : '#00f3ff';

                document.body.appendChild(trail);

                gsap.to(trail, {
                    opacity: 0, scale: 0, y: -50, duration: 1,
                    onComplete: () => trail.remove()
                });
            }
        });

        document.querySelectorAll('.hover-trigger').forEach(el => {
            el.addEventListener('mouseenter', () => cursor.classList.add('active'));
            el.addEventListener('mouseleave', () => cursor.classList.remove('active'));
        });

        // THREE.JS SCENE
        const container = document.getElementById('canvas-container');
        const scene = new THREE.Scene();
        scene.fog = new THREE.FogExp2(0x0b001a, 0.002);

        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 50;

        const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        renderer.setClearColor(0x0b001a, 1);
        container.appendChild(renderer.domElement);

        // Assets Generation
        function createTexture(color, type) {
            const canvas = document.createElement('canvas');
            canvas.width = 64; canvas.height = 64;
            const ctx = canvas.getContext('2d');

            if (type === 'leaf') {
                ctx.fillStyle = color;
                ctx.beginPath();
                ctx.moveTo(32, 10); ctx.lineTo(36, 25); ctx.lineTo(48, 20); ctx.lineTo(40, 32);
                ctx.lineTo(54, 40); ctx.lineTo(40, 44); ctx.lineTo(34, 60); ctx.lineTo(30, 60);
                ctx.lineTo(24, 44); ctx.lineTo(10, 40); ctx.lineTo(24, 32); ctx.lineTo(16, 20); ctx.lineTo(28, 25);
                ctx.closePath();
                ctx.fill();
            } else {
                const g = ctx.createRadialGradient(32,32,0, 32,32,32);
                g.addColorStop(0, color);
                g.addColorStop(1, 'transparent');
                ctx.fillStyle = g;
                ctx.fillRect(0,0,64,64);
            }
            return new THREE.CanvasTexture(canvas);
        }

        const leafTexture = createTexture('#ffffff', 'leaf');
        const dustTexture = createTexture('#ffffff', 'dust');

        // PARTICLES FACTORY
        function createSystem(count, texture, size, baseSpeed) {
            const pos = new Float32Array(count * 3);
            const colors = new Float32Array(count * 3);
            const velocities = [];

            // Initial Colors
            const c1 = new THREE.Color(0x00f3ff);
            const c2 = new THREE.Color(0xd400ff);

            for(let i=0; i<count; i++) {
                pos[i*3] = (Math.random()-0.5) * 400;
                pos[i*3+1] = (Math.random()-0.5) * 400;
                pos[i*3+2] = (Math.random()-0.5) * 200;

                velocities.push({
                    y: -(Math.random() * baseSpeed + baseSpeed * 0.5),
                    x: (Math.random() - 0.5) * baseSpeed,
                    z: (Math.random() - 0.5) * baseSpeed
                });

                const mixColor = c1.clone().lerp(c2, Math.random());
                colors[i*3] = mixColor.r;
                colors[i*3+1] = mixColor.g;
                colors[i*3+2] = mixColor.b;
            }

            const geo = new THREE.BufferGeometry();
            geo.setAttribute('position', new THREE.BufferAttribute(pos, 3));
            geo.setAttribute('color', new THREE.BufferAttribute(colors, 3));

            const mat = new THREE.PointsMaterial({
                size: size,
                map: texture,
                vertexColors: true,
                transparent: true,
                opacity: 0.8,
                blending: THREE.AdditiveBlending,
                depthWrite: false
            });

            const points = new THREE.Points(geo, mat);
            points.userData = { velocities: velocities };
            return points;
        }

        const dustSystem = createSystem(1000, dustTexture, 3, 0.1);
        scene.add(dustSystem);

        const leafSystem = createSystem(100, leafTexture, 8, 0.2);
        scene.add(leafSystem);

        // ANIMATION LOOP & COLOR INTERPOLATION
        const clock = new THREE.Clock();

        // Colors
        const voidBg = new THREE.Color(0x0b001a);
        const fireBg = new THREE.Color(0x1a0500);

        const voidP1 = new THREE.Color(0x00f3ff);
        const voidP2 = new THREE.Color(0xd400ff);
        const fireP1 = new THREE.Color(0xffaa00);
        const fireP2 = new THREE.Color(0xff3333);

        function animate() {
            requestAnimationFrame(animate);
            const dt = clock.getDelta();
            const time = clock.getElapsedTime();

            // Smooth Background & Fog Interpolation
            const targetBg = isAwakened ? fireBg : voidBg;
            // 2.5s duration roughly means 0.4 lerp factor at 60fps? No, lerp is frame dependent.
            // Using a smaller lerp factor creates a "trailing" effect.
            // dt * 0.5 makes it take a few seconds to fully settle.
            scene.fog.color.lerp(targetBg, dt * 0.5);
            renderer.setClearColor(scene.fog.color);

            // Update Systems
            [dustSystem, leafSystem].forEach((sys, index) => {
                const positions = sys.geometry.attributes.position.array;
                const cols = sys.geometry.attributes.color.array;
                const vels = sys.userData.velocities;
                const count = vels.length;

                const targetC1 = isAwakened ? fireP1 : voidP1;
                const targetC2 = isAwakened ? fireP2 : voidP2;

                // Speed targets (we can interpolate speed too via a global multiplier)
                // But instantaneous speed change feels more 'energetic'.
                // Let's smooth it slightly.
                const targetSpeed = isAwakened ? (index === 1 ? 4.0 : 3.0) : 1.0;
                // Storing current speed on sys
                if (!sys.userData.currentSpeed) sys.userData.currentSpeed = 1.0;
                sys.userData.currentSpeed += (targetSpeed - sys.userData.currentSpeed) * dt * 0.5;
                const speedMult = sys.userData.currentSpeed;

                for(let i=0; i<count; i++) {
                    positions[i*3+1] += vels[i].y * speedMult;
                    positions[i*3] += Math.sin(time + i) * (index === 1 ? 0.1 : 0.02) * speedMult;

                    if(positions[i*3+1] < -200) {
                        positions[i*3+1] = 200;
                    }

                    // Color interpolation
                    const baseTarget = (i % 2 === 0) ? targetC1 : targetC2;
                    const c = new THREE.Color(cols[i*3], cols[i*3+1], cols[i*3+2]);
                    // Very slow interpolation for particles to create a "wave" of change
                    c.lerp(baseTarget, dt * 0.8);

                    cols[i*3] = c.r;
                    cols[i*3+1] = c.g;
                    cols[i*3+2] = c.b;
                }

                sys.geometry.attributes.position.needsUpdate = true;
                sys.geometry.attributes.color.needsUpdate = true;

                sys.rotation.y = time * (index === 1 ? 0.1 : 0.05) * speedMult;
            });

            scene.fog.density = 0.002 + Math.sin(time) * 0.0005;
            renderer.render(scene, camera);
        }
        animate();

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

    </script>
</body>
</html>
