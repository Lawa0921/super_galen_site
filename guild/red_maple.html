---
layout: none
---
<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RED MAPLE | 靈魂主廚的數位工坊</title>
    <!-- Three.js & GSAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=Orbitron:wght@400;700&family=Zen+Maru+Gothic:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            /* STATE: VOID (Default) */
            --c-bg: #0b001a;
            --c-primary: #00f3ff;
            --c-secondary: #d400ff;
            --c-accent: #333333;
            --c-text: #f0f0f0;
            --c-panel: rgba(10, 10, 20, 0.6);

            --f-title: 'Ma Shan Zheng', cursive;
            --f-tech: 'Orbitron', sans-serif;
            --f-body: 'Zen Maru Gothic', sans-serif;

            --transition-speed: 2.5s;
        }

        /* STATE: AWAKENED */
        body.awakened {
            --c-bg: #1a0500;
            --c-primary: #ffaa00;
            --c-secondary: #ff3333;
            --c-accent: #551a1a;
            --c-text: #fff8e1;
            --c-panel: rgba(30, 10, 5, 0.6);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; cursor: none; }

        body {
            background-color: var(--c-bg);
            color: var(--c-text);
            font-family: var(--f-body);
            overflow-x: hidden;
            transition: background-color var(--transition-speed), color var(--transition-speed);
        }

        /* BOOT SCREEN (Cyber-Taoist Gate) */
        #boot-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 20000;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            color: #00f3ff; font-family: var(--f-tech);
            cursor: auto; overflow: hidden;
        }

        /* Split Gates */
        .gate-panel {
            position: absolute; left: 0; width: 100%; height: 50%;
            background: #000;
            border-bottom: 2px solid var(--c-primary);
            transition: transform 1.5s cubic-bezier(0.7, 0, 0.3, 1);
            z-index: 1;
            display: flex; justify-content: center; align-items: flex-end;
            padding-bottom: 2rem;
            background-image: radial-gradient(circle at 50% 100%, #111 0%, #000 60%);
        }
        .gate-panel.top { top: 0; border-bottom: 1px solid var(--c-primary); }
        .gate-panel.bottom {
            bottom: 0; border-top: 1px solid var(--c-primary); border-bottom: none;
            align-items: flex-start; padding-top: 2rem;
            background-image: radial-gradient(circle at 50% 0%, #111 0%, #000 60%);
        }

        /* Matrix Rain Background (Pseudo-element on panels) */
        .gate-panel::before {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(0deg, rgba(0,243,255,0.05) 1px, transparent 1px);
            background-size: 100% 20px;
            opacity: 0.3; pointer-events: none;
        }

        /* Opening Animation */
        #boot-screen.open .gate-panel.top { transform: translateY(-100%); }
        #boot-screen.open .gate-panel.bottom { transform: translateY(100%); }
        #boot-screen.open { pointer-events: none; }

        /* UI Content (Z-Index above gates) */
        .boot-ui {
            position: relative; z-index: 10;
            display: flex; flex-direction: column; align-items: center;
            transition: opacity 0.5s;
        }
        #boot-screen.open .boot-ui { opacity: 0; }

        .boot-title { font-size: 2rem; letter-spacing: 5px; margin-bottom: 1rem; text-shadow: 0 0 10px var(--c-primary); }
        .boot-loader { width: 200px; height: 2px; background: #333; margin: 2rem 0; position: relative; overflow: hidden; }
        .boot-bar { position: absolute; top: 0; left: 0; height: 100%; width: 0%; background: #00f3ff; animation: load 1.5s ease-in-out forwards; }
        @keyframes load { 100% { width: 100%; } }

        .boot-btn {
            padding: 1rem 3rem; border: 1px solid #00f3ff; color: #00f3ff; background: rgba(0,0,0,0.8);
            font-family: var(--f-tech); font-size: 1.2rem; letter-spacing: 2px; cursor: pointer;
            opacity: 0; transition: 0.3s; pointer-events: none;
            position: relative; overflow: hidden;
        }
        .boot-btn:hover { background: var(--c-primary); color: #000; box-shadow: 0 0 30px var(--c-primary); }
        .boot-btn.ready { opacity: 1; pointer-events: auto; }

        /* CUSTOM CURSOR */
        #cursor {
            position: fixed; top: 0; left: 0; width: 20px; height: 20px;
            border: 2px solid var(--c-primary); border-radius: 50%;
            transform: translate(-50%, -50%); pointer-events: none; z-index: 20001;
            transition: width 0.3s, height 0.3s, border-color var(--transition-speed);
            mix-blend-mode: difference; box-shadow: 0 0 10px var(--c-primary);
        }
        #cursor.active { width: 50px; height: 50px; background-color: rgba(255, 255, 255, 0.1); }
        .trail {
            position: fixed; width: 8px; height: 8px; background: var(--c-primary);
            border-radius: 50%; pointer-events: none; z-index: 9999; opacity: 0.6;
            box-shadow: 0 0 5px var(--c-primary);
        }

        /* THREE.JS SCENE */
        #canvas-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; }

        /* --- LAYOUT ARCHITECTURE --- */
        .layout-wrapper {
            display: flex;
            min-height: 100vh;
            position: relative;
            z-index: 10;
            opacity: 0; transform: translateY(20px);
            transition: opacity 1s, transform 1s;
        }
        .layout-wrapper.visible { opacity: 1; transform: translateY(0); }

        /* LEFT PANE: FIXED IDENTITY */
        .identity-pane {
            width: 40%;
            height: 100vh;
            position: sticky;
            top: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border-right: 1px solid rgba(255,255,255,0.1);
            padding: 2rem;
            backdrop-filter: blur(2px);
        }

        /* RIGHT PANE: SCROLLABLE DATA */
        .content-pane {
            width: 60%;
            padding: 4rem;
            display: flex;
            flex-direction: column;
            gap: 4rem;
        }

        /* --- IDENTITY ELEMENTS --- */
        .brand-vertical {
            position: absolute;
            top: 2rem;
            left: 2rem;
            font-family: var(--f-title);
            font-size: 5rem;
            writing-mode: vertical-rl;
            text-orientation: upright;
            color: var(--c-text);
            text-shadow: 0 0 20px var(--c-secondary);
            letter-spacing: 0.5rem;
            pointer-events: none;
            transition: color var(--transition-speed), text-shadow var(--transition-speed);
        }

        .nav-hud {
            position: absolute; top: 2rem; right: 2rem;
            display: flex; flex-direction: column; align-items: flex-end; gap: 0.5rem;
        }
        .nav-link {
            font-family: var(--f-tech);
            color: var(--c-text);
            text-decoration: none;
            font-size: 0.8rem;
            opacity: 0.6;
            transition: 0.3s;
        }
        .nav-link:hover { opacity: 1; color: var(--c-primary); }

        .avatar-container {
            position: relative;
            width: 300px; height: 300px;
            cursor: pointer;
        }
        /* Eye Mask & Tracking */
        .avatar-mask {
            width: 100%; height: 100%;
            clip-path: circle(42% at 50% 50%); /* Reduced from 48% to tighten mask */
            position: relative; z-index: 5;
            overflow: hidden;
            border: 2px solid var(--c-primary); border-radius: 50%;
            transition: border-color var(--transition-speed), box-shadow 0.3s;
        }
        .avatar-container:hover .avatar-mask { box-shadow: 0 0 30px var(--c-primary); }
        body.awakened .avatar-container:hover .avatar-mask { box-shadow: 0 0 30px var(--c-secondary); }

        /* Avatar Image (Aggressively Scaled) */
        .avatar-img {
            width: 100%; height: 100%; object-fit: cover;
            will-change: transform;
            transform: scale(1.6); /* Increased from 1.4 */
        }

        /* Eyelids (Curved & Colored) */
        .eyelid {
            position: absolute; top: 0; left: 0; width: 100%; height: 50%;
            /* More distinct eyelid color */
            background: linear-gradient(to bottom, #1a0b2e 0%, #2a0033 90%, var(--c-primary) 100%);
            z-index: 10;
            transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            transform: translateY(15%); /* Default Half-Closed */
            pointer-events: none;
            border-bottom: 1px solid var(--c-primary);
            border-radius: 0 0 50% 50% / 0 0 20px 20px;
            box-shadow: 0 5px 10px rgba(0,0,0,0.5); /* Depth shadow */
        }
        .eyelid.bottom {
            top: auto; bottom: 0;
            transform-origin: bottom;
            background: linear-gradient(to top, #1a0b2e 0%, #2a0033 90%, var(--c-primary) 100%);
            border-bottom: none; border-top: 1px solid var(--c-primary);
            border-radius: 50% 50% 0 0 / 20px 20px 0 0;
            transform: translateY(-15%);
            box-shadow: 0 -5px 10px rgba(0,0,0,0.5);
        }

        /* Awakened State: Open */
        body.awakened .eyelid.top { transform: translateY(-100%); }
        body.awakened .eyelid.bottom { transform: translateY(100%); }

        /* Drowsy Blink (Translate instead of ScaleY) */
        @keyframes blink-drowsy-top {
            0%, 100% { transform: translateY(15%); } 40%, 60% { transform: translateY(50%); }
        }
        @keyframes blink-drowsy-bot {
            0%, 100% { transform: translateY(-15%); } 40%, 60% { transform: translateY(-50%); }
        }

        /* Alert Blink */
        @keyframes blink-alert-top {
            0%, 100% { transform: translateY(-100%); } 50% { transform: translateY(0%); }
        }
        @keyframes blink-alert-bot {
            0%, 100% { transform: translateY(100%); } 50% { transform: translateY(0%); }
        }

        .eyelid.top.blinking-drowsy { animation: blink-drowsy-top 2.5s ease-in-out; }
        .eyelid.bottom.blinking-drowsy { animation: blink-drowsy-bot 2.5s ease-in-out; }

        .eyelid.top.blinking-alert { animation: blink-alert-top 0.15s linear; }
        .eyelid.bottom.blinking-alert { animation: blink-alert-bot 0.15s linear; }

        /* Removed unused scaleY animations */

        /* Rune Ring */
        .rune-ring {
            position: absolute; top: -10%; left: -10%; width: 120%; height: 120%;
            border: 1px dashed var(--c-primary); border-radius: 50%;
            animation: rotate 20s linear infinite; z-index: 1;
            transition: border-color var(--transition-speed), transform 0.5s;
        }
        .avatar-container:hover .rune-ring { transform: scale(1.1); animation-duration: 2s; border-color: #fff; }

        .status-hud {
            margin-top: 2rem;
            text-align: center;
        }
        .role-text {
            font-family: var(--f-tech);
            color: var(--c-primary);
            font-size: 1.2rem;
            letter-spacing: 2px;
            margin-bottom: 0.5rem;
            transition: color var(--transition-speed);
        }
        .state-text {
            font-family: var(--f-tech);
            font-size: 0.8rem;
            color: #888;
        }
        .hint-text {
            font-family: var(--f-tech); font-size: 0.7rem; color: var(--c-primary);
            margin-top: 1rem; opacity: 0.6; animation: pulse 2s infinite;
        }
        @keyframes rotate { 100% { transform: rotate(360deg); } }
        @keyframes pulse { 50% { opacity: 1; } }


        /* --- CONTENT CARDS --- */
        .data-card {
            background: var(--c-panel);
            border: 1px solid rgba(255,255,255,0.1);
            padding: 2rem;
            position: relative;
            backdrop-filter: blur(10px);
            transition: border-color var(--transition-speed), transform 0.3s;
            overflow: hidden;
        }
        .data-card:hover {
            border-color: var(--c-primary);
            transform: translateY(-5px);
        }

        /* Tech Corners */
        .data-card::before, .data-card::after {
            content: ''; position: absolute; width: 10px; height: 10px;
            border: 2px solid var(--c-primary); transition: border-color var(--transition-speed);
        }
        .data-card::before { top: 0; left: 0; border-right: none; border-bottom: none; }
        .data-card::after { bottom: 0; right: 0; border-left: none; border-top: none; }

        .card-header {
            display: flex; align-items: center; justify-content: space-between;
            margin-bottom: 1.5rem; border-bottom: 1px solid rgba(255,255,255,0.1);
            padding-bottom: 1rem;
        }
        .card-title {
            font-family: var(--f-tech); font-size: 1.2rem; color: var(--c-primary);
            display: flex; align-items: center; gap: 0.5rem;
        }
        .card-id { font-family: var(--f-tech); font-size: 0.7rem; color: #666; }

        .card-body p { line-height: 1.8; color: #ccc; margin-bottom: 1rem; font-size: 0.95rem; }
        .highlight { color: var(--c-primary); font-weight: bold; }

        /* Skill Tree */
        .skill-tree {
            display: flex; justify-content: space-between; align-items: center;
            margin-top: 1rem; position: relative; padding: 0 2rem;
        }
        .tree-line {
            position: absolute; top: 50%; left: 0; width: 100%; height: 1px;
            background: var(--c-primary); opacity: 0.3; z-index: 0;
        }
        .skill-node {
            position: relative; z-index: 2;
            display: flex; flex-direction: column; align-items: center; gap: 0.5rem;
        }
        .node-hex {
            width: 50px; height: 50px;
            background: rgba(0,0,0,0.8);
            border: 1px solid var(--c-primary);
            clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
            display: flex; justify-content: center; align-items: center;
            color: var(--c-primary); transition: 0.3s;
        }
        .skill-node:hover .node-hex { background: var(--c-primary); color: #000; box-shadow: 0 0 15px var(--c-primary); }
        .node-label { font-family: var(--f-tech); font-size: 0.7rem; color: #aaa; }

        /* Menu List */
        .menu-list { display: grid; gap: 1rem; }
        .menu-item {
            display: flex; justify-content: space-between; align-items: center;
            padding: 0.8rem; border: 1px dashed rgba(255,255,255,0.1);
            transition: 0.3s;
        }
        .menu-item:hover { background: rgba(255,255,255,0.05); border-color: var(--c-primary); }
        .menu-name { font-weight: bold; color: var(--c-text); }
        .menu-desc { font-size: 0.8rem; color: #999; }

        /* FOOTER */
        .sys-footer {
            margin-top: 4rem; padding-top: 2rem;
            border-top: 1px solid rgba(255,255,255,0.1);
            display: flex; justify-content: space-between; align-items: center;
            font-family: var(--f-tech); font-size: 0.8rem; color: #666;
        }
        .socials { display: flex; gap: 1rem; }
        .social-link { color: #666; font-size: 1.2rem; transition: 0.3s; }
        .social-link:hover { color: var(--c-primary); transform: translateY(-3px); }

        /* RESPONSIVE */
        @media (max-width: 900px) {
            .layout-wrapper { flex-direction: column; }
            .identity-pane {
                width: 100%; height: auto; position: relative;
                padding: 4rem 2rem; border-right: none; border-bottom: 1px solid rgba(255,255,255,0.1);
            }
            .content-pane { width: 100%; padding: 2rem; }
            .brand-vertical {
                position: relative; writing-mode: horizontal-tb;
                font-size: 3rem; margin-bottom: 2rem; top: auto; left: auto;
            }
            .nav-hud { top: 1rem; right: 1rem; }
            .avatar-container { width: 200px; height: 200px; }
        }
    </style>
</head>
<body class="">

    <!-- BOOT SCREEN -->
    <div id="boot-screen">
        <div class="gate-panel top"></div>
        <div class="gate-panel bottom"></div>
        <div class="boot-ui">
            <div class="boot-title">NEURAL GATE</div>
            <div class="boot-loader"><div class="boot-bar"></div></div>
            <button class="boot-btn hover-trigger" id="enter-btn">ESTABLISH LINK</button>
        </div>
    </div>

    <!-- THREE.JS CANVAS -->
    <div id="canvas-container"></div>

    <!-- CUSTOM CURSOR -->
    <div id="cursor"></div>

    <!-- MAIN SPLIT LAYOUT -->
    <div class="layout-wrapper" id="main-content">

        <!-- LEFT: IDENTITY (Fixed) -->
        <aside class="identity-pane">
            <h1 class="brand-vertical">紅葉</h1>

            <nav class="nav-hud">
                <a href="index.html" class="nav-link hover-trigger">◀ GUILD HALL</a>
                <span class="nav-link">ID: RED_MAPLE</span>
            </nav>

            <div class="avatar-container hover-trigger" id="avatar-btn">
                <div class="rune-ring"></div>
                <div class="avatar-mask">
                    <img src="../assets/img/guild/red_maple/avatar.webp" alt="The Eye" class="avatar-img">
                    <div class="eyelid top"></div>
                    <div class="eyelid bottom"></div>
                </div>
            </div>

            <div class="status-hud">
                <div class="role-text" id="role-text">DIGITAL ASCETIC</div>
                <div class="state-text" id="status-text">Status: MEDITATING</div>
                <div class="hint-text" id="eye-hint">CLICK EYE TO AWAKEN</div>
            </div>
        </aside>

        <!-- RIGHT: CONTENT STREAM (Scrollable) -->
        <main class="content-pane">

            <!-- Bio Card -->
            <div class="data-card hover-trigger">
                <div class="card-header">
                    <div class="card-title"><i class="fas fa-user-astronaut"></i> PROFILE_DATA</div>
                    <div class="card-id">#001</div>
                </div>
                <div class="card-body">
                    <p>曾經以烈火烹調食材，在凡世的廚房修煉靈魂。如今將這份熱情轉移至代碼的虛空。</p>
                    <p>我是一個<span class="highlight">「怪人」</span>，既隨和如水，又像幽靈般難以捉摸。</p>
                    <p>"Cooking code with the same passion as a 5-star dish."</p>
                </div>
            </div>

            <!-- Loadout Card -->
            <div class="data-card hover-trigger">
                <div class="card-header">
                    <div class="card-title"><i class="fas fa-toolbox"></i> EQUIPMENT_LOADOUT</div>
                    <div class="card-id">#002</div>
                </div>
                <div class="card-body">
                    <div class="menu-list">
                        <div class="menu-item">
                            <span class="menu-name"><i class="fas fa-fire"></i> KITCHEN</span>
                            <span class="menu-desc">Fire Control, Knife Skills, Plating</span>
                        </div>
                        <div class="menu-item">
                            <span class="menu-name"><i class="fas fa-code"></i> CODE</span>
                            <span class="menu-desc">Python, GDScript (Godot), JavaScript</span>
                        </div>
                        <div class="menu-item">
                            <span class="menu-name"><i class="fas fa-microchip"></i> HARDWARE</span>
                            <span class="menu-desc">ESP32, Soldering Iron, 3D Printing</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Philosophy Card -->
            <div class="data-card hover-trigger">
                <div class="card-header">
                    <div class="card-title"><i class="fas fa-yin-yang"></i> CORE_PHILOSOPHY</div>
                    <div class="card-id">#003</div>
                </div>
                <div class="card-body" style="text-align: center; font-style: italic; color: var(--c-primary);">
                    <p>"Cooking code with the same passion as a 5-star dish."</p>
                    <p style="font-size: 0.8rem; color: #888; margin-top: 1rem;">
                        Heat control in cooking is like memory management in C++.<br>
                        Too much fire burns the soul; too little leaves it raw.
                    </p>
                </div>
            </div>

            <!-- Menu Card (Collapsed) -->
            <div class="data-card hover-trigger">
                <div class="card-header">
                    <div class="card-title"><i class="fas fa-utensils"></i> SERVICES_MENU</div>
                    <div class="card-id">#004</div>
                </div>
                <div class="card-body">
                    <div class="menu-list">
                        <div class="menu-item">
                            <span class="menu-name">靈魂休憩</span>
                            <span class="menu-desc">無壓力的傾聽與對話</span>
                        </div>
                        <div class="menu-item">
                            <span class="menu-name">機巧共鳴</span>
                            <span class="menu-desc">Godot / Robotics / Welding</span>
                        </div>
                        <div class="menu-item">
                            <span class="menu-name">幽靈協作</span>
                            <span class="menu-desc">Reliable Shadow Support</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Skill Tree Card -->
            <div class="data-card hover-trigger">
                <div class="card-header">
                    <div class="card-title"><i class="fas fa-network-wired"></i> BLUEPRINT_TREE</div>
                    <div class="card-id">#003</div>
                </div>
                <div class="card-body">
                    <p>夢想建立一個遊戲人群統合協作的工會，或是單純地幫助他人變得更好。</p>
                    <div class="skill-tree">
                        <div class="tree-line"></div>
                        <div class="skill-node">
                            <div class="node-hex"><i class="fas fa-cube"></i></div>
                            <div class="node-label">GODOT</div>
                        </div>
                        <div class="skill-node">
                            <div class="node-hex"><i class="fas fa-microchip"></i></div>
                            <div class="node-label">AUTO</div>
                        </div>
                        <div class="skill-node">
                            <div class="node-hex"><i class="fas fa-users"></i></div>
                            <div class="node-label">GUILD</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Footer -->
            <footer class="sys-footer">
                <div class="copyright">RENDERED BY SUPERGALEN'S GUILD</div>
                <div class="socials">
                    <a href="https://www.threads.com/@red_mapl_e" target="_blank" class="social-link hover-trigger"><i class="fa-solid fa-at"></i></a>
                    <a href="https://www.instagram.com/red_mapl_e/" target="_blank" class="social-link hover-trigger"><i class="fab fa-instagram"></i></a>
                </div>
            </footer>
        </main>
    </div>

    <script>
        // --- BOOT LOGIC ---
        const enterBtn = document.getElementById('enter-btn');
        const bootScreen = document.getElementById('boot-screen');
        setTimeout(() => enterBtn.classList.add('ready'), 1000);

        enterBtn.addEventListener('click', () => {
            // Trigger Gate Opening
            bootScreen.classList.add('open');

            // Show content
            setTimeout(() => {
                document.getElementById('main-content').classList.add('visible');
            }, 500); // Wait for gates to start opening
        });

        // --- STATE & INTERACTION ---
        let isAwakened = false;
        const body = document.body;
        const avatarWrapper = document.getElementById('avatar-btn');
        const avatarImg = document.querySelector('.avatar-img');
        const roleText = document.getElementById('role-text');
        const statusText = document.getElementById('status-text');
        const eyeHint = document.getElementById('eye-hint');
        const eyelids = document.querySelectorAll('.eyelid');

        // Global Tracking
        document.addEventListener('mousemove', (e) => {
            // Standard tracking relative to viewport/avatar center
            // Need to re-calculate rect on move because layout might scroll (though avatar is sticky)
            const rect = avatarWrapper.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;

            const dx = e.clientX - centerX;
            const dy = e.clientY - centerY;

            const maxOffset = 30;
            const angle = Math.atan2(dy, dx);
            const dist = Math.min(Math.sqrt(dx*dx + dy*dy), 800);
            const intensity = Math.min(dist / 800, 1.0);

            const moveX = Math.cos(angle) * maxOffset * intensity;
            const moveY = Math.sin(angle) * maxOffset * intensity;

            gsap.to(avatarImg, {
                x: moveX, y: moveY, duration: 0.2, ease: "power2.out"
            });
        });

        // Blinking System
        let blinkTimer;
        function triggerBlink() {
            const className = isAwakened ? 'blinking-alert' : 'blinking-drowsy';
            const duration = isAwakened ? 200 : 2500;
            eyelids.forEach(el => el.classList.add(className));
            setTimeout(() => {
                eyelids.forEach(el => el.classList.remove(className));
                scheduleNextBlink();
            }, duration);
        }
        function scheduleNextBlink() {
            const delay = isAwakened ? Math.random() * 3000 + 2000 : Math.random() * 4000 + 3000;
            clearTimeout(blinkTimer);
            blinkTimer = setTimeout(triggerBlink, delay);
        }
        scheduleNextBlink();

        // Toggle State
        avatarWrapper.addEventListener('click', () => {
            isAwakened = !isAwakened;
            eyelids.forEach(el => { el.classList.remove('blinking-drowsy'); el.classList.remove('blinking-alert'); });
            clearTimeout(blinkTimer);

            if (isAwakened) {
                body.classList.add('awakened');
                roleText.innerText = "SOUL CHEF // 靈魂主廚";
                statusText.innerText = "State: IGNITED";
                eyeHint.innerText = "CLICK EYE TO MEDITATE";
                roleText.style.borderColor = "#ffaa00";
                roleText.style.color = "#ffaa00";
            } else {
                body.classList.remove('awakened');
                roleText.innerText = "DIGITAL ASCETIC";
                statusText.innerText = "State: MEDITATING";
                eyeHint.innerText = "CLICK EYE TO AWAKEN";
                roleText.style.borderColor = "#00f3ff";
                roleText.style.color = "#00f3ff";
            }
            scheduleNextBlink();
        });

        // --- CURSOR ---
        const cursor = document.getElementById('cursor');
        document.addEventListener('mousemove', (e) => {
            cursor.style.left = e.clientX + 'px';
            cursor.style.top = e.clientY + 'px';
            if (Math.random() > (isAwakened ? 0.3 : 0.6)) {
                const trail = document.createElement('div');
                trail.className = 'trail';
                trail.style.left = e.clientX + 'px';
                trail.style.top = e.clientY + 'px';
                trail.style.background = isAwakened ? '#ffaa00' : '#00f3ff';
                document.body.appendChild(trail);
                gsap.to(trail, { opacity: 0, scale: 0, y: -50, duration: 1, onComplete: () => trail.remove() });
            }
        });
        document.querySelectorAll('.hover-trigger').forEach(el => {
            el.addEventListener('mouseenter', () => cursor.classList.add('active'));
            el.addEventListener('mouseleave', () => cursor.classList.remove('active'));
        });

        // --- THREE.JS ---
        const container = document.getElementById('canvas-container');
        const scene = new THREE.Scene();
        scene.fog = new THREE.FogExp2(0x0b001a, 0.002);
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 50;
        const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        renderer.setClearColor(0x0b001a, 1);
        container.appendChild(renderer.domElement);

        function createTexture(color, type) {
            const canvas = document.createElement('canvas'); canvas.width = 64; canvas.height = 64;
            const ctx = canvas.getContext('2d');
            if (type === 'leaf') {
                ctx.fillStyle = color; ctx.beginPath();
                ctx.moveTo(32, 10); ctx.lineTo(36, 25); ctx.lineTo(48, 20); ctx.lineTo(40, 32);
                ctx.lineTo(54, 40); ctx.lineTo(40, 44); ctx.lineTo(34, 60); ctx.lineTo(30, 60);
                ctx.lineTo(24, 44); ctx.lineTo(10, 40); ctx.lineTo(24, 32); ctx.lineTo(16, 20); ctx.lineTo(28, 25);
                ctx.closePath(); ctx.fill();
            } else {
                const g = ctx.createRadialGradient(32,32,0, 32,32,32);
                g.addColorStop(0, color); g.addColorStop(1, 'transparent');
                ctx.fillStyle = g; ctx.fillRect(0,0,64,64);
            }
            return new THREE.CanvasTexture(canvas);
        }
        const leafTexture = createTexture('#ffffff', 'leaf');
        const dustTexture = createTexture('#ffffff', 'dust');

        function createSystem(count, texture, size, baseSpeed) {
            const pos = new Float32Array(count * 3);
            const colors = new Float32Array(count * 3);
            const velocities = [];
            const c1 = new THREE.Color(0x00f3ff);
            const c2 = new THREE.Color(0xd400ff);
            for(let i=0; i<count; i++) {
                pos[i*3] = (Math.random()-0.5) * 400;
                pos[i*3+1] = (Math.random()-0.5) * 400;
                pos[i*3+2] = (Math.random()-0.5) * 200;
                velocities.push({ y: -(Math.random() * baseSpeed + baseSpeed * 0.5) });
                const mixColor = c1.clone().lerp(c2, Math.random());
                colors[i*3] = mixColor.r; colors[i*3+1] = mixColor.g; colors[i*3+2] = mixColor.b;
            }
            const geo = new THREE.BufferGeometry();
            geo.setAttribute('position', new THREE.BufferAttribute(pos, 3));
            geo.setAttribute('color', new THREE.BufferAttribute(colors, 3));
            const mat = new THREE.PointsMaterial({ size: size, map: texture, vertexColors: true, transparent: true, opacity: 0.8, blending: THREE.AdditiveBlending, depthWrite: false });
            const points = new THREE.Points(geo, mat);
            points.userData = { velocities: velocities, currentSpeed: 1.0 };
            return points;
        }
        const dustSystem = createSystem(1000, dustTexture, 3, 0.1); scene.add(dustSystem);
        const leafSystem = createSystem(100, leafTexture, 8, 0.2); scene.add(leafSystem);

        const clock = new THREE.Clock();
        const fireP1 = new THREE.Color(0xffaa00); const fireP2 = new THREE.Color(0xff3333);
        const voidP1 = new THREE.Color(0x00f3ff); const voidP2 = new THREE.Color(0xd400ff);
        const fireBg = new THREE.Color(0x1a0500); const voidBg = new THREE.Color(0x0b001a);

        function animate() {
            requestAnimationFrame(animate);
            const dt = clock.getDelta();
            const time = clock.getElapsedTime();

            const targetBg = isAwakened ? fireBg : voidBg;
            scene.fog.color.lerp(targetBg, dt * 0.5);
            renderer.setClearColor(scene.fog.color);

            [dustSystem, leafSystem].forEach((sys, index) => {
                const positions = sys.geometry.attributes.position.array;
                const cols = sys.geometry.attributes.color.array;
                const vels = sys.userData.velocities;
                const targetC1 = isAwakened ? fireP1 : voidP1;
                const targetC2 = isAwakened ? fireP2 : voidP2;
                const targetSpeed = isAwakened ? (index === 1 ? 4.0 : 3.0) : 1.0;
                sys.userData.currentSpeed += (targetSpeed - sys.userData.currentSpeed) * dt * 0.5;

                for(let i=0; i<vels.length; i++) {
                    positions[i*3+1] += vels[i].y * sys.userData.currentSpeed;
                    positions[i*3] += Math.sin(time + i) * (index === 1 ? 0.1 : 0.02) * sys.userData.currentSpeed;
                    if(positions[i*3+1] < -200) positions[i*3+1] = 200;

                    const baseTarget = (i % 2 === 0) ? targetC1 : targetC2;
                    const c = new THREE.Color(cols[i*3], cols[i*3+1], cols[i*3+2]);
                    c.lerp(baseTarget, dt * 0.8);
                    cols[i*3] = c.r; cols[i*3+1] = c.g; cols[i*3+2] = c.b;
                }
                sys.geometry.attributes.position.needsUpdate = true;
                sys.geometry.attributes.color.needsUpdate = true;
                sys.rotation.y = time * (index === 1 ? 0.1 : 0.05) * sys.userData.currentSpeed;
            });
            renderer.render(scene, camera);
        }
        animate();
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>
