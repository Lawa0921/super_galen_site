<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jing | 職涯鍊金術師</title>
    <!-- Preconnect to Google Fonts for faster loading -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Uncial+Antiqua&family=Noto+Serif+TC:wght@400;600;700&family=Cinzel+Decorative:wght@400;700&family=IM+Fell+English+SC&display=swap" rel="stylesheet">
    <!-- Font Awesome - load async to avoid render blocking -->
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"></noscript>

    <style>
        :root {
            /* Alchemist's Study Palette */
            --bg-dark-wood: #1a120b;
            --parchment: #f4e4c1;
            --parchment-dark: #d4c4a1;
            --ink: #1a1a1a;
            --gold: #d4a857;
            --gold-bright: #f5d485;
            --gold-dark: #8b7129;
            --crimson: #8b2d2d;
            --crimson-light: #c45050;
            --magic-purple: #6b4c9a;
            --magic-glow: #a78bfa;
            --candle-warm: #ff9d4d;
            --candle-glow: rgba(255, 157, 77, 0.3);

            --font-body: 'Noto Serif TC', 'Georgia', serif;
            --font-display: 'Cinzel Decorative', 'IM Fell English SC', serif;
            --font-ancient: 'Uncial Antiqua', cursive;
            --font-calligraphy: 'Noto Serif TC', serif;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            background: var(--bg-dark-wood);
            color: var(--parchment);
            font-family: var(--font-body);
            overflow-x: hidden;
            min-height: 100vh;
            position: relative;
        }

        /* ===== AMBIENT BACKGROUND ===== */
        .ambient-bg {
            position: fixed;
            inset: 0;
            z-index: 0;
            pointer-events: none;
        }

        /* Wood Panel Texture - Darker Study Room */
        .wood-texture {
            position: absolute;
            inset: 0;
            background:
                /* Deep shadow overlay */
                linear-gradient(180deg,
                    rgba(10, 6, 3, 0.98) 0%,
                    rgba(20, 12, 8, 0.95) 30%,
                    rgba(30, 20, 12, 0.92) 50%,
                    rgba(20, 12, 8, 0.95) 70%,
                    rgba(10, 6, 3, 0.98) 100%),
                /* Vertical wood grain */
                repeating-linear-gradient(
                    90deg,
                    transparent 0px,
                    rgba(40, 25, 15, 0.4) 1px,
                    transparent 2px,
                    transparent 30px
                ),
                /* Horizontal wood grain */
                repeating-linear-gradient(
                    0deg,
                    transparent 0px,
                    rgba(0, 0, 0, 0.15) 1px,
                    transparent 2px,
                    transparent 6px
                ),
                /* Wood knots */
                radial-gradient(ellipse 20px 30px at 15% 25%, rgba(15, 8, 4, 0.6) 0%, transparent 70%),
                radial-gradient(ellipse 25px 20px at 85% 60%, rgba(15, 8, 4, 0.5) 0%, transparent 70%),
                radial-gradient(ellipse 15px 25px at 40% 80%, rgba(15, 8, 4, 0.4) 0%, transparent 70%);
            background-color: #0d0805;
        }

        /* Heavy Vignette & Candlelight - Much Darker Corners */
        .candle-vignette {
            position: absolute;
            inset: 0;
            background:
                /* Central warm candlelight glow */
                radial-gradient(ellipse 50% 40% at 50% 25%,
                    rgba(255, 140, 50, 0.15) 0%,
                    rgba(255, 120, 40, 0.08) 30%,
                    transparent 60%),
                /* Secondary lower glow */
                radial-gradient(ellipse 60% 50% at 50% 60%,
                    rgba(255, 100, 30, 0.08) 0%,
                    transparent 50%),
                /* Heavy dark vignette */
                radial-gradient(ellipse 70% 70% at 50% 50%,
                    transparent 20%,
                    rgba(0, 0, 0, 0.5) 50%,
                    rgba(0, 0, 0, 0.85) 80%,
                    rgba(0, 0, 0, 0.95) 100%);
            animation: candleFlicker 4s ease-in-out infinite;
        }

        @keyframes candleFlicker {
            0%, 100% { opacity: 1; }
            25% { opacity: 0.95; }
            50% { opacity: 0.98; }
            75% { opacity: 0.92; }
        }

        /* Floating Dust Particles */
        .dust-layer {
            position: absolute;
            inset: 0;
            background-image:
                radial-gradient(1px 1px at 10% 20%, rgba(255, 200, 100, 0.4), transparent),
                radial-gradient(1px 1px at 30% 50%, rgba(255, 200, 100, 0.3), transparent),
                radial-gradient(1.5px 1.5px at 50% 10%, rgba(255, 200, 100, 0.5), transparent),
                radial-gradient(1px 1px at 70% 80%, rgba(255, 200, 100, 0.4), transparent),
                radial-gradient(1px 1px at 90% 40%, rgba(255, 200, 100, 0.3), transparent),
                radial-gradient(1.5px 1.5px at 20% 70%, rgba(255, 200, 100, 0.5), transparent),
                radial-gradient(1px 1px at 80% 25%, rgba(255, 200, 100, 0.4), transparent);
            animation: dustFloat 20s linear infinite;
        }

        @keyframes dustFloat {
            0% { transform: translateY(0) translateX(0); }
            50% { transform: translateY(-30px) translateX(10px); }
            100% { transform: translateY(0) translateX(0); }
        }

        /* Bookshelf Side Frames */
        .bookshelf-frame {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 60px;
            background:
                /* Wood grain */
                repeating-linear-gradient(
                    180deg,
                    transparent 0px,
                    rgba(20, 12, 6, 0.8) 2px,
                    transparent 4px,
                    transparent 20px
                ),
                /* Base wood color */
                linear-gradient(90deg,
                    rgba(25, 15, 8, 0.95) 0%,
                    rgba(40, 25, 15, 0.9) 50%,
                    rgba(25, 15, 8, 0.95) 100%);
            box-shadow:
                inset 0 0 30px rgba(0, 0, 0, 0.8),
                inset -5px 0 15px rgba(0, 0, 0, 0.5);
        }

        .bookshelf-frame.left {
            left: 0;
            border-right: 3px solid rgba(80, 50, 25, 0.6);
        }

        .bookshelf-frame.right {
            right: 0;
            border-left: 3px solid rgba(80, 50, 25, 0.6);
            box-shadow:
                inset 0 0 30px rgba(0, 0, 0, 0.8),
                inset 5px 0 15px rgba(0, 0, 0, 0.5);
        }

        /* Candle Light Sources */
        .candle-light {
            position: absolute;
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: radial-gradient(circle,
                rgba(255, 150, 50, 0.25) 0%,
                rgba(255, 120, 30, 0.15) 30%,
                rgba(255, 100, 20, 0.05) 60%,
                transparent 80%);
            animation: candlePulse 3s ease-in-out infinite;
        }

        .candle-light.top-left {
            top: 80px;
            left: 80px;
            animation-delay: 0s;
        }

        .candle-light.top-right {
            top: 80px;
            right: 80px;
            animation-delay: 1.5s;
        }

        @keyframes candlePulse {
            0%, 100% {
                opacity: 0.8;
                transform: scale(1);
            }
            50% {
                opacity: 1;
                transform: scale(1.1);
            }
        }

        /* ===== MAGIC CANVAS ===== */
        #magic-canvas {
            position: fixed;
            inset: 0;
            z-index: 1;
            pointer-events: none;
        }

        /* ===== NAVIGATION ===== */
        .nav-back {
            position: fixed;
            top: 30px;
            left: 30px;
            z-index: 1000;
        }

        .nav-btn {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 24px;
            background: linear-gradient(135deg, rgba(44, 30, 20, 0.95), rgba(61, 41, 20, 0.9));
            border: 2px solid var(--gold);
            border-radius: 4px;
            color: var(--gold);
            text-decoration: none;
            font-family: var(--font-display);
            font-size: 1rem;
            letter-spacing: 2px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow:
                0 4px 15px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }

        .nav-btn:hover {
            background: var(--gold);
            color: var(--bg-dark-wood);
            box-shadow:
                0 0 30px rgba(212, 168, 87, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        /* ===== ENTRY GATE ===== */
        .entry-gate {
            position: fixed;
            inset: 0;
            z-index: 10000;
            background: radial-gradient(ellipse at center, #1a0f08 0%, #0a0604 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            transition: opacity 1.5s ease, visibility 1.5s ease;
        }

        .entry-gate.hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }

        .gate-alchemy-circle {
            width: 300px;
            height: 300px;
            position: relative;
            margin-bottom: 40px;
        }

        .gate-alchemy-circle svg {
            width: 100%;
            height: 100%;
            animation: alchemyRotate 30s linear infinite;
        }

        .gate-alchemy-circle .inner-ring {
            animation: alchemyRotateReverse 20s linear infinite;
            transform-origin: center;
        }

        @keyframes alchemyRotate {
            to { transform: rotate(360deg); }
        }

        @keyframes alchemyRotateReverse {
            to { transform: rotate(-360deg); }
        }

        .gate-symbol {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 4rem;
            color: var(--gold);
            text-shadow: 0 0 30px var(--gold), 0 0 60px var(--candle-warm);
            animation: symbolPulse 2s ease-in-out infinite;
        }

        @keyframes symbolPulse {
            0%, 100% { opacity: 0.7; transform: translate(-50%, -50%) scale(1); }
            50% { opacity: 1; transform: translate(-50%, -50%) scale(1.1); }
        }

        .gate-title {
            font-family: var(--font-display);
            font-size: 1.8rem;
            color: var(--gold);
            letter-spacing: 8px;
            margin-bottom: 10px;
            text-shadow: 0 2px 20px rgba(212, 168, 87, 0.5);
        }

        .gate-subtitle {
            font-family: var(--font-body);
            font-size: 1rem;
            color: var(--parchment-dark);
            letter-spacing: 4px;
            margin-bottom: 50px;
            opacity: 0.8;
        }

        .gate-enter-btn {
            padding: 18px 50px;
            background: transparent;
            border: 2px solid var(--gold);
            color: var(--gold);
            font-family: var(--font-display);
            font-size: 1.1rem;
            letter-spacing: 4px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: all 0.5s ease;
        }

        .gate-enter-btn::before {
            content: '';
            position: absolute;
            inset: 0;
            background: var(--gold);
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.5s ease;
            z-index: -1;
        }

        .gate-enter-btn:hover {
            color: var(--bg-dark-wood);
        }

        .gate-enter-btn:hover::before {
            transform: scaleX(1);
        }

        /* ===== MAIN CONTAINER ===== */
        .main-container {
            position: relative;
            z-index: 10;
            max-width: 1400px;
            margin: 0 auto;
            padding: 120px 40px 100px;
            opacity: 0;
            transition: opacity 1s ease 0.5s;
        }

        .main-container.visible {
            opacity: 1;
        }

        /* ===== HERO SECTION ===== */
        .hero-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            margin-bottom: 150px;
            position: relative;
        }

        /* Alchemy Circle Behind Avatar */
        .alchemy-circle-bg {
            position: absolute;
            width: 500px;
            height: 500px;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -60%);
            opacity: 0.15;
            pointer-events: none;
        }

        .alchemy-circle-bg svg {
            width: 100%;
            height: 100%;
        }

        .alchemy-ring-outer {
            animation: alchemyRotate 60s linear infinite;
            transform-origin: center;
        }

        .alchemy-ring-middle {
            animation: alchemyRotateReverse 40s linear infinite;
            transform-origin: center;
        }

        .alchemy-ring-inner {
            animation: alchemyRotate 25s linear infinite;
            transform-origin: center;
        }

        /* Avatar */
        .avatar-container {
            position: relative;
            margin-bottom: 40px;
            z-index: 2;
        }

        .avatar-glow {
            position: absolute;
            inset: -30px;
            background: radial-gradient(circle, var(--candle-glow) 0%, transparent 70%);
            border-radius: 50%;
            animation: avatarGlow 3s ease-in-out infinite;
        }

        @keyframes avatarGlow {
            0%, 100% { opacity: 0.6; transform: scale(1); }
            50% { opacity: 0.9; transform: scale(1.05); }
        }

        .avatar-frame {
            width: 220px;
            height: 220px;
            position: relative;
            border-radius: 50%;
            padding: 6px;
            background: linear-gradient(135deg, var(--gold), var(--gold-dark), var(--gold));
            box-shadow:
                0 0 40px rgba(212, 168, 87, 0.4),
                inset 0 0 20px rgba(0, 0, 0, 0.3);
        }

        .avatar-frame::before {
            content: '';
            position: absolute;
            inset: -8px;
            border: 2px solid var(--gold);
            border-radius: 50%;
            opacity: 0.5;
        }

        .avatar-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
            border: 3px solid var(--bg-dark-wood);
        }

        /* Name & Title */
        .hero-name {
            font-family: var(--font-display);
            font-size: 4.5rem;
            color: var(--gold);
            letter-spacing: 12px;
            margin-bottom: 15px;
            text-shadow:
                0 2px 4px rgba(0, 0, 0, 0.5),
                0 0 40px rgba(212, 168, 87, 0.3);
            position: relative;
        }

        .hero-name::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 50%;
            transform: translateX(-50%);
            width: 150px;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--gold), transparent);
        }

        .hero-title {
            font-family: var(--font-body);
            font-size: 1.4rem;
            color: var(--parchment-dark);
            font-style: italic;
            margin-bottom: 30px;
            letter-spacing: 2px;
        }

        .hero-tagline {
            font-family: var(--font-ancient);
            font-size: 1.1rem;
            color: var(--magic-glow);
            letter-spacing: 3px;
            opacity: 0.9;
            margin-bottom: 40px;
        }

        /* Social Link */
        .social-link {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            padding: 14px 35px;
            background: var(--parchment);
            color: var(--ink);
            text-decoration: none;
            font-family: var(--font-display);
            font-size: 1rem;
            letter-spacing: 2px;
            border-radius: 50px;
            transition: all 0.4s ease;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        .social-link:hover {
            transform: translateY(-3px);
            box-shadow:
                0 8px 30px rgba(0, 0, 0, 0.4),
                0 0 20px rgba(212, 168, 87, 0.3);
            background: #fff;
        }

        /* ===== ALCHEMIST'S GRIMOIRE ===== */
        .bio-section {
            margin-bottom: 180px;
            position: relative;
            padding: 80px 0;
        }

        /* Magic Circle Background */
        .grimoire-magic-circle {
            position: absolute;
            width: 600px;
            height: 600px;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            opacity: 0.12;
            pointer-events: none;
            z-index: 0;
        }

        .grimoire-magic-circle svg {
            width: 100%;
            height: 100%;
        }

        .magic-circle-outer {
            animation: alchemyRotate 60s linear infinite;
            transform-origin: center;
        }

        .magic-circle-inner {
            animation: alchemyRotateReverse 40s linear infinite;
            transform-origin: center;
        }

        .rune-text {
            animation: runeGlow 3s ease-in-out infinite;
        }

        @keyframes runeGlow {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }

        /* Floating Alchemy Bottles */
        .alchemy-bottles {
            position: absolute;
            inset: 0;
            pointer-events: none;
            z-index: 1;
        }

        .bottle {
            position: absolute;
            animation: bottleFloat 8s ease-in-out infinite;
        }

        .bottle svg {
            filter: drop-shadow(0 5px 15px rgba(0, 0, 0, 0.4));
        }

        .bottle-1 {
            width: 50px;
            left: 5%;
            top: 20%;
            animation-delay: 0s;
        }

        .bottle-2 {
            width: 60px;
            right: 8%;
            top: 35%;
            animation-delay: -3s;
        }

        .bottle-3 {
            width: 45px;
            left: 8%;
            bottom: 25%;
            animation-delay: -5s;
        }

        @keyframes bottleFloat {
            0%, 100% { transform: translateY(0) rotate(-5deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }

        .bottle-glow {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 30px;
            background: radial-gradient(circle, rgba(74, 222, 128, 0.6), transparent);
            border-radius: 50%;
            animation: glowPulse 2s ease-in-out infinite;
        }

        .bottle-glow.pink {
            background: radial-gradient(circle, rgba(244, 114, 182, 0.6), transparent);
        }

        .bottle-glow.blue {
            background: radial-gradient(circle, rgba(96, 165, 250, 0.6), transparent);
        }

        @keyframes glowPulse {
            0%, 100% { opacity: 0.5; transform: translateX(-50%) scale(1); }
            50% { opacity: 1; transform: translateX(-50%) scale(1.3); }
        }

        /* Floating Runes */
        .floating-runes {
            position: absolute;
            inset: 0;
            pointer-events: none;
            z-index: 1;
        }

        .rune {
            position: absolute;
            font-size: 1.5rem;
            color: var(--gold);
            opacity: 0.4;
            text-shadow: 0 0 15px var(--gold);
            animation: runeFloat 10s ease-in-out infinite;
        }

        .rune-1 { top: 10%; left: 15%; animation-delay: 0s; }
        .rune-2 { top: 25%; right: 12%; animation-delay: -2s; }
        .rune-3 { bottom: 30%; left: 10%; animation-delay: -4s; }
        .rune-4 { bottom: 15%; right: 15%; animation-delay: -6s; }
        .rune-5 { top: 50%; left: 3%; animation-delay: -8s; }

        @keyframes runeFloat {
            0%, 100% { transform: translateY(0) rotate(0deg); opacity: 0.3; }
            50% { transform: translateY(-15px) rotate(10deg); opacity: 0.7; }
        }

        /* Grimoire Container */
        .grimoire-container {
            max-width: 900px;
            margin: 0 auto;
            position: relative;
            z-index: 10;
        }

        /* Page Tabs */
        .grimoire-tabs {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
        }

        .grimoire-tab {
            background: linear-gradient(135deg, rgba(44, 30, 20, 0.9), rgba(61, 41, 20, 0.8));
            border: 2px solid var(--gold-dark);
            border-radius: 8px 8px 0 0;
            padding: 12px 25px;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }

        .grimoire-tab::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, var(--gold), var(--gold-dark));
            opacity: 0;
            transition: opacity 0.4s ease;
            z-index: -1;
        }

        .grimoire-tab:hover::before,
        .grimoire-tab.active::before {
            opacity: 1;
        }

        .grimoire-tab .tab-icon {
            font-family: var(--font-display);
            font-size: 1.2rem;
            color: var(--gold);
            transition: color 0.4s ease;
        }

        .grimoire-tab .tab-label {
            font-family: var(--font-calligraphy);
            font-size: 0.9rem;
            color: var(--parchment-dark);
            transition: color 0.4s ease;
        }

        .grimoire-tab:hover .tab-icon,
        .grimoire-tab:hover .tab-label,
        .grimoire-tab.active .tab-icon,
        .grimoire-tab.active .tab-label {
            color: var(--bg-dark-wood);
        }

        .grimoire-tab.active {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(212, 168, 87, 0.4);
        }

        /* Grimoire Book */
        .grimoire-book {
            background: linear-gradient(135deg, #3d2914 0%, #2c1e14 100%);
            border: 8px solid;
            border-image: linear-gradient(135deg, var(--gold-dark), var(--gold), var(--gold-dark)) 1;
            border-radius: 8px;
            padding: 0;
            position: relative;
            box-shadow:
                0 20px 60px rgba(0, 0, 0, 0.5),
                inset 0 0 100px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            /* Fixed height container */
            min-height: 650px;
        }

        .book-spine {
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 30px;
            background: linear-gradient(90deg,
                #1a0f08 0%,
                #2c1e14 50%,
                #1a0f08 100%);
            border-right: 2px solid var(--gold-dark);
            z-index: 20;
        }

        .book-spine::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 80%;
            background: repeating-linear-gradient(
                0deg,
                transparent 0px,
                var(--gold-dark) 1px,
                transparent 2px,
                transparent 20px
            );
            opacity: 0.5;
        }

        /* Grimoire Pages */
        .grimoire-page {
            display: none;
            padding: 50px 60px 50px 80px;
            position: relative;
        }

        .grimoire-page.active {
            display: block;
        }

        /* Hidden pages for height calculation */
        .grimoire-page.measuring {
            display: block;
            visibility: hidden;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
        }

        /* Page Scroll Design with Roll Animation */
        .page-scroll {
            background: var(--parchment);
            border-radius: 4px;
            position: relative;
            box-shadow:
                5px 5px 20px rgba(0, 0, 0, 0.3),
                inset 0 0 50px rgba(0, 0, 0, 0.05);
            transform-origin: top center;
            /* Flexbox to push bottom roller to bottom */
            display: flex;
            flex-direction: column;
            min-height: 100%;
        }

        .page-scroll::before {
            content: '';
            position: absolute;
            inset: 0;
            background: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.04'/%3E%3C/svg%3E");
            pointer-events: none;
            border-radius: 4px;
        }

        /* ===== PARTICLE DISSOLVE ANIMATION ===== */
        /* Dissolving state - particles scatter */
        .page-scroll.dissolving {
            animation: particleDissolve 0.8s ease-in forwards;
        }

        /* Materializing state - particles gather then sharpen */
        .page-scroll.materializing {
            animation: particleMaterialize 0.6s ease-out forwards;
        }

        /* Sharpening state - edges become crisp slowly */
        .page-scroll.sharpening {
            animation: edgeSharpen 0.6s ease-out forwards;
        }

        @keyframes particleDissolve {
            0% {
                opacity: 1;
                filter: url(#dissolve-filter) blur(0px);
                transform: scale(1);
            }
            30% {
                opacity: 0.9;
                filter: url(#dissolve-filter) blur(1px);
                transform: scale(1.02);
            }
            60% {
                opacity: 0.5;
                filter: url(#dissolve-filter) blur(3px);
                transform: scale(1.05) translateY(-10px);
            }
            100% {
                opacity: 0;
                filter: url(#dissolve-filter) blur(8px);
                transform: scale(1.1) translateY(-30px);
            }
        }

        @keyframes particleMaterialize {
            0% {
                opacity: 0;
                filter: url(#dissolve-filter) blur(8px);
                transform: scale(0.9) translateY(30px);
            }
            50% {
                opacity: 0.6;
                filter: url(#dissolve-filter) blur(4px);
                transform: scale(0.95) translateY(10px);
            }
            100% {
                opacity: 0.9;
                filter: url(#dissolve-filter) blur(2px);
                transform: scale(0.99) translateY(2px);
            }
        }

        /* Slow edge sharpening after materialize */
        @keyframes edgeSharpen {
            0% {
                opacity: 0.9;
                filter: url(#dissolve-filter) blur(2px);
                transform: scale(0.99) translateY(2px);
            }
            30% {
                opacity: 0.95;
                filter: blur(1.5px);
                transform: scale(0.995) translateY(1px);
            }
            60% {
                opacity: 0.98;
                filter: blur(0.8px);
                transform: scale(0.998);
            }
            100% {
                opacity: 1;
                filter: none;
                transform: scale(1) translateY(0);
            }
        }

        /* Magic particles during transition */
        .grimoire-book::after {
            content: '';
            position: absolute;
            inset: 0;
            pointer-events: none;
            z-index: 100;
            opacity: 0;
            background-image:
                radial-gradient(2px 2px at 20% 30%, var(--gold-bright), transparent),
                radial-gradient(2px 2px at 40% 70%, var(--magic-glow), transparent),
                radial-gradient(3px 3px at 60% 40%, var(--gold), transparent),
                radial-gradient(2px 2px at 80% 60%, var(--candle-warm), transparent),
                radial-gradient(2px 2px at 30% 80%, var(--magic-glow), transparent),
                radial-gradient(3px 3px at 70% 20%, var(--gold-bright), transparent),
                radial-gradient(2px 2px at 50% 50%, var(--gold), transparent),
                radial-gradient(2px 2px at 15% 55%, var(--magic-glow), transparent),
                radial-gradient(3px 3px at 85% 35%, var(--gold-bright), transparent),
                radial-gradient(2px 2px at 45% 15%, var(--candle-warm), transparent);
            transition: opacity 0.3s ease;
        }

        .grimoire-book.transitioning::after {
            opacity: 1;
            animation: magicParticles 0.8s ease-in-out;
        }

        @keyframes magicParticles {
            0% {
                opacity: 0;
                transform: scale(0.8);
            }
            30% {
                opacity: 1;
                transform: scale(1.2);
            }
            70% {
                opacity: 1;
                transform: scale(1.1);
            }
            100% {
                opacity: 0;
                transform: scale(1.5);
            }
        }

        /* Golden sparkle overlay during transition */
        .page-scroll::after {
            content: '';
            position: absolute;
            inset: 0;
            pointer-events: none;
            z-index: 50;
            opacity: 0;
            background:
                radial-gradient(circle at 20% 20%, rgba(212, 168, 87, 0.8) 0%, transparent 3%),
                radial-gradient(circle at 80% 30%, rgba(167, 139, 250, 0.8) 0%, transparent 2%),
                radial-gradient(circle at 40% 70%, rgba(245, 212, 133, 0.8) 0%, transparent 3%),
                radial-gradient(circle at 70% 80%, rgba(212, 168, 87, 0.8) 0%, transparent 2%),
                radial-gradient(circle at 30% 40%, rgba(167, 139, 250, 0.8) 0%, transparent 2%),
                radial-gradient(circle at 60% 50%, rgba(245, 212, 133, 0.8) 0%, transparent 3%);
        }

        .page-scroll.dissolving::after,
        .page-scroll.materializing::after {
            animation: sparkleFloat 0.8s ease-in-out;
        }

        @keyframes sparkleFloat {
            0% { opacity: 0; transform: translateY(0) scale(1); }
            30% { opacity: 1; transform: translateY(-20px) scale(1.5); }
            70% { opacity: 0.8; transform: translateY(-40px) scale(1.2); }
            100% { opacity: 0; transform: translateY(-60px) scale(0.8); }
        }

        .scroll-roller {
            height: 30px;
            background: linear-gradient(180deg,
                #c4b08a 0%,
                var(--parchment) 20%,
                var(--parchment) 80%,
                #c4b08a 100%);
            position: relative;
            z-index: 10;
        }

        .scroll-roller.top {
            border-radius: 15px 15px 0 0;
            box-shadow:
                0 5px 15px rgba(0, 0, 0, 0.3),
                inset 0 -5px 10px rgba(0, 0, 0, 0.1);
        }

        .scroll-roller.bottom {
            border-radius: 0 0 15px 15px;
            box-shadow:
                0 -3px 10px rgba(0, 0, 0, 0.2),
                inset 0 5px 10px rgba(0, 0, 0, 0.1);
        }

        .scroll-roller::before,
        .scroll-roller::after {
            content: '';
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 22px;
            height: 22px;
            background: radial-gradient(circle at 30% 30%, var(--gold-bright), var(--gold), var(--gold-dark));
            border-radius: 50%;
            box-shadow:
                inset 0 2px 4px rgba(255,255,255,0.5),
                inset 0 -2px 4px rgba(0,0,0,0.2),
                0 2px 8px rgba(0,0,0,0.4);
        }

        .scroll-roller::before { left: 30px; }
        .scroll-roller::after { right: 30px; }

        .scroll-content {
            padding: 35px 45px;
            position: relative;
            z-index: 5;
            /* Flex grow to fill space and push bottom roller down */
            flex: 1;
        }

        /* Page Content Styles */
        .page-chapter {
            font-family: var(--font-display);
            font-size: 0.9rem;
            color: var(--gold-dark);
            letter-spacing: 4px;
            text-align: center;
            margin-bottom: 10px;
        }

        .page-title {
            font-family: var(--font-calligraphy);
            font-size: 2.2rem;
            color: var(--crimson);
            text-align: center;
            margin-bottom: 15px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }

        .page-decoration {
            text-align: center;
            color: var(--gold);
            margin-bottom: 25px;
            font-size: 0.9rem;
            letter-spacing: 3px;
        }

        .page-text {
            font-family: var(--font-calligraphy);
            color: var(--ink);
            font-size: 1.15rem;
            line-height: 2;
        }

        .page-text p {
            margin-bottom: 18px;
            text-indent: 2em;
        }

        .page-text strong {
            color: var(--crimson);
        }

        .highlight-text {
            text-align: center;
            font-style: italic;
            color: var(--magic-purple);
            margin: 25px 0;
            padding: 20px;
            background: linear-gradient(135deg, rgba(107, 76, 154, 0.1), transparent);
            border-left: 3px solid var(--magic-purple);
            border-radius: 0 8px 8px 0;
        }

        .page-symbol {
            text-align: center;
            font-size: 2rem;
            color: var(--gold);
            margin-top: 30px;
            text-shadow: 0 0 20px var(--candle-warm);
            animation: symbolPulse 3s ease-in-out infinite;
        }

        /* Page 2: Ingredients */
        .page-ingredients {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin-top: 25px;
        }

        .ingredient {
            background: linear-gradient(135deg, rgba(61, 41, 20, 0.8), rgba(44, 30, 20, 0.9));
            color: var(--parchment);
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 0.95rem;
            border: 1px solid var(--gold-dark);
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }

        .ingredient:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(212, 168, 87, 0.3);
            border-color: var(--gold);
        }

        /* Page 3: Transmutation Circle */
        .transmutation-circle {
            width: 120px;
            height: 120px;
            margin: 30px auto;
            position: relative;
        }

        .circle-ring {
            position: absolute;
            inset: 0;
            border: 3px solid var(--gold);
            border-radius: 50%;
            animation: alchemyRotate 10s linear infinite;
        }

        .circle-ring::before {
            content: '';
            position: absolute;
            inset: 10px;
            border: 2px dashed var(--gold-dark);
            border-radius: 50%;
        }

        .circle-ring::after {
            content: '';
            position: absolute;
            inset: 20px;
            border: 1px solid var(--gold);
            border-radius: 50%;
        }

        .circle-core {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2.5rem;
            color: var(--gold);
            text-shadow: 0 0 30px var(--candle-warm);
            animation: corePulse 2s ease-in-out infinite;
        }

        @keyframes corePulse {
            0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.8; }
            50% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
        }

        /* Page 4: Final Message & Hashtags */
        .final-message {
            text-align: center;
            font-size: 1.1rem;
            line-height: 2.2;
            margin-top: 20px;
            padding: 20px;
            background: linear-gradient(135deg, rgba(212, 168, 87, 0.1), transparent);
            border-radius: 8px;
        }

        .page-hashtags {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 12px;
            margin-top: 25px;
        }

        .page-hashtags span {
            color: var(--magic-purple);
            font-style: italic;
            font-size: 0.9rem;
            padding: 5px 12px;
            background: rgba(107, 76, 154, 0.1);
            border-radius: 15px;
        }

        /* Page Seal - positioned inside the scroll content */
        .page-seal {
            position: absolute;
            /* Position inside the parchment area, accounting for padding */
            bottom: 70px; /* Above bottom roller */
            right: 70px;  /* Inside right padding */
            width: 60px;
            height: 60px;
            background: radial-gradient(circle at 35% 35%, #e05050, var(--crimson), #5a1a1a);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: var(--font-display);
            font-size: 1.5rem;
            color: #3a1515;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
            transform: rotate(-10deg);
            z-index: 15;
        }

        .page-seal::before {
            content: '';
            position: absolute;
            inset: 4px;
            border: 2px solid rgba(90, 26, 26, 0.4);
            border-radius: 50%;
        }

        .page-seal.final {
            width: 80px;
            height: 80px;
            font-size: 2rem;
            background: radial-gradient(circle at 35% 35%, var(--gold-bright), var(--gold), var(--gold-dark));
            color: var(--bg-dark-wood);
            box-shadow: 0 0 30px rgba(212, 168, 87, 0.5);
        }

        /* Page Navigation Arrows */
        .page-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, rgba(44, 30, 20, 0.95), rgba(61, 41, 20, 0.9));
            border: 2px solid var(--gold);
            border-radius: 50%;
            color: var(--gold);
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.4s ease;
            z-index: 100;
        }

        .page-arrow.prev { left: -70px; }
        .page-arrow.next { right: -70px; }

        .page-arrow:hover {
            background: var(--gold);
            color: var(--bg-dark-wood);
            box-shadow: 0 0 25px rgba(212, 168, 87, 0.5);
            transform: translateY(-50%) scale(1.1);
        }

        .page-arrow:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .page-arrow:disabled:hover {
            background: linear-gradient(135deg, rgba(44, 30, 20, 0.95), rgba(61, 41, 20, 0.9));
            color: var(--gold);
            transform: translateY(-50%) scale(1);
            box-shadow: none;
        }

        /* Page Indicator */
        .page-indicator {
            text-align: center;
            margin-top: 25px;
            font-family: var(--font-display);
            font-size: 1rem;
            color: var(--gold);
            letter-spacing: 3px;
        }

        .page-indicator .current-page {
            font-size: 1.3rem;
            text-shadow: 0 0 10px var(--candle-warm);
        }

        /* ===== SKILL ALCHEMY SECTION ===== */
        .skill-section {
            margin-bottom: 150px;
        }

        .section-header {
            text-align: center;
            margin-bottom: 60px;
        }

        .section-title {
            font-family: var(--font-display);
            font-size: 2.8rem;
            color: var(--gold);
            letter-spacing: 8px;
            margin-bottom: 15px;
            text-shadow: 0 2px 20px rgba(212, 168, 87, 0.3);
        }

        .section-subtitle {
            font-family: var(--font-body);
            font-size: 1.1rem;
            color: var(--parchment-dark);
            font-style: italic;
            opacity: 0.8;
        }

        /* Detective Wall Container */
        .detective-wall {
            position: relative;
            min-height: 900px;
            background:
                linear-gradient(180deg,
                    rgba(44, 30, 20, 0.95) 0%,
                    rgba(61, 41, 20, 0.9) 50%,
                    rgba(44, 30, 20, 0.95) 100%),
                repeating-linear-gradient(
                    0deg,
                    transparent 0px,
                    rgba(139, 69, 19, 0.1) 2px,
                    transparent 4px,
                    transparent 30px
                );
            border: 15px solid;
            border-image: linear-gradient(135deg,
                var(--gold-dark) 0%,
                var(--gold) 50%,
                var(--gold-dark) 100%) 1;
            box-shadow:
                inset 0 0 100px rgba(0, 0, 0, 0.6),
                0 20px 60px rgba(0, 0, 0, 0.5);
            padding: 60px;
            overflow: visible;
        }

        /* Cork Board Texture Overlay */
        .detective-wall::before {
            content: '';
            position: absolute;
            inset: 0;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='cork'%3E%3CfeTurbulence type='turbulence' baseFrequency='0.5' numOctaves='3'/%3E%3C/filter%3E%3Crect width='100' height='100' filter='url(%23cork)' opacity='0.08'/%3E%3C/svg%3E");
            pointer-events: none;
        }

        /* SVG String Lines Container */
        .string-svg {
            position: absolute;
            inset: 0;
            pointer-events: none;
            z-index: 1;
        }

        /* Evidence Cards (Skill Nodes) */
        .evidence-card {
            position: absolute;
            width: 180px;
            background: var(--parchment);
            padding: 0;
            border-radius: 4px;
            box-shadow:
                0 8px 25px rgba(0, 0, 0, 0.4),
                0 2px 10px rgba(0, 0, 0, 0.2);
            z-index: 10;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            /* Remove overflow hidden to show pin */
        }

        /* Pin/Pushpin on top of card */
        .evidence-card::before {
            content: '';
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            width: 24px;
            height: 24px;
            background: radial-gradient(circle at 35% 35%,
                #e05050 0%,
                var(--crimson) 60%,
                #5a1a1a 100%);
            border-radius: 50%;
            box-shadow:
                0 3px 8px rgba(0, 0, 0, 0.4),
                inset 0 -2px 4px rgba(0, 0, 0, 0.3);
            z-index: 20; /* Higher than image */
        }

        .evidence-card:hover {
            transform: scale(1.08) rotate(0deg);
            z-index: 100;
            box-shadow:
                0 15px 40px rgba(0, 0, 0, 0.5),
                0 0 30px rgba(212, 168, 87, 0.3);
        }

        .evidence-img {
            width: 100%;
            height: 120px;
            object-fit: cover;
            filter: sepia(0.2);
            transition: filter 0.3s ease;
            border-radius: 4px 4px 0 0;
            position: relative;
            z-index: 5; /* Lower than pin */
        }

        .evidence-card:hover .evidence-img {
            filter: sepia(0);
        }

        .evidence-content {
            padding: 15px;
        }

        .evidence-label {
            font-family: var(--font-display);
            font-size: 1rem;
            color: var(--crimson);
            margin-bottom: 8px;
            font-weight: 700;
        }

        .evidence-year {
            font-family: var(--font-body);
            font-size: 0.8rem;
            color: var(--ink);
            opacity: 0.6;
        }

        /* Center Focal Point - Alchemist's Journal */
        .focal-journal {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 280px;
            background: linear-gradient(135deg, #4a3520 0%, #2d1f10 100%);
            padding: 30px;
            border-radius: 8px;
            box-shadow:
                0 15px 50px rgba(0, 0, 0, 0.6),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            z-index: 50;
            border: 3px solid var(--gold-dark);
        }

        .journal-title {
            font-family: var(--font-display);
            font-size: 1.4rem;
            color: var(--gold);
            text-align: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--gold-dark);
        }

        .journal-text {
            font-family: var(--font-body);
            font-size: 0.95rem;
            color: var(--parchment);
            line-height: 1.8;
            text-align: center;
        }

        .journal-symbol {
            text-align: center;
            margin-top: 20px;
            font-size: 2rem;
            color: var(--gold);
            text-shadow: 0 0 20px var(--candle-warm);
        }

        /* Detail Panel (appears on click) */
        .detail-panel {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            background: var(--parchment);
            padding: 0;
            border-radius: 8px;
            box-shadow: 0 30px 80px rgba(0, 0, 0, 0.7);
            z-index: 10000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .detail-panel.active {
            opacity: 1;
            visibility: visible;
            transform: translate(-50%, -50%) scale(1);
        }

        .detail-close {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 40px;
            height: 40px;
            background: var(--crimson);
            border: none;
            border-radius: 50%;
            color: #fff;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            transition: all 0.3s ease;
        }

        .detail-close:hover {
            background: var(--crimson-light);
            transform: rotate(90deg);
        }

        /* Image container for proper display */
        .detail-img-container {
            width: 100%;
            max-height: 50vh;
            min-height: 200px;
            background: #1a1a1a;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            flex-shrink: 0;
            border-radius: 8px 8px 0 0;
        }

        .detail-img {
            width: 100%;
            height: auto;
            max-height: 50vh;
            object-fit: contain;
            display: block;
        }

        .detail-content {
            padding: 30px;
            color: var(--ink);
            flex-shrink: 0;
        }

        .detail-title {
            font-family: var(--font-display);
            font-size: 1.6rem;
            color: var(--crimson);
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--gold);
        }

        .detail-desc {
            font-size: 1.05rem;
            line-height: 1.9;
        }

        .detail-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.8);
            z-index: 9999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s ease;
        }

        .detail-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        /* ===== FOOTER ===== */
        footer {
            text-align: center;
            padding: 60px 20px;
            border-top: 1px solid rgba(212, 168, 87, 0.2);
        }

        .footer-text {
            font-family: var(--font-body);
            color: var(--parchment-dark);
            font-size: 0.95rem;
            letter-spacing: 1px;
            opacity: 0.7;
        }

        .footer-symbol {
            font-size: 1.5rem;
            color: var(--gold);
            margin-bottom: 15px;
            text-shadow: 0 0 20px var(--candle-warm);
        }

        .footer-link {
            color: var(--gold);
            text-decoration: none;
            transition: all 0.3s ease;
            border-bottom: 1px solid transparent;
        }

        .footer-link:hover {
            color: var(--gold-bright);
            border-bottom-color: var(--gold);
            text-shadow: 0 0 10px var(--candle-warm);
        }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 1024px) {
            .detective-wall {
                min-height: 1200px;
                padding: 40px;
            }

            .evidence-card {
                width: 150px;
            }

            .evidence-img {
                height: 100px;
            }

            /* Grimoire Tablet */
            .page-arrow.prev { left: -60px; }
            .page-arrow.next { right: -60px; }

            .grimoire-page {
                padding: 40px 50px 40px 70px;
            }

            .scroll-content {
                padding: 30px 40px;
            }
        }

        @media (max-width: 768px) {
            .main-container {
                padding: 100px 20px 60px;
            }

            .hero-name {
                font-size: 3rem;
                letter-spacing: 6px;
            }

            .hero-title {
                font-size: 1.1rem;
            }

            .detective-wall {
                min-height: 1400px;
                padding: 30px 15px;
                border-width: 8px;
            }

            .evidence-card {
                width: 130px;
            }

            .evidence-img {
                height: 80px;
            }

            .evidence-content {
                padding: 10px;
            }

            .evidence-label {
                font-size: 0.85rem;
            }

            .focal-journal {
                width: 220px;
                padding: 20px;
            }

            .section-title {
                font-size: 2rem;
                letter-spacing: 4px;
            }

            /* Grimoire Mobile */
            .grimoire-magic-circle {
                width: 400px;
                height: 400px;
            }

            .alchemy-bottles {
                display: none;
            }

            .floating-runes {
                display: none;
            }

            .bookshelf-frame {
                width: 30px;
            }

            .candle-light {
                width: 80px;
                height: 80px;
            }

            .candle-light.top-left {
                top: 40px;
                left: 40px;
            }

            .candle-light.top-right {
                top: 40px;
                right: 40px;
            }

            .grimoire-tabs {
                gap: 8px;
                flex-wrap: wrap;
            }

            .grimoire-tab {
                padding: 10px 18px;
            }

            .grimoire-tab .tab-icon {
                font-size: 1rem;
            }

            .grimoire-tab .tab-label {
                font-size: 0.8rem;
            }

            .grimoire-book {
                border-width: 5px;
                min-height: 550px;
            }

            .book-spine {
                width: 20px;
            }

            .grimoire-page {
                padding: 30px 25px 30px 45px;
            }

            .scroll-content {
                padding: 25px 20px;
            }

            .page-title {
                font-size: 1.8rem;
            }

            .page-text {
                font-size: 1rem;
            }

            .page-arrow {
                width: 40px;
                height: 40px;
                font-size: 1rem;
            }

            .page-arrow.prev { left: 10px; top: auto; bottom: -60px; transform: none; }
            .page-arrow.next { right: 10px; top: auto; bottom: -60px; transform: none; }

            .page-indicator {
                margin-top: 80px;
            }

            .page-seal {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
                bottom: 60px;
                right: 50px;
            }

            .page-seal.final {
                width: 60px;
                height: 60px;
                font-size: 1.5rem;
            }

            .page-ingredients {
                gap: 10px;
            }

            .ingredient {
                padding: 8px 15px;
                font-size: 0.85rem;
            }

            .transmutation-circle {
                width: 100px;
                height: 100px;
            }

            .circle-core {
                font-size: 2rem;
            }

            /* Detail Panel Mobile */
            .detail-panel {
                width: 95%;
                max-height: 85vh;
            }

            .detail-img-container {
                max-height: 40vh;
                min-height: 150px;
            }

            .detail-img {
                max-height: 40vh;
            }

            .detail-content {
                padding: 20px;
            }

            .detail-title {
                font-size: 1.3rem;
            }

            .detail-desc {
                font-size: 0.95rem;
            }

            .detail-close {
                width: 35px;
                height: 35px;
                font-size: 1.3rem;
                top: 10px;
                right: 10px;
            }
        }

        @media (max-width: 480px) {
            .nav-btn {
                padding: 10px 16px;
                font-size: 0.85rem;
            }

            .hero-name {
                font-size: 2.5rem;
            }

            .avatar-frame {
                width: 180px;
                height: 180px;
            }

            .detective-wall {
                min-height: 1600px;
            }

            .evidence-card {
                width: 110px;
            }

            .focal-journal {
                width: 180px;
                padding: 15px;
            }

            .journal-title {
                font-size: 1.1rem;
            }

            .journal-text {
                font-size: 0.85rem;
            }

            /* Detail Panel Extra Small */
            .detail-img-container {
                max-height: 35vh;
                min-height: 120px;
            }

            .detail-img {
                max-height: 35vh;
            }

            .detail-content {
                padding: 15px;
            }

            .detail-title {
                font-size: 1.1rem;
                margin-bottom: 10px;
                padding-bottom: 10px;
            }

            .detail-desc {
                font-size: 0.9rem;
                line-height: 1.7;
            }
        }
    </style>
</head>

<body>
    <!-- SVG Filters for Particle Effects -->
    <svg style="position: absolute; width: 0; height: 0; overflow: hidden;">
        <defs>
            <!-- Dissolve Filter - Creates particle/noise effect -->
            <filter id="dissolve-filter" x="-50%" y="-50%" width="200%" height="200%">
                <feTurbulence type="fractalNoise" baseFrequency="0.015" numOctaves="3" result="noise" seed="1"/>
                <feDisplacementMap in="SourceGraphic" in2="noise" scale="30" xChannelSelector="R" yChannelSelector="G"/>
            </filter>
        </defs>
    </svg>

    <!-- ENTRY GATE -->
    <div class="entry-gate" id="entry-gate">
        <div class="gate-alchemy-circle">
            <svg viewBox="0 0 300 300">
                <defs>
                    <linearGradient id="goldGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" stop-color="#f5d485"/>
                        <stop offset="50%" stop-color="#d4a857"/>
                        <stop offset="100%" stop-color="#8b7129"/>
                    </linearGradient>
                </defs>
                <g fill="none" stroke="url(#goldGrad)" stroke-width="1.5">
                    <!-- Outer Ring -->
                    <circle cx="150" cy="150" r="140" stroke-dasharray="8 4"/>
                    <circle cx="150" cy="150" r="130"/>
                    <!-- Middle Ring -->
                    <g class="inner-ring">
                        <circle cx="150" cy="150" r="100"/>
                        <polygon points="150,50 235,200 65,200" stroke-width="1"/>
                        <polygon points="150,250 65,100 235,100" stroke-width="1"/>
                    </g>
                    <!-- Inner Elements -->
                    <circle cx="150" cy="150" r="60" stroke-dasharray="4 2"/>
                    <circle cx="150" cy="150" r="40"/>
                </g>
            </svg>
            <div class="gate-symbol">⚗</div>
        </div>
        <h1 class="gate-title">TRANSMUTATION</h1>
        <p class="gate-subtitle">職涯鍊金術師的工作室</p>
        <button class="gate-enter-btn" id="gate-enter">進入書房</button>
    </div>

    <!-- AMBIENT BACKGROUND -->
    <div class="ambient-bg">
        <div class="wood-texture"></div>
        <div class="candle-vignette"></div>
        <div class="dust-layer"></div>
        <!-- Bookshelf Side Frames -->
        <div class="bookshelf-frame left"></div>
        <div class="bookshelf-frame right"></div>
        <!-- Candle Light Sources -->
        <div class="candle-light top-left"></div>
        <div class="candle-light top-right"></div>
    </div>

    <!-- MAGIC PARTICLES CANVAS -->
    <canvas id="magic-canvas"></canvas>

    <!-- NAVIGATION -->
    <nav class="nav-back">
        <a href="/guild/" class="nav-btn">
            <i class="fas fa-arrow-left"></i> GUILD
        </a>
    </nav>

    <!-- MAIN CONTAINER -->
    <div class="main-container" id="main-container">

        <!-- HERO SECTION -->
        <section class="hero-section">
            <!-- Background Alchemy Circle -->
            <div class="alchemy-circle-bg">
                <svg viewBox="0 0 500 500">
                    <defs>
                        <linearGradient id="alchemyGold" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" stop-color="#d4a857"/>
                            <stop offset="100%" stop-color="#8b7129"/>
                        </linearGradient>
                    </defs>
                    <g fill="none" stroke="url(#alchemyGold)" stroke-width="1">
                        <!-- Outer Ring -->
                        <g class="alchemy-ring-outer">
                            <circle cx="250" cy="250" r="240" stroke-dasharray="15 5"/>
                            <circle cx="250" cy="250" r="230"/>
                            <!-- Cardinal Points -->
                            <line x1="250" y1="10" x2="250" y2="50"/>
                            <line x1="250" y1="450" x2="250" y2="490"/>
                            <line x1="10" y1="250" x2="50" y2="250"/>
                            <line x1="450" y1="250" x2="490" y2="250"/>
                            <!-- Runes around edge -->
                            <text x="250" y="25" text-anchor="middle" fill="#d4a857" font-size="14" font-family="serif">☉</text>
                            <text x="475" y="255" text-anchor="middle" fill="#d4a857" font-size="14" font-family="serif">☿</text>
                            <text x="250" y="485" text-anchor="middle" fill="#d4a857" font-size="14" font-family="serif">☽</text>
                            <text x="25" y="255" text-anchor="middle" fill="#d4a857" font-size="14" font-family="serif">♄</text>
                        </g>
                        <!-- Middle Ring -->
                        <g class="alchemy-ring-middle">
                            <circle cx="250" cy="250" r="180"/>
                            <polygon points="250,70 400,325 100,325"/>
                            <polygon points="250,430 100,175 400,175"/>
                        </g>
                        <!-- Inner Ring -->
                        <g class="alchemy-ring-inner">
                            <circle cx="250" cy="250" r="100" stroke-dasharray="5 3"/>
                            <circle cx="250" cy="250" r="80"/>
                        </g>
                    </g>
                </svg>
            </div>

            <!-- Avatar -->
            <div class="avatar-container">
                <div class="avatar-glow"></div>
                <div class="avatar-frame">
                    <img src="/assets/img/guild/jing/avatar.webp" alt="Jing" class="avatar-img">
                </div>
            </div>

            <h1 class="hero-name">JING</h1>
            <p class="hero-title">職涯鍊金術師 ✦ 資訊業 PM ✦ 心理系初衷</p>
            <p class="hero-tagline">「將經歷淬煉成智慧，為迷途者點亮方向」</p>

            <a href="https://www.threads.com/@throughlines.cve" target="_blank" class="social-link">
                <i class="fab fa-threads"></i> 追蹤我的旅程
            </a>
        </section>

        <!-- BIOGRAPHY SCROLL - ALCHEMIST'S GRIMOIRE -->
        <section class="bio-section">
            <!-- Magic Circle Background -->
            <div class="grimoire-magic-circle">
                <svg viewBox="0 0 400 400">
                    <defs>
                        <linearGradient id="runeGlow" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" stop-color="#d4a857" stop-opacity="0.8"/>
                            <stop offset="100%" stop-color="#8b7129" stop-opacity="0.4"/>
                        </linearGradient>
                    </defs>
                    <g fill="none" stroke="url(#runeGlow)" stroke-width="1" class="magic-circle-outer">
                        <circle cx="200" cy="200" r="190" stroke-dasharray="10 5"/>
                        <circle cx="200" cy="200" r="175"/>
                        <polygon points="200,25 350,290 50,290"/>
                        <polygon points="200,375 50,110 350,110"/>
                    </g>
                    <g fill="none" stroke="url(#runeGlow)" stroke-width="0.8" class="magic-circle-inner">
                        <circle cx="200" cy="200" r="140" stroke-dasharray="5 3"/>
                        <circle cx="200" cy="200" r="120"/>
                        <!-- Alchemy symbols -->
                        <text x="200" y="70" text-anchor="middle" fill="#d4a857" font-size="18" class="rune-text">☉</text>
                        <text x="330" y="200" text-anchor="middle" fill="#d4a857" font-size="18" class="rune-text">☿</text>
                        <text x="200" y="340" text-anchor="middle" fill="#d4a857" font-size="18" class="rune-text">☽</text>
                        <text x="70" y="200" text-anchor="middle" fill="#d4a857" font-size="18" class="rune-text">♄</text>
                    </g>
                </svg>
            </div>

            <!-- Floating Alchemy Bottles -->
            <div class="alchemy-bottles">
                <div class="bottle bottle-1">
                    <svg viewBox="0 0 40 80">
                        <path d="M15 0 L25 0 L25 20 L35 35 L35 75 Q35 80 30 80 L10 80 Q5 80 5 75 L5 35 L15 20 Z" fill="#2a4a3a" stroke="#d4a857" stroke-width="1"/>
                        <ellipse cx="20" cy="60" rx="12" ry="8" fill="#4ade80" opacity="0.6"/>
                        <ellipse cx="20" cy="55" rx="8" ry="5" fill="#86efac" opacity="0.4"/>
                    </svg>
                    <div class="bottle-glow"></div>
                </div>
                <div class="bottle bottle-2">
                    <svg viewBox="0 0 50 70">
                        <path d="M20 0 L30 0 L30 15 Q45 25 45 40 L45 60 Q45 70 35 70 L15 70 Q5 70 5 60 L5 40 Q5 25 20 15 Z" fill="#4a2a3a" stroke="#d4a857" stroke-width="1"/>
                        <ellipse cx="25" cy="50" rx="15" ry="10" fill="#f472b6" opacity="0.5"/>
                        <ellipse cx="25" cy="45" rx="10" ry="6" fill="#fb7185" opacity="0.3"/>
                    </svg>
                    <div class="bottle-glow pink"></div>
                </div>
                <div class="bottle bottle-3">
                    <svg viewBox="0 0 35 90">
                        <path d="M12 0 L23 0 L23 25 L30 40 L30 85 Q30 90 25 90 L10 90 Q5 90 5 85 L5 40 L12 25 Z" fill="#2a3a4a" stroke="#d4a857" stroke-width="1"/>
                        <ellipse cx="17" cy="65" rx="10" ry="12" fill="#60a5fa" opacity="0.5"/>
                        <ellipse cx="17" cy="58" rx="6" ry="7" fill="#93c5fd" opacity="0.3"/>
                    </svg>
                    <div class="bottle-glow blue"></div>
                </div>
            </div>

            <!-- Floating Runes -->
            <div class="floating-runes">
                <span class="rune rune-1">Ψ</span>
                <span class="rune rune-2">Ω</span>
                <span class="rune rune-3">Δ</span>
                <span class="rune rune-4">⚗</span>
                <span class="rune rune-5">✧</span>
            </div>

            <!-- Grimoire Container -->
            <div class="grimoire-container">
                <!-- Page Navigation Tabs -->
                <div class="grimoire-tabs">
                    <button class="grimoire-tab active" data-page="1">
                        <span class="tab-icon">I</span>
                        <span class="tab-label">起源</span>
                    </button>
                    <button class="grimoire-tab" data-page="2">
                        <span class="tab-icon">II</span>
                        <span class="tab-label">流浪</span>
                    </button>
                    <button class="grimoire-tab" data-page="3">
                        <span class="tab-icon">III</span>
                        <span class="tab-label">覺醒</span>
                    </button>
                    <button class="grimoire-tab" data-page="4">
                        <span class="tab-icon">IV</span>
                        <span class="tab-label">使命</span>
                    </button>
                </div>

                <!-- The Grimoire Book -->
                <div class="grimoire-book">
                    <div class="book-spine"></div>

                    <!-- Page 1: Origin -->
                    <div class="grimoire-page active" data-page="1">
                        <div class="page-scroll">
                            <div class="scroll-roller top"></div>
                            <div class="scroll-content">
                                <div class="page-chapter">Chapter I</div>
                                <h2 class="page-title">煉金術師的起源</h2>
                                <div class="page-decoration">✦ ─────────── ✦</div>
                                <div class="page-text">
                                    <p>您好，我是 <strong>Jing</strong>，一位斜槓中的職涯諮詢師。</p>
                                    <p>大學時就讀心理系，首次接觸到「職涯諮詢師」這個概念時，便在心中種下了一顆小小的種籽。那是一個關於理解人心、引導他人找到方向的夢想。</p>
                                    <p class="highlight-text">「每一位鍊金術師，都是從一顆微小的種籽開始萌芽。」</p>
                                </div>
                                <div class="page-symbol">☿</div>
                            </div>
                            <div class="scroll-roller bottom"></div>
                        </div>
                        <div class="page-seal">
                            <span>I</span>
                        </div>
                    </div>

                    <!-- Page 2: Wandering -->
                    <div class="grimoire-page" data-page="2">
                        <div class="page-scroll">
                            <div class="scroll-roller top"></div>
                            <div class="scroll-content">
                                <div class="page-chapter">Chapter II</div>
                                <h2 class="page-title">素材採集之旅</h2>
                                <div class="page-decoration">✦ ─────────── ✦</div>
                                <div class="page-text">
                                    <p>出社會後，基於現實考量，未能走上心理相關的道路。</p>
                                    <p>我去過<strong>越南</strong>、待過<strong>日商</strong>，從成衣產業一路走到資訊產業，做過業務、採購、客服、專案經理⋯⋯</p>
                                    <p>遊走在不同領域間，一顆不安定的心，彷彿在哪裡都紮不了根。</p>
                                    <p class="highlight-text">「煉金術師必須走遍世界，才能收集到最珍貴的素材。」</p>
                                </div>
                                <div class="page-ingredients">
                                    <span class="ingredient">🌏 越南經歷</span>
                                    <span class="ingredient">🏯 日商文化</span>
                                    <span class="ingredient">👔 業務歷練</span>
                                    <span class="ingredient">💼 PM 專業</span>
                                </div>
                                <div class="page-symbol">♄</div>
                            </div>
                            <div class="scroll-roller bottom"></div>
                        </div>
                        <div class="page-seal">
                            <span>II</span>
                        </div>
                    </div>

                    <!-- Page 3: Awakening -->
                    <div class="grimoire-page" data-page="3">
                        <div class="page-scroll">
                            <div class="scroll-roller top"></div>
                            <div class="scroll-content">
                                <div class="page-chapter">Chapter III</div>
                                <h2 class="page-title">煉成之刻</h2>
                                <div class="page-decoration">✦ ─────────── ✦</div>
                                <div class="page-text">
                                    <p>2025 年，接受<strong>職游</strong>的培訓後，我發現自己再次能夠呼吸。</p>
                                    <p>原來這些年我是離水的魚，終於找回當初選擇心理系的初衷。</p>
                                    <p>當年那顆種籽，<strong>終於發了芽</strong>。</p>
                                    <p class="highlight-text">「真正的煉成，不是創造新物質，<br>而是喚醒沉睡已久的本質。」</p>
                                </div>
                                <div class="transmutation-circle">
                                    <div class="circle-ring"></div>
                                    <div class="circle-core">⚗</div>
                                </div>
                                <div class="page-symbol">☉</div>
                            </div>
                            <div class="scroll-roller bottom"></div>
                        </div>
                        <div class="page-seal">
                            <span>III</span>
                        </div>
                    </div>

                    <!-- Page 4: Mission -->
                    <div class="grimoire-page" data-page="4">
                        <div class="page-scroll">
                            <div class="scroll-roller top"></div>
                            <div class="scroll-content">
                                <div class="page-chapter">Chapter IV</div>
                                <h2 class="page-title">鍊金術師的使命</h2>
                                <div class="page-decoration">✦ ─────────── ✦</div>
                                <div class="page-text">
                                    <p>希望能協助大家在職涯探索的路上，少一點徬徨、無助、不安。</p>
                                    <p>找到符合<strong>價值觀</strong>，又能懷抱<strong>熱情</strong>前進的工作。</p>
                                    <p class="final-message">請相信每個人都有自己的時間軸和生命軌跡。<br>不需要比較，沒有孰快孰慢、孰優孰劣。<br><strong>這是專屬於你、獨一無二的旅程。</strong></p>
                                </div>
                                <div class="page-hashtags">
                                    <span>#跨領域轉職</span>
                                    <span>#一起享受職涯沿途風景</span>
                                    <span>#持續探索更多可能性</span>
                                </div>
                                <div class="page-symbol">☽</div>
                            </div>
                            <div class="scroll-roller bottom"></div>
                        </div>
                        <div class="page-seal final">
                            <span>J</span>
                        </div>
                    </div>
                </div>

                <!-- Page Navigation Arrows -->
                <button class="page-arrow prev" id="prev-page">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <button class="page-arrow next" id="next-page">
                    <i class="fas fa-chevron-right"></i>
                </button>

                <!-- Page Indicator -->
                <div class="page-indicator">
                    <span class="current-page">1</span> / <span class="total-pages">4</span>
                </div>
            </div>
        </section>

        <!-- SKILL ALCHEMY SECTION -->
        <section class="skill-section">
            <div class="section-header">
                <h2 class="section-title">SKILL ALCHEMY</h2>
                <p class="section-subtitle">如同點亮技能樹，將經驗串連成線索</p>
            </div>

            <div class="detective-wall" id="detective-wall">
                <!-- SVG for String Lines -->
                <svg class="string-svg" id="string-svg"></svg>

                <!-- Evidence Cards will be generated by JS -->

                <!-- Center Focal Journal -->
                <div class="focal-journal">
                    <h3 class="journal-title">鍊金術師之道</h3>
                    <p class="journal-text">
                        每一段經歷都是煉金術的素材，<br>
                        透過時間的淬煉，<br>
                        最終轉化為引導他人的智慧。
                    </p>
                    <div class="journal-symbol">☿ ⚗ ☉</div>
                </div>
            </div>
        </section>

        <!-- Detail Panel (Modal) -->
        <div class="detail-overlay" id="detail-overlay"></div>
        <div class="detail-panel" id="detail-panel">
            <button class="detail-close" id="detail-close">×</button>
            <div class="detail-img-container">
                <img class="detail-img" id="detail-img" src="" alt="">
            </div>
            <div class="detail-content">
                <h3 class="detail-title" id="detail-title"></h3>
                <p class="detail-desc" id="detail-desc"></p>
            </div>
        </div>

        <!-- FOOTER -->
        <footer>
            <div class="footer-symbol">⚗</div>
            <p class="footer-text">Made with alchemy by <a href="/guild/" class="footer-link">SuperGalen's Dungeon</a></p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // ===== ENTRY GATE =====
            var entryGate = document.getElementById('entry-gate');
            var gateEnter = document.getElementById('gate-enter');
            var mainContainer = document.getElementById('main-container');

            gateEnter.addEventListener('click', function() {
                entryGate.classList.add('hidden');
                setTimeout(function() {
                    mainContainer.classList.add('visible');
                }, 500);
            });

            // ===== SKILL DATA =====
            // 根據實際圖片內容重新對應
            var skillData = [
                {
                    id: 'vietnam',
                    label: '越南經歷',
                    year: '海外拓展',
                    img: '/assets/img/guild/jing/gallery_01.webp',
                    desc: '踏出舒適圈，前往越南工作生活。與當地夥伴共飲、在異鄉深入體驗不同文化，培養出強大的適應力與跨文化敏感度。',
                    x: 12, y: 8
                },
                {
                    id: 'explore',
                    label: '職涯探索',
                    year: '啟程之路',
                    img: '/assets/img/guild/jing/gallery_02.webp',
                    desc: '職涯探索就像站在人生的十字路口，手持指南針尋找方向。每一條路都通往不同的風景，重要的是傾聽內心的聲音。',
                    x: 75, y: 5
                },
                {
                    id: 'challenge',
                    label: '挑戰突破',
                    year: '成長歷練',
                    img: '/assets/img/guild/jing/gallery_03.webp',
                    desc: '如同攀岩者面對峭壁，每一次的職涯轉折都是一場挑戰。堅定的信念與不放棄的勇氣，讓我們能攀越看似不可能的高峰。',
                    x: 8, y: 35
                },
                {
                    id: 'consult',
                    label: '職涯諮詢師',
                    year: '2025',
                    img: '/assets/img/guild/jing/gallery_04.webp',
                    desc: '在 Yourator 2026 AI 職涯博覽會上，正式以職涯諮詢師的身份出現。用過去累積的經歷，照亮他人職涯道路上的每一步。',
                    x: 78, y: 32
                },
                {
                    id: 'identity',
                    label: '自我探索',
                    year: '內在旅程',
                    img: '/assets/img/guild/jing/gallery_05.webp',
                    desc: '「我是誰？」這是每個人職涯中最核心的問題。透過不斷的自我對話與探索，在台灣這片土地上找到屬於自己的定位。',
                    x: 5, y: 68
                },
                {
                    id: 'flow',
                    label: '生命流動',
                    year: '持續演進',
                    img: '/assets/img/guild/jing/gallery_06.webp',
                    desc: '職涯如溪流般持續流動，穿越山林、繞過岩石。不必急於抵達終點，享受沿途的風景，相信水終會找到出路。',
                    x: 82, y: 65
                },
                {
                    id: 'belief',
                    label: '限制性信念',
                    year: '突破枷鎖',
                    img: '/assets/img/guild/jing/gallery_07.webp',
                    desc: '如同馬戲團大象被細繩困住，我們常被過去的經驗與自我設限所束縛。意識到這些無形的枷鎖，是解放自己的第一步。',
                    x: 15, y: 88
                },
                {
                    id: 'timeline',
                    label: '人生時間軸',
                    year: '獨特旅程',
                    img: '/assets/img/guild/jing/gallery_08.webp',
                    desc: '白兔的懷錶提醒我們：每個人都有自己的時間軸。不必與他人比較，沒有孰快孰慢，這是專屬於你、獨一無二的旅程。',
                    x: 72, y: 90
                }
            ];

            // String Connections (curved, not straight - avoiding umbrella shape)
            var connections = [
                { from: 'vietnam', to: 'explore', curve: -25 },
                { from: 'vietnam', to: 'challenge', curve: 35 },
                { from: 'explore', to: 'consult', curve: 20 },
                { from: 'challenge', to: 'identity', curve: -30 },
                { from: 'consult', to: 'flow', curve: 25 },
                { from: 'identity', to: 'belief', curve: -20 },
                { from: 'flow', to: 'timeline', curve: -15 },
                { from: 'belief', to: 'timeline', curve: 30 }
            ];

            // ===== RENDER SKILL CARDS =====
            var wall = document.getElementById('detective-wall');
            var stringSvg = document.getElementById('string-svg');
            var nodePositions = {};

            skillData.forEach(function(skill, index) {
                var card = document.createElement('div');
                card.className = 'evidence-card';
                card.dataset.id = skill.id;

                // Slight random rotation for organic feel
                var rotation = (Math.random() - 0.5) * 8;
                card.style.left = skill.x + '%';
                card.style.top = skill.y + '%';
                card.style.transform = 'translate(-50%, -50%) rotate(' + rotation + 'deg)';

                // Create image element safely
                var img = document.createElement('img');
                img.className = 'evidence-img';
                img.src = skill.img;
                img.alt = skill.label;
                card.appendChild(img);

                // Create content container
                var content = document.createElement('div');
                content.className = 'evidence-content';

                var label = document.createElement('div');
                label.className = 'evidence-label';
                label.textContent = skill.label;
                content.appendChild(label);

                var year = document.createElement('div');
                year.className = 'evidence-year';
                year.textContent = skill.year;
                content.appendChild(year);

                card.appendChild(content);

                // Store skill data for click handler
                card.skillData = skill;
                card.addEventListener('click', function() {
                    openDetail(this.skillData);
                });

                // Staggered entrance animation
                card.style.opacity = '0';
                card.style.transform = 'translate(-50%, -50%) rotate(' + rotation + 'deg) translateY(-30px)';

                (function(cardEl, rot, idx) {
                    setTimeout(function() {
                        cardEl.style.transition = 'all 0.6s cubic-bezier(0.4, 0, 0.2, 1)';
                        cardEl.style.opacity = '1';
                        cardEl.style.transform = 'translate(-50%, -50%) rotate(' + rot + 'deg)';
                    }, 100 + idx * 100);
                })(card, rotation, index);

                wall.appendChild(card);
            });

            // ===== DRAW STRING CONNECTIONS =====
            function drawStrings() {
                var wallRect = wall.getBoundingClientRect();
                stringSvg.setAttribute('viewBox', '0 0 ' + wallRect.width + ' ' + wallRect.height);

                // Clear previous paths
                while (stringSvg.firstChild) {
                    stringSvg.removeChild(stringSvg.firstChild);
                }

                // Get node positions
                var cards = document.querySelectorAll('.evidence-card');
                cards.forEach(function(card) {
                    var rect = card.getBoundingClientRect();
                    var id = card.dataset.id;
                    nodePositions[id] = {
                        x: rect.left - wallRect.left + rect.width / 2,
                        y: rect.top - wallRect.top + 12 // Pin position
                    };
                });

                // Draw curved paths
                connections.forEach(function(conn) {
                    var from = nodePositions[conn.from];
                    var to = nodePositions[conn.to];
                    if (!from || !to) return;

                    var midX = (from.x + to.x) / 2;
                    var midY = (from.y + to.y) / 2;

                    // Calculate perpendicular offset for curve
                    var dx = to.x - from.x;
                    var dy = to.y - from.y;
                    var len = Math.sqrt(dx * dx + dy * dy);
                    var nx = -dy / len;
                    var ny = dx / len;

                    var curveX = midX + nx * conn.curve;
                    var curveY = midY + ny * conn.curve;

                    var path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                    path.setAttribute('d', 'M ' + from.x + ' ' + from.y + ' Q ' + curveX + ' ' + curveY + ' ' + to.x + ' ' + to.y);
                    path.setAttribute('fill', 'none');
                    path.setAttribute('stroke', '#8b2d2d');
                    path.setAttribute('stroke-width', '2.5');
                    path.setAttribute('stroke-linecap', 'round');
                    path.setAttribute('opacity', '0.7');

                    // Add slight shadow
                    path.style.filter = 'drop-shadow(1px 2px 3px rgba(0,0,0,0.4))';

                    stringSvg.appendChild(path);
                });
            }

            // Draw strings after cards are positioned
            setTimeout(drawStrings, 800);
            window.addEventListener('resize', drawStrings);

            // ===== DETAIL PANEL =====
            var detailOverlay = document.getElementById('detail-overlay');
            var detailPanel = document.getElementById('detail-panel');
            var detailClose = document.getElementById('detail-close');
            var detailImg = document.getElementById('detail-img');
            var detailTitle = document.getElementById('detail-title');
            var detailDesc = document.getElementById('detail-desc');

            function openDetail(skill) {
                detailImg.src = skill.img;
                detailImg.alt = skill.label;
                detailTitle.textContent = skill.label;
                detailDesc.textContent = skill.desc;

                detailOverlay.classList.add('active');
                detailPanel.classList.add('active');
            }

            function closeDetail() {
                detailOverlay.classList.remove('active');
                detailPanel.classList.remove('active');
            }

            detailClose.addEventListener('click', closeDetail);
            detailOverlay.addEventListener('click', closeDetail);

            // ===== MAGIC CANVAS (Particles) =====
            var canvas = document.getElementById('magic-canvas');
            var ctx = canvas.getContext('2d');
            var particles = [];
            var mouseX = 0, mouseY = 0;

            function resizeCanvas() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            }

            function MagicParticle(x, y, type) {
                this.x = x !== null && x !== undefined ? x : Math.random() * canvas.width;
                this.y = y !== null && y !== undefined ? y : Math.random() * canvas.height;
                this.type = type || 'star';

                if (this.type === 'rune') {
                    var runeChars = ['☉', '☿', '☽', '♄', '⚗', 'Ω', 'Ψ', 'Δ'];
                    this.char = runeChars[Math.floor(Math.random() * runeChars.length)];
                    this.size = 12 + Math.random() * 10;
                    this.vx = (Math.random() - 0.5) * 0.3;
                    this.vy = (Math.random() - 0.5) * 0.3 - 0.2;
                    this.fade = 0.003;
                } else if (this.type === 'cursor') {
                    this.size = 2 + Math.random() * 3;
                    this.vx = (Math.random() - 0.5) * 2;
                    this.vy = (Math.random() - 0.5) * 2 - 1;
                    this.fade = 0.02;
                } else {
                    // Star
                    this.size = 1 + Math.random() * 2;
                    this.vx = (Math.random() - 0.5) * 0.2;
                    this.vy = (Math.random() - 0.5) * 0.2;
                    this.fade = 0.005 + Math.random() * 0.005;
                }

                this.alpha = 1;
                this.hue = 40 + Math.random() * 20; // Gold range
            }

            MagicParticle.prototype.update = function() {
                this.x += this.vx;
                this.y += this.vy;
                this.alpha -= this.fade;
            };

            MagicParticle.prototype.draw = function() {
                if (this.alpha <= 0) return;

                ctx.save();
                ctx.globalAlpha = this.alpha;

                if (this.type === 'rune') {
                    ctx.font = this.size + 'px serif';
                    ctx.fillStyle = 'hsl(' + this.hue + ', 70%, 65%)';
                    ctx.shadowColor = 'hsl(' + this.hue + ', 70%, 65%)';
                    ctx.shadowBlur = 15;
                    ctx.fillText(this.char, this.x, this.y);
                } else {
                    ctx.fillStyle = 'hsl(' + this.hue + ', 70%, ' + (60 + Math.random() * 20) + '%)';
                    ctx.shadowColor = 'hsl(' + this.hue + ', 70%, 65%)';
                    ctx.shadowBlur = this.type === 'cursor' ? 10 : 5;
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                    ctx.fill();
                }

                ctx.restore();
            };

            // Initialize particles
            for (var i = 0; i < 50; i++) {
                particles.push(new MagicParticle(null, null, 'star'));
            }
            for (var j = 0; j < 5; j++) {
                particles.push(new MagicParticle(null, null, 'rune'));
            }

            // Mouse interaction
            window.addEventListener('mousemove', function(e) {
                mouseX = e.clientX;
                mouseY = e.clientY;

                if (Math.random() < 0.3) {
                    particles.push(new MagicParticle(mouseX, mouseY, 'cursor'));
                }
                if (Math.random() < 0.03) {
                    particles.push(new MagicParticle(mouseX, mouseY, 'rune'));
                }
            });

            // Performance: Only animate when page is visible
            var isCanvasVisible = true;
            var animationId = null;

            function animateParticles() {
                if (!isCanvasVisible || document.hidden) {
                    animationId = requestAnimationFrame(animateParticles);
                    return;
                }

                ctx.clearRect(0, 0, canvas.width, canvas.height);

                // Add new stars occasionally
                if (particles.length < 80 && Math.random() < 0.05) {
                    particles.push(new MagicParticle(null, null, 'star'));
                }
                if (Math.random() < 0.01) {
                    particles.push(new MagicParticle(null, null, 'rune'));
                }

                // Update and draw
                for (var i = particles.length - 1; i >= 0; i--) {
                    particles[i].update();
                    particles[i].draw();

                    if (particles[i].alpha <= 0) {
                        particles.splice(i, 1);
                    }
                }

                animationId = requestAnimationFrame(animateParticles);
            }

            // Pause animation when tab is not visible
            document.addEventListener('visibilitychange', function() {
                if (!document.hidden && !animationId) {
                    animateParticles();
                }
            });

            window.addEventListener('resize', resizeCanvas);
            resizeCanvas();
            animateParticles();

            // ===== GRIMOIRE PAGE NAVIGATION =====
            var currentPage = 1;
            var totalPages = 4;
            var grimoireTabs = document.querySelectorAll('.grimoire-tab');
            var grimoirePages = document.querySelectorAll('.grimoire-page');
            var prevBtn = document.getElementById('prev-page');
            var nextBtn = document.getElementById('next-page');
            var currentPageEl = document.querySelector('.current-page');

            var isAnimating = false;
            var DISSOLVE_DURATION = 800;
            var MATERIALIZE_DURATION = 600;
            var SHARPEN_DURATION = 600;

            function showPage(pageNum, skipAnimation) {
                // Validate page number
                if (pageNum < 1) pageNum = 1;
                if (pageNum > totalPages) pageNum = totalPages;

                // Skip if same page or already animating
                if (pageNum === currentPage && !skipAnimation) return;
                if (isAnimating) return;

                var oldPage = currentPage;
                var newPage = pageNum;

                // Get page elements
                var oldPageEl = document.querySelector('.grimoire-page[data-page="' + oldPage + '"]');
                var newPageEl = document.querySelector('.grimoire-page[data-page="' + newPage + '"]');
                var oldScroll = oldPageEl ? oldPageEl.querySelector('.page-scroll') : null;
                var newScroll = newPageEl ? newPageEl.querySelector('.page-scroll') : null;
                var grimoireBook = document.querySelector('.grimoire-book');

                // Update tabs immediately for better feedback
                grimoireTabs.forEach(function(tab) {
                    tab.classList.remove('active');
                    if (parseInt(tab.dataset.page) === newPage) {
                        tab.classList.add('active');
                    }
                });

                // Update page indicator immediately
                if (currentPageEl) {
                    currentPageEl.textContent = newPage;
                }

                // Update navigation buttons immediately
                if (prevBtn) {
                    prevBtn.disabled = newPage === 1;
                }
                if (nextBtn) {
                    nextBtn.disabled = newPage === totalPages;
                }

                // Skip animation for initial load or if elements missing
                if (skipAnimation || !oldScroll || !newScroll || oldPage === newPage) {
                    grimoirePages.forEach(function(page) {
                        page.classList.remove('active');
                        if (parseInt(page.dataset.page) === newPage) {
                            page.classList.add('active');
                        }
                    });
                    currentPage = newPage;
                    return;
                }

                // Start particle animation sequence
                isAnimating = true;

                // Add transitioning class to book for magic particles
                if (grimoireBook) {
                    grimoireBook.classList.add('transitioning');
                }

                // Step 1: Dissolve current page into particles
                oldScroll.classList.add('dissolving');

                setTimeout(function() {
                    // Step 2: Switch pages and start materializing
                    oldPageEl.classList.remove('active');
                    oldScroll.classList.remove('dissolving');

                    newPageEl.classList.add('active');
                    newScroll.classList.add('materializing');

                    // Step 3: After materialize, start sharpening
                    setTimeout(function() {
                        newScroll.classList.remove('materializing');
                        newScroll.classList.add('sharpening');

                        // Step 4: Clean up after sharpening animation
                        setTimeout(function() {
                            newScroll.classList.remove('sharpening');
                            if (grimoireBook) {
                                grimoireBook.classList.remove('transitioning');
                            }
                            isAnimating = false;
                            currentPage = newPage;
                        }, SHARPEN_DURATION);

                    }, MATERIALIZE_DURATION);

                }, DISSOLVE_DURATION);
            }

            // Tab click handlers
            grimoireTabs.forEach(function(tab) {
                tab.addEventListener('click', function() {
                    var pageNum = parseInt(this.dataset.page);
                    showPage(pageNum);
                });
            });

            // Arrow button handlers
            if (prevBtn) {
                prevBtn.addEventListener('click', function() {
                    showPage(currentPage - 1);
                });
            }

            if (nextBtn) {
                nextBtn.addEventListener('click', function() {
                    showPage(currentPage + 1);
                });
            }

            // Keyboard navigation
            document.addEventListener('keydown', function(e) {
                var grimoireContainer = document.querySelector('.grimoire-container');
                if (!grimoireContainer) return;

                var rect = grimoireContainer.getBoundingClientRect();
                var inView = rect.top < window.innerHeight && rect.bottom > 0;

                if (inView) {
                    if (e.key === 'ArrowLeft') {
                        showPage(currentPage - 1);
                    } else if (e.key === 'ArrowRight') {
                        showPage(currentPage + 1);
                    }
                }
            });

            // Calculate and set uniform height for all pages
            function setUniformPageHeight() {
                var maxHeight = 0;

                // Step 1: Reset all heights and show all pages for measurement
                grimoirePages.forEach(function(page) {
                    var pageScroll = page.querySelector('.page-scroll');
                    if (pageScroll) {
                        pageScroll.style.minHeight = '';
                    }
                    page.classList.add('measuring');
                });

                // Step 2: Measure each page and find the tallest
                grimoirePages.forEach(function(page) {
                    var pageScroll = page.querySelector('.page-scroll');
                    if (pageScroll) {
                        var height = pageScroll.offsetHeight;
                        if (height > maxHeight) {
                            maxHeight = height;
                        }
                    }
                });

                // Step 3: Remove measuring class
                grimoirePages.forEach(function(page) {
                    page.classList.remove('measuring');
                });

                // Step 4: Apply the max height to ALL page scrolls
                if (maxHeight > 0) {
                    grimoirePages.forEach(function(page) {
                        var pageScroll = page.querySelector('.page-scroll');
                        if (pageScroll) {
                            pageScroll.style.minHeight = maxHeight + 'px';
                        }
                    });
                }
            }

            // Recalculate on resize
            var resizeTimeout;
            window.addEventListener('resize', function() {
                clearTimeout(resizeTimeout);
                resizeTimeout = setTimeout(setUniformPageHeight, 200);
            });

            // Initialize height calculation
            setUniformPageHeight();

            // Initialize page (skip animation on first load)
            showPage(1, true);
        });
    </script>
</body>

</html>
