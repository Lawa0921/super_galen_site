---
/**
 * GlobalScripts.astro
 * 全局腳本組件 - 包含所有頁面都需要的基礎腳本
 *
 * 這些腳本這些腳本需要在所有頁面全局載入
 * 現在透過這個組件在需要的頁面中引入
 */
---

<!-- 主題初始化（避免 FOUC） -->
<script is:inline>
  (function() {
    const savedTheme = localStorage.getItem('theme') || 'dark';
    document.documentElement.setAttribute('data-theme', savedTheme);
  })();
</script>

<!-- 遊戲狀態管理系統（需要最先載入） -->
<script src="/scripts/gamestate.js" defer></script>

<!-- 懶載入管理器 -->
<script src="/scripts/lazy-loader.js?v=2" defer></script>

<!-- 安全工具 -->
<script src="/scripts/security-utils.js" defer></script>

<!-- 調試工具 -->
<script src="/scripts/debug-utils.js" defer></script>

<!-- i18n 管理器 -->
<script src="/scripts/i18n-manager.js" defer></script>

<!-- i18n 輔助函數 -->
<script src="/scripts/i18n-helper.js" defer></script>

<!-- 合約配置（內嵌預設值） -->
<script is:inline>
  // 預設配置（當 contracts-config.js 不存在時使用）
  window.ContractsConfig = {
    31337: {
      sgt: null,
      usdt: null,
      deployedAt: null
    },
    137: {
      sgt: null,
      usdt: "0xc2132D05D31c914a87C6611C10748AEb04B58e8F",
      deployedAt: null
    }
  };
</script>
<script is:inline src="/scripts/contracts-config.js"></script>

<!-- 統一錢包管理器 -->
<script src="/scripts/unified-wallet-manager.js" defer></script>

<!-- 簡化 SGT 餘額顯示器 -->
<script src="/scripts/simple-sgt-balance.js" defer></script>

<!-- 網路監控系統 -->
<script src="/scripts/simple-network-monitor.js" defer></script>

<!-- 行動版選單控制器 -->
<script src="/scripts/mobile-menu.js" defer></script>

<!-- 關鍵模組（main.js 初始化時需要） -->
<script src="/scripts/skill-tree-hierarchical.js" defer></script>
<script src="/scripts/inventory.js" defer></script>
<script src="/scripts/inventory-responsive.js" defer></script>
<script src="/scripts/summon-state-machine.js" defer></script>
<script src="/scripts/summon-animation-controller.js" defer></script>
<script src="/scripts/summon.js" defer></script>

<!-- 全站動畫效果 -->
<script src="/scripts/advanced-animations.js" defer></script>

<!-- 主要 JavaScript -->
<script src="/scripts/main.js" defer></script>
<script src="/scripts/cheat.js" defer></script>

<!-- Tab 特定模組將由 LazyLoader 動態載入 -->
<!--
    story: book.js
    achievements: achievements.js
    purchase: sgt-purchase-manager.js, cyber-terminal.js, cyber-audio.js
-->
