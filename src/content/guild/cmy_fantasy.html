<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>原色⭐︎ふぁんたじー | CMY Fantasy | AKIBA LIVE!</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dela+Gothic+One&family=Zen+Maru+Gothic:wght@500;700;900&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <style>
        :root {
            --pop-pink: #ff1493;
            --pop-cyan: #00ffff;
            --pop-yellow: #ffd700;
            --white: #ffffff;
            --black: #222222;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: var(--white);
            color: var(--black);
            font-family: 'Zen Maru Gothic', sans-serif;
            overflow-x: hidden;
            width: 100vw;
            /* Manga Speed Lines Background */
            background-image: repeating-linear-gradient(
                90deg,
                transparent 0px,
                transparent 100px,
                rgba(0, 255, 255, 0.05) 100px,
                rgba(0, 255, 255, 0.05) 102px
            ),
            repeating-linear-gradient(
                0deg,
                transparent 0px,
                transparent 100px,
                rgba(255, 20, 147, 0.05) 100px,
                rgba(255, 20, 147, 0.05) 102px
            );
        }

        #canvas-container {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 0;
            pointer-events: none;
        }

        main {
            position: relative;
            z-index: 10;
            width: 100%;
            overflow: hidden;
        }

        /* --- TYPOGRAPHY --- */
        h1, h2, h3 { font-family: 'Dela Gothic One', sans-serif; text-transform: uppercase; }

        /* --- HERO SECTION --- */
        .hero-section {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .hero-banner {
            background: var(--white);
            border: 8px solid var(--black);
            padding: 3rem 5rem;
            transform: skew(-5deg) rotate(-3deg);
            box-shadow: 15px 15px 0 var(--pop-pink);
            position: relative;
            z-index: 2;
            animation: hero-bounce 2s infinite ease-in-out;
        }

        @keyframes hero-bounce {
            0%, 100% { transform: skew(-5deg) rotate(-3deg) translateY(0); }
            50% { transform: skew(-5deg) rotate(-3deg) translateY(-15px); }
        }

        .hero-title {
            font-size: clamp(3rem, 10vw, 7rem);
            line-height: 0.9;
            color: var(--black);
            -webkit-text-stroke: 3px var(--white); /* Fallback */
            text-shadow: 5px 5px 0 var(--pop-cyan);
        }

        .hero-sub {
            background: var(--pop-yellow);
            color: var(--black);
            font-size: clamp(1.2rem, 3vw, 2rem);
            padding: 0.5rem 1.5rem;
            position: absolute;
            bottom: -20px; right: -30px;
            border: 4px solid var(--black);
            transform: rotate(5deg);
            font-weight: 900;
        }

        /* --- PROFILE CARDS (Trading Card Style) --- */
        .profile-section {
            padding: 6rem 2rem;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 4rem;
        }

        .trading-card {
            width: 320px;
            background: var(--white);
            border: 6px solid var(--black);
            border-radius: 20px;
            padding: 1.5rem;
            position: relative;
            box-shadow: 12px 12px 0 var(--black);
            transition: transform 0.2s;
        }

        .trading-card:hover { transform: translateY(-10px) rotate(2deg); }
        .trading-card.cyan { box-shadow: 12px 12px 0 var(--pop-cyan); }
        .trading-card.magenta { box-shadow: 12px 12px 0 var(--pop-pink); }

        .card-header {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 1rem; border-bottom: 4px dashed #ddd; padding-bottom: 0.5rem;
        }
        .card-rank { font-weight: 900; font-size: 1.5rem; color: var(--pop-yellow); -webkit-text-stroke: 1px var(--black); }
        .card-type { background: var(--black); color: var(--white); padding: 0.2rem 0.6rem; border-radius: 4px; font-weight: bold; font-size: 0.8rem; }

        .card-img-box {
            width: 100%; aspect-ratio: 1;
            background: #eee;
            border: 4px solid var(--black);
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 1rem;
        }
        .card-img-box img { width: 100%; height: 100%; object-fit: cover; }

        .card-name { font-size: 2rem; text-align: center; margin-bottom: 0.5rem; color: var(--black); }

        .card-stats {
            display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem;
            background: rgba(0,0,0,0.05); padding: 0.8rem; border-radius: 8px;
        }
        .stat-box { text-align: center; }
        .stat-val { font-family: 'Dela Gothic One'; font-size: 1.2rem; color: var(--pop-pink); }
        .stat-lbl { font-size: 0.7rem; font-weight: bold; }

        /* --- STICKER DECORATIONS --- */
        .sticker {
            position: absolute;
            background: var(--white);
            border: 3px solid var(--black);
            padding: 0.5rem 1rem;
            font-weight: 900;
            border-radius: 50px;
            box-shadow: 4px 4px 0 rgba(0,0,0,0.2);
            z-index: 5;
            font-size: 0.9rem;
        }
        .sticker.s1 { top: -20px; left: -20px; transform: rotate(-15deg); background: var(--pop-yellow); }
        .sticker.s2 { bottom: -15px; right: -15px; transform: rotate(10deg); background: var(--pop-cyan); }

        /* --- QUEST BOARD --- */
        .quest-section {
            padding: 6rem 2rem;
            text-align: center;
        }

        .quest-board {
            max-width: 900px;
            margin: 0 auto;
            background: var(--pop-pink);
            border: 8px solid var(--black);
            border-radius: 30px;
            padding: 3rem;
            color: var(--white);
            position: relative;
            box-shadow: 0 20px 0 rgba(0,0,0,0.2);
        }

        .quest-board::before {
            content: ''; position: absolute; top: 10px; left: 10px; right: 10px; bottom: 10px;
            border: 4px dashed var(--white); border-radius: 20px; pointer-events: none;
        }

        .quest-title { font-size: 3rem; margin-bottom: 1.5rem; text-shadow: 4px 4px 0 var(--black); }
        .quest-text { font-size: 1.2rem; line-height: 1.8; font-weight: bold; }

        .quest-btn {
            display: inline-block;
            margin-top: 2rem;
            background: var(--pop-yellow);
            color: var(--black);
            padding: 1rem 3rem;
            font-family: 'Dela Gothic One';
            font-size: 1.5rem;
            text-decoration: none;
            border: 4px solid var(--black);
            box-shadow: 8px 8px 0 var(--black);
            transition: 0.1s;
            transform: rotate(-2deg);
        }
        .quest-btn:hover { transform: translate(4px, 4px) rotate(-2deg); box-shadow: 0 0 0 var(--black); }

        /* --- GALLERY GRID --- */
        .gallery-section { padding: 4rem 2rem; }
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            max-width: 1000px;
            margin: 0 auto;
        }
        .gallery-cell {
            background: var(--black);
            padding: 0.5rem;
            transform: rotate(var(--r));
            transition: 0.3s;
        }
        .gallery-cell:hover { transform: scale(1.1) rotate(0deg); z-index: 10; }
        .gallery-cell img { width: 100%; height: 100%; object-fit: cover; border: 2px solid var(--white); }

        /* --- NAV --- */
        .nav-back {
            position: fixed; top: 1.5rem; left: 1.5rem;
            background: var(--black); color: var(--pop-yellow);
            padding: 0.5rem 1.2rem;
            font-weight: 900; text-decoration: none;
            border: 3px solid var(--pop-yellow);
            z-index: 100;
            transform: skew(-10deg);
        }

        /* --- LOADER --- */
        #loader {
            position: fixed; inset: 0; background: var(--pop-cyan); z-index: 9999;
            display: flex; justify-content: center; align-items: center;
            transition: transform 0.6s cubic-bezier(0.8, 0, 0.2, 1);
            transform-origin: bottom;
        }
        .loader-text { font-family: 'Dela Gothic One'; font-size: 4rem; color: var(--white); -webkit-text-stroke: 2px var(--black); }

    </style>
</head>
<body>

    <div id="loader"><div class="loader-text">READY?</div></div>
    <a href="/guild/" class="nav-back">← BACK</a>
    <div id="canvas-container"></div>

    <main>
        <!-- Hero -->
        <section class="hero-section">
            <div class="hero-banner">
                <h1 class="hero-title">CMY<br>FANTASY</h1>
                <div class="hero-sub">AKIBA IDOL PROJECT</div>
            </div>
        </section>

        <!-- Profiles -->
        <section class="profile-section">
            <!-- Xiao Miao -->
            <div class="trading-card cyan">
                <div class="sticker s1">Cute!</div>
                <div class="card-header">
                    <span class="card-rank">SSR</span>
                    <span class="card-type">IDOL</span>
                </div>
                <div class="card-img-box">
                    <img src="/assets/img/guild/cmy_fantasy/gallery_1.webp" alt="Xiao Miao">
                </div>
                <h2 class="card-name">筱喵</h2>
                <div class="card-stats">
                    <div class="stat-box">
                        <div class="stat-val">99</div>
                        <div class="stat-lbl">MOE</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-val">MAX</div>
                        <div class="stat-lbl">EAT</div>
                    </div>
                </div>
                <p style="margin-top:1rem; text-align:center; font-weight:bold;">
                    吃貨擔當！<br>希望能用笑容感染每一個觀眾！
                </p>
            </div>

            <!-- Ting Ting -->
            <div class="trading-card magenta">
                <div class="sticker s2">Pop!</div>
                <div class="card-header">
                    <span class="card-rank">SSR</span>
                    <span class="card-type">DANCE</span>
                </div>
                <div class="card-img-box">
                    <img src="/assets/img/guild/cmy_fantasy/gallery_2.webp" alt="Ting Ting">
                </div>
                <h2 class="card-name">婷婷</h2>
                <div class="card-stats">
                    <div class="stat-box">
                        <div class="stat-val">100</div>
                        <div class="stat-lbl">ENERGY</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-val">MAX</div>
                        <div class="stat-lbl">POWER</div>
                    </div>
                </div>
                <p style="margin-top:1rem; text-align:center; font-weight:bold;">
                    舞蹈擔當！<br>讓我們一起High翻全場吧！
                </p>
            </div>
        </section>

        <!-- Quest -->
        <section class="quest-section">
            <div class="quest-board">
                <h2 class="quest-title">PRODUCER WANTED!</h2>
                <p class="quest-text">
                    我們是「原色⭐︎ふぁんたじー」！<br>
                    來自高雄的雙人偶像系 Cosplay 表演團體。<br>
                    致力於呈現創意與實力之表演內容！<br><br>
                    (若可以放影片的話，可再提供給您 ><)
                </p>
                <a href="https://www.instagram.com/cmy_fantasy/" target="_blank" class="quest-btn">JOIN US!</a>
            </div>
        </section>

        <!-- Gallery -->
        <section class="gallery-section">
            <h2 style="text-align:center; margin-bottom:2rem; font-size:2.5rem; -webkit-text-stroke:1px var(--black);">LIVE SNAPSHOTS</h2>
            <div class="gallery-grid">
                <div class="gallery-cell" style="--r:2deg"><img src="/assets/img/guild/cmy_fantasy/gallery_1.webp"></div>
                <div class="gallery-cell" style="--r:-1deg"><img src="/assets/img/guild/cmy_fantasy/gallery_2.webp"></div>
                <div class="gallery-cell" style="--r:3deg"><img src="/assets/img/guild/cmy_fantasy/gallery_3.webp"></div>
                <div class="gallery-cell" style="--r:-2deg"><img src="/assets/img/guild/cmy_fantasy/gallery_4.webp"></div>
                <div class="gallery-cell" style="--r:1deg"><img src="/assets/img/guild/cmy_fantasy/gallery_5.webp"></div>
                <div class="gallery-cell" style="--r:-3deg"><img src="/assets/img/guild/cmy_fantasy/gallery_6.webp"></div>
                <div class="gallery-cell" style="--r:2deg"><img src="/assets/img/guild/cmy_fantasy/gallery_7.webp"></div>
                <div class="gallery-cell" style="--r:-1deg"><img src="/assets/img/guild/cmy_fantasy/gallery_8.webp"></div>
            </div>
        </section>

        <div style="height:20vh"></div>
    </main>

    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
            }
        }
    </script>

    <script type="module">
        import * as THREE from 'three';
        import { EffectComposer } from 'three/addons/postprocessing/EffectComposer.js';
        import { RenderPass } from 'three/addons/postprocessing/RenderPass.js';
        import { UnrealBloomPass } from 'three/addons/postprocessing/UnrealBloomPass.js';

        // --- Scene ---
        const container = document.getElementById('canvas-container');
        const scene = new THREE.Scene();
        // White background for pop feel
        scene.background = new THREE.Color(0xffffff);

        const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 1, 1000);
        camera.position.set(0, 2, 15);

        const renderer = new THREE.WebGLRenderer({ antialias: false });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 1.5));
        container.appendChild(renderer.domElement);

        // --- Post Processing (Bloom for glow sticks) ---
        const composer = new EffectComposer(renderer);
        const renderPass = new RenderPass(scene, camera);
        composer.addPass(renderPass);

        const bloomPass = new UnrealBloomPass(new THREE.Vector2(window.innerWidth, window.innerHeight), 1.5, 0.4, 0.85);
        bloomPass.threshold = 0.5;
        bloomPass.strength = 1.0;
        bloomPass.radius = 0.5;
        composer.addPass(bloomPass);

        // --- Floating Music Notes (Toon Shader) ---
        const noteGroup = new THREE.Group();
        const noteGeo = new THREE.TorusGeometry(1, 0.3, 16, 32); // Simple ring note representation
        const noteMat = new THREE.MeshToonMaterial({ color: 0xff1493 }); // Pop Pink
        const noteMat2 = new THREE.MeshToonMaterial({ color: 0x00ffff }); // Pop Cyan

        for(let i=0; i<30; i++) {
            const mesh = new THREE.Mesh(noteGeo, i%2==0 ? noteMat : noteMat2);
            mesh.position.set(
                (Math.random()-0.5)*40,
                (Math.random()-0.5)*30,
                (Math.random()-0.5)*20
            );
            mesh.rotation.x = Math.random()*Math.PI;
            mesh.rotation.y = Math.random()*Math.PI;
            mesh.scale.setScalar(Math.random()*0.5 + 0.5);
            noteGroup.add(mesh);
        }
        scene.add(noteGroup);

        // --- "Penlight" Grid Floor ---
        const floorGroup = new THREE.Group();
        const geometry = new THREE.CylinderGeometry(0.1, 0.1, 1, 8);
        const material = new THREE.MeshBasicMaterial({ color: 0xffd700 }); // Yellow glow sticks

        for (let i = 0; i < 100; i++) {
            const mesh = new THREE.Mesh(geometry, material);
            mesh.position.x = (Math.random() - 0.5) * 60;
            mesh.position.y = -5;
            mesh.position.z = (Math.random() - 0.5) * 40;
            mesh.userData = { offset: Math.random() * 100, speed: Math.random() * 0.1 + 0.05 };
            floorGroup.add(mesh);
        }
        scene.add(floorGroup);

        // --- Lights ---
        const dirLight = new THREE.DirectionalLight(0xffffff, 1);
        dirLight.position.set(5, 10, 7);
        scene.add(dirLight);
        scene.add(new THREE.AmbientLight(0xffffff, 0.8));

        // --- Animate ---
        function animate() {
            requestAnimationFrame(animate);
            const time = Date.now() * 0.002;

            // Rotate Notes
            noteGroup.children.forEach(note => {
                note.rotation.x += 0.02;
                note.rotation.y += 0.01;
            });
            noteGroup.position.y = Math.sin(time) * 0.5;

            // Wave Penlights
            floorGroup.children.forEach(stick => {
                stick.position.y = -5 + Math.sin(time * stick.userData.speed + stick.userData.offset) * 1.5;
                stick.scale.y = 1 + Math.sin(time * 5) * 0.5; // Pulse
            });

            // Camera Sway
            camera.position.x = Math.sin(time * 0.2) * 1;
            camera.lookAt(0, 0, 0);

            composer.render();
        }
        animate();

        // --- GSAP ---
        window.addEventListener('load', () => {
            const loader = document.getElementById('loader');
            loader.style.transform = 'scaleY(0)';
            setTimeout(()=>loader.remove(), 600);

            gsap.registerPlugin(ScrollTrigger);

            gsap.from(".trading-card", {
                scrollTrigger: { trigger: ".profile-section", start: "top 80%" },
                y: 100, opacity: 0, stagger: 0.2, duration: 0.8, ease: "back.out(1.7)"
            });

            gsap.from(".gallery-cell", {
                scrollTrigger: { trigger: ".gallery-section", start: "top 80%" },
                scale: 0, rotation: 180, stagger: 0.05, duration: 0.5, ease: "back.out(1.5)"
            });
        });

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
            composer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>
