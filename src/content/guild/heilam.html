<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HEILAM | CYBER_GARDEN</title>
    <!-- GSAP Global -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <!-- Three.js Import Map -->
    <script type="importmap">
        {
            "imports": {
                "three": "https://cdnjs.cloudflare.com/ajax/libs/three.js/0.160.0/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
            }
        }
    </script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Syncopate:wght@400;700&family=Zen+Maru+Gothic:wght@300;500;700;900&display=swap');

        :root {
            --neon-green: #39ff14;
            --dark-green: #002b0e;
            --black: #050505;
            --glass: rgba(255, 255, 255, 0.03);
            --border: rgba(57, 255, 20, 0.3);
        }

        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            background-color: var(--black);
            color: #fff;
            font-family: 'Zen Maru Gothic', sans-serif;
            overflow-x: hidden;
        }

        /* Canvas Layers */
        #canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
        }

        /* Nav */
        .nav-back {
            position: fixed;
            top: 2rem;
            left: 2rem;
            z-index: 100;
            color: var(--neon-green);
            text-decoration: none;
            font-family: 'Syncopate', sans-serif;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
            mix-blend-mode: difference;
        }

        /* Scroll Content */
        .content-scroll {
            position: relative;
            z-index: 10;
            width: 100%;
        }

        .section {
            min-height: 100vh;
            width: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 4rem 2rem;
            box-sizing: border-box;
            position: relative;
        }

        /* Typography (Explosive Style) */
        h1.mega-title {
            font-family: 'Syncopate', sans-serif;
            font-weight: 700;
            font-size: clamp(4rem, 15vw, 12rem);
            line-height: 0.8;
            color: transparent;
            -webkit-text-stroke: 2px var(--neon-green);
            text-transform: uppercase;
            position: relative;
            z-index: 2;
            pointer-events: none;
            mix-blend-mode: exclusion;
        }

        h1.mega-title span {
            display: block;
        }

        .glitch-text {
            position: relative;
        }

        .glitch-text::before, .glitch-text::after {
            content: attr(data-text);
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            opacity: 0.8;
        }

        .glitch-text::before {
            color: #ff00ff;
            z-index: -1;
            clip-path: polygon(0 0, 100% 0, 100% 45%, 0 45%);
            transform: translate(-2px, -2px);
            animation: glitch-anim-1 2s infinite linear alternate-reverse;
        }

        .glitch-text::after {
            color: #00ffff;
            z-index: -2;
            clip-path: polygon(0 60%, 100% 60%, 100% 100%, 0 100%);
            transform: translate(2px, 2px);
            animation: glitch-anim-2 2s infinite linear alternate-reverse;
        }

        @keyframes glitch-anim-1 {
            0% { clip-path: inset(20% 0 80% 0); transform: translate(-2px,0); }
            20% { clip-path: inset(60% 0 10% 0); transform: translate(2px,0); }
            40% { clip-path: inset(40% 0 50% 0); transform: translate(-2px,0); }
            60% { clip-path: inset(80% 0 5% 0); transform: translate(2px,0); }
            80% { clip-path: inset(10% 0 60% 0); transform: translate(-2px,0); }
            100% { clip-path: inset(30% 0 30% 0); transform: translate(2px,0); }
        }
        @keyframes glitch-anim-2 {
            0% { clip-path: inset(10% 0 60% 0); transform: translate(2px,0); }
            20% { clip-path: inset(30% 0 20% 0); transform: translate(-2px,0); }
            40% { clip-path: inset(10% 0 80% 0); transform: translate(2px,0); }
            60% { clip-path: inset(70% 0 10% 0); transform: translate(-2px,0); }
            80% { clip-path: inset(50% 0 30% 0); transform: translate(2px,0); }
            100% { clip-path: inset(0 0 70% 0); transform: translate(-2px,0); }
        }

        /* Layout Elements */
        .bio-box {
            border: 1px solid var(--border);
            background: rgba(0,0,0,0.8);
            backdrop-filter: blur(10px);
            padding: 2rem;
            max-width: 500px;
            margin-top: 2rem;
            position: relative;
        }

        .bio-box::before {
            content: '';
            position: absolute;
            top: -5px; left: -5px;
            width: 20px; height: 20px;
            border-top: 2px solid var(--neon-green);
            border-left: 2px solid var(--neon-green);
        }

        .bio-box::after {
            content: '';
            position: absolute;
            bottom: -5px; right: -5px;
            width: 20px; height: 20px;
            border-bottom: 2px solid var(--neon-green);
            border-right: 2px solid var(--neon-green);
        }

        h2.section-title {
            font-family: 'Syncopate', sans-serif;
            font-size: 2rem;
            color: var(--neon-green);
            margin-bottom: 1rem;
            text-transform: uppercase;
            letter-spacing: 5px;
        }

        p.text-body {
            font-size: 1rem;
            line-height: 1.8;
            color: #ddd;
            margin-bottom: 1rem;
        }

        .highlight {
            color: var(--neon-green);
            font-weight: 700;
            text-shadow: 0 0 10px var(--neon-green);
        }

        /* Horizontal Scroll Section */
        #h-scroll-container {
            width: 400%; /* 4 sections wide */
            height: 100vh;
            display: flex;
            flex-wrap: nowrap;
        }

        .h-panel {
            width: 100vw;
            height: 100vh;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            padding: 0 5vw;
            box-sizing: border-box;
        }

        /* Images */
        .img-container {
            width: 400px;
            height: 500px; /* Portrait */
            position: relative;
            overflow: hidden;
            border: 1px solid var(--neon-green);
            margin: 0 2rem;
        }

        .img-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: grayscale(100%) contrast(1.2);
            transition: all 0.5s ease;
        }

        .img-container:hover img {
            filter: grayscale(0%) contrast(1);
            transform: scale(1.1);
        }

        /* Floating Elements */
        .floating-turtle {
            position: absolute;
            font-size: 10rem;
            color: var(--neon-green);
            opacity: 0.1;
            z-index: 0;
            pointer-events: none;
            filter: blur(2px);
        }

        /* Footer */
        .footer-glitch {
            text-align: center;
            margin-top: 4rem;
            font-family: 'Syncopate', sans-serif;
            font-size: 1.5rem;
            color: var(--neon-green);
        }

        .social-bar {
            display: flex;
            gap: 2rem;
            margin-top: 2rem;
            font-size: 2rem;
        }

        .social-link {
            color: #fff;
            transition: color 0.3s;
        }
        .social-link:hover {
            color: var(--neon-green);
            text-shadow: 0 0 20px var(--neon-green);
        }

        /* Loader */
        #loader {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: #000;
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--neon-green);
            font-family: 'Syncopate', sans-serif;
            font-size: 2rem;
            letter-spacing: 5px;
        }

    </style>
</head>
<body>

    <div id="loader">INITIALIZING SYSTEM...</div>

    <a href="/guild/" class="nav-back">&lt; GUILD HALL</a>
    <div id="canvas-container"></div>

    <div class="content-scroll">

        <!-- Hero: Huge Type -->
        <div class="section" id="hero">
            <h1 class="mega-title glitch-text" data-text="HEILAM">
                <span>HEI</span>
                <span>LAM</span>
            </h1>
            <div class="bio-box">
                <p class="text-body" style="font-family: 'Syncopate'; font-size: 0.8rem; margin-bottom: 0;">
                    // CLASS: MUSICIAN<br>
                    // LOC: TOKYO, JP<br>
                    // STATUS: DREAMING
                </p>
            </div>
        </div>

        <!-- Section 1: Introduction (Centered) -->
        <div class="section" id="intro">
            <div class="bio-box" style="max-width: 800px; text-align: center;">
                <h2 class="section-title">ORIGIN_DATA</h2>
                <p class="text-body" style="font-size: 1.2rem;">
                    我是 <span class="highlight">Heilam</span>，一個在日本生活的香港音樂人。<br>
                    大學唸古典聲樂，曾經以合唱團成員在歐亞各地巡演。
                </p>
                <div class="img-container" style="width: 200px; height: 200px; margin: 2rem auto; border-radius: 50%;">
                    <img src="/assets/img/guild/heilam/avatar.webp" alt="Avatar">
                </div>
            </div>
        </div>

        <!-- Horizontal Scroll Section (Pinned) -->
        <div id="h-scroll-wrapper" style="width: 100%; overflow: hidden; height: 100vh;">
            <div id="h-scroll-container">

                <!-- Panel 1: The Shift -->
                <div class="h-panel">
                    <div style="flex: 1; padding: 4rem;">
                        <h2 class="section-title" style="font-size: 4rem; line-height: 1;">THE<br>SHIFT</h2>
                    </div>
                    <div class="img-container">
                        <img src="/assets/img/guild/heilam/photo1.webp" alt="Japan Life">
                    </div>
                    <div class="bio-box" style="margin-left: 2rem;">
                        <p class="text-body">
                            感歎 <span class="highlight">人生苦短</span>，想在世界末日前想完成自己在日本唸音樂的夢想。
                        </p>
                        <p class="text-body">
                            毅然決然放棄在香港正在準備起步的表演事業，來到日本的專門學校修讀了流行唱歌。
                        </p>
                    </div>
                </div>

                <!-- Panel 2: Current Life -->
                <div class="h-panel">
                    <div class="bio-box" style="margin-right: 2rem;">
                        <h2 class="section-title">CURRENT_STATE</h2>
                        <p class="text-body">
                            現在會做 <span class="highlight">街頭演出</span>、錄音指導、鍵盤手之類的~<br>
                            每一個人生階段都在不同的音樂和文化藝術中度過✨
                        </p>
                    </div>
                     <div class="img-container">
                        <img src="/assets/img/guild/heilam/photo2.webp" alt="Works">
                    </div>
                </div>

                <!-- Panel 3: Dream -->
                <div class="h-panel">
                     <i class="fas fa-heart-pulse floating-turtle" style="top: 20%; left: 10%;"></i>
                     <div class="bio-box" style="max-width: 600px; text-align: center;">
                        <h2 class="section-title">NEW_DREAM</h2>
                        <p class="text-body" style="font-size: 1.5rem;">
                            希望每一個人都可以擁有<span class="highlight">健康的聲音</span>。
                        </p>
                        <p class="text-body">
                            比起變的有名，更享受每一次有不認識的人聽到我的聲音而駐足停留...
                        </p>
                    </div>
                </div>

                 <!-- Panel 4: Footer -->
                <div class="h-panel">
                    <div style="text-align: center;">
                        <h1 class="mega-title" style="font-size: 5rem;">CONTACT</h1>
                        <div class="social-bar" style="justify-content: center;">
                            <a href="https://www.threads.net/@heilamt_music_turtledaihub" target="_blank" class="social-link"><i class="fa-brands fa-threads"></i></a>
                            <a href="https://www.instagram.com/heilamt_music_turtledaihub/" target="_blank" class="social-link"><i class="fab fa-instagram"></i></a>
                        </div>
                        <div class="footer-glitch" style="font-size: 0.8rem; margin-top: 2rem;">
                             MADE WITH <i class="fa-solid fa-heart highlight"></i> BY SUPERGALEN'S DUNGEON
                        </div>
                    </div>
                </div>

            </div>
        </div>

    </div>

    <!-- Script -->
    <script type="module">
        import * as THREE from 'three';
        import { EffectComposer } from 'three/addons/postprocessing/EffectComposer.js';
        import { RenderPass } from 'three/addons/postprocessing/RenderPass.js';
        import { UnrealBloomPass } from 'three/addons/postprocessing/UnrealBloomPass.js';

        // --- Loader ---
        window.addEventListener('load', () => {
            const loader = document.getElementById('loader');
            gsap.to(loader, { opacity: 0, duration: 1, onComplete: () => loader.style.display = 'none' });

            // GSAP Horizontal Scroll
            const container = document.getElementById('h-scroll-container');
            const wrapper = document.getElementById('h-scroll-wrapper');

            if(container && wrapper) {
                gsap.to(container, {
                    x: () => -(container.scrollWidth - document.documentElement.clientWidth) + "px",
                    ease: "none",
                    scrollTrigger: {
                        trigger: wrapper,
                        pin: true,
                        scrub: 1,
                        end: () => "+=" + container.scrollWidth,
                        invalidateOnRefresh: true
                    }
                });
            }
        });

        // --- Three.js Setup (Neon Cyber Garden) ---
        const container = document.getElementById('canvas-container');
        const scene = new THREE.Scene();
        scene.fog = new THREE.FogExp2(0x000000, 0.03); // Deep black fog

        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(0, 2, 10);

        const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: false }); // Antialias off for post-processing performance
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 1.5));
        container.appendChild(renderer.domElement);

        // --- Post Processing (BLOOM) ---
        const renderScene = new RenderPass(scene, camera);

        const bloomPass = new UnrealBloomPass(new THREE.Vector2(window.innerWidth, window.innerHeight), 1.5, 0.4, 0.85);
        bloomPass.threshold = 0;
        bloomPass.strength = 2.0; // High bloom for neon effect
        bloomPass.radius = 0.5;

        const composer = new EffectComposer(renderer);
        composer.addPass(renderScene);
        composer.addPass(bloomPass);

        // --- Objects ---

        // 1. Digital Grass (Instanced LineSegments)
        // Creating a field of vertical lines that sway
        const grassCount = 2000;
        const grassGeo = new THREE.BufferGeometry();

        // Simple line: (0,0,0) to (0,1,0)
        const linePositions = new Float32Array([0, 0, 0, 0, 1.5, 0]);
        grassGeo.setAttribute('position', new THREE.BufferAttribute(linePositions, 3));

        const grassMat = new THREE.LineBasicMaterial({ color: 0x39ff14, transparent: true, opacity: 0.6 });

        const grassField = new THREE.InstancedMesh(grassGeo, grassMat, grassCount);
        const dummy = new THREE.Object3D();

        const grassData = []; // Store phase/speed for animation

        for(let i=0; i<grassCount; i++) {
            const x = (Math.random() - 0.5) * 60;
            const z = (Math.random() - 0.5) * 60 - 10; // Bias towards back

            dummy.position.set(x, -2, z);

            // Random scale (height)
            const s = Math.random() * 2 + 0.5;
            dummy.scale.set(1, s, 1);

            dummy.updateMatrix();
            grassField.setMatrixAt(i, dummy.matrix);

            grassData.push({
                x: x, z: z, s: s,
                phase: Math.random() * Math.PI * 2,
                speed: Math.random() * 2 + 1
            });
        }
        scene.add(grassField);

        // 2. Cyber Turtles (Floating Icosahedrons - "Shells")
        const turtleGroup = new THREE.Group();
        scene.add(turtleGroup);

        const shellGeo = new THREE.IcosahedronGeometry(1, 1); // Hexagonal look
        const shellMat = new THREE.MeshBasicMaterial({
            color: 0x39ff14,
            wireframe: true,
            transparent: true,
            opacity: 0.3
        });

        // Add a "Core" to the turtle
        const coreGeo = new THREE.SphereGeometry(0.3, 8, 8);
        const coreMat = new THREE.MeshBasicMaterial({ color: 0xffffff });

        const turtles = [];
        for(let i=0; i<8; i++) {
            const tGroup = new THREE.Group();

            const shell = new THREE.Mesh(shellGeo, shellMat);
            tGroup.add(shell);

            const core = new THREE.Mesh(coreGeo, coreMat);
            tGroup.add(core);

            tGroup.position.set(
                (Math.random() - 0.5) * 40,
                (Math.random() - 0.5) * 20,
                (Math.random() - 0.5) * 30 - 10
            );

            turtleGroup.add(tGroup);
            turtles.push({
                mesh: tGroup,
                rotSpeed: (Math.random() - 0.5) * 0.02,
                floatSpeed: Math.random() * 0.01 + 0.005,
                floatOffset: Math.random() * 10
            });
        }

        // --- Interaction ---
        let mouseX = 0;
        let mouseY = 0;
        let targetX = 0;
        let targetY = 0;

        window.addEventListener('mousemove', (e) => {
            mouseX = (e.clientX / window.innerWidth) * 2 - 1;
            mouseY = -(e.clientY / window.innerHeight) * 2 + 1;
        });

        // --- Animation Loop ---
        const clock = new THREE.Clock();

        function animate() {
            // requestAnimationFrame(animate); // Managed by loop below

            const time = clock.getElapsedTime();

            // 1. Animate Grass (Wind Effect)
            for(let i=0; i<grassCount; i++) {
                const d = grassData[i];

                // Sway based on noise/sine
                const sway = Math.sin(time * d.speed + d.phase) * 0.2;
                const swayZ = Math.cos(time * d.speed * 0.7 + d.phase) * 0.2;

                // React to mouse (Repulsion)
                // Simplified: Just push away if close to center line (camera lookat)
                // Actually difficult with InstancedMesh without ShaderMaterial or rewriting matrices every frame
                // We will rewrite matrices for the "Explosive" feel, performance be damned (it's only 2000 lines)

                dummy.position.set(d.x, -2, d.z);
                dummy.scale.set(1, d.s, 1);

                // Apply rotation (sway)
                dummy.rotation.z = sway;
                dummy.rotation.x = swayZ;

                dummy.updateMatrix();
                grassField.setMatrixAt(i, dummy.matrix);
            }
            grassField.instanceMatrix.needsUpdate = true;

            // 2. Animate Turtles
            turtles.forEach(t => {
                t.mesh.rotation.x += t.rotSpeed;
                t.mesh.rotation.y += t.rotSpeed;
                t.mesh.position.y += Math.sin(time + t.floatOffset) * t.floatSpeed;
            });

            // 3. Camera Movement (Mouse Parallax)
            targetX = mouseX * 2; // Range -2 to 2
            targetY = mouseY * 2;

            camera.position.x += (targetX - camera.position.x) * 0.05;
            camera.position.y += (targetY + 2 - camera.position.y) * 0.05;
            camera.lookAt(0, 0, -10);

            composer.render();
            requestAnimationFrame(animate);
        }
        animate();

        // Resize
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
            composer.setSize(window.innerWidth, window.innerHeight);
        });

    </script>
</body>
</html>
