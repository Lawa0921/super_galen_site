<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leya | Crystalline Journey</title>
    <meta name="description" content="A brave heart drifting in the universe. Rational yet emotional.">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@300;500;700&family=Cormorant+Garamond:wght@300;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <!-- Libraries -->
    <!-- p5.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js"></script>
    <!-- GSAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <style>
        :root {
            --bg-color: #f9f9f9;
            --text-color: #5a5a5a;
            --accent-gold: #d4af37;
            --accent-blue: #a8d0e6;
            --glass-bg: rgba(255, 255, 255, 0.6);
            --glass-border: rgba(255, 255, 255, 0.8);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Noto Serif TC', serif;
            overflow-x: hidden;
            width: 100vw;
        }

        /* --- Backgrounds --- */
        #p5-container {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 0;
            pointer-events: none; /* Let clicks pass */
        }

        /* --- UI Overlay --- */
        main {
            position: relative;
            z-index: 10;
        }

        .clickable {
            pointer-events: auto;
        }

        /* Sections are spaced out to allow scrolling to drive the crystal */
        section {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center; /* Center content generally */
            padding: 4rem 2rem;
            position: relative;
            pointer-events: none; /* Passthrough for scroll */
        }

        .container {
            width: 100%;
            max-width: 1000px;
            margin: 0 auto;
            pointer-events: auto; /* Content is interactive */
        }

        /* --- Typography --- */
        h1, h2, h3 {
            font-family: 'Cormorant Garamond', serif;
            font-weight: 300;
            letter-spacing: 0.05em;
        }

        .hero-title {
            font-size: clamp(3rem, 8vw, 6rem);
            color: var(--text-color);
            text-transform: uppercase;
            letter-spacing: 0.2em;
            margin-bottom: 0.5rem;
            text-align: center;
            mix-blend-mode: multiply;
        }

        .hero-subtitle {
            font-size: 1.2rem;
            color: var(--accent-gold);
            letter-spacing: 0.3em;
            text-align: center;
            text-transform: uppercase;
        }

        /* --- Content Cards (Light Glass) --- */
        .content-card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            padding: 3rem;
            position: relative;
            margin: 2rem 0;
            box-shadow: 0 20px 60px rgba(168, 208, 230, 0.2); /* Soft Blue Shadow */
            border-radius: 2px;
            opacity: 0; /* Handled by GSAP */
            transform: translateY(30px);
        }

        /* Decorative Corner Lines */
        .content-card::before, .content-card::after {
            content: ''; position: absolute; width: 20px; height: 20px;
            border: 1px solid var(--accent-gold); transition: all 0.5s ease;
        }
        .content-card::before { top: 10px; left: 10px; border-right: none; border-bottom: none; }
        .content-card::after { bottom: 10px; right: 10px; border-left: none; border-top: none; }

        .content-card:hover::before { top: 5px; left: 5px; }
        .content-card:hover::after { bottom: 5px; right: 5px; }

        .section-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        .section-title {
            font-size: 2rem;
            color: var(--text-color);
            position: relative;
            display: inline-block;
            padding-bottom: 1rem;
        }
        .section-title::after {
            content: ''; position: absolute; bottom: 0; left: 50%; transform: translateX(-50%);
            width: 40px; height: 1px; background: var(--accent-gold);
        }

        p {
            font-size: 1.1rem;
            line-height: 2.2;
            margin-bottom: 1.5rem;
            color: #666;
            text-align: justify;
        }

        .highlight {
            background: linear-gradient(120deg, rgba(212, 175, 55, 0.15) 0%, rgba(212, 175, 55, 0.15) 100%);
            padding: 0 4px;
            color: #333;
        }

        /* --- Avatar --- */
        .avatar-frame {
            width: 200px; height: 200px;
            margin: 0 auto 2rem;
            position: relative;
            padding: 10px;
            background: #fff;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border-radius: 50%; /* Circle for contrast with cubes */
        }
        .avatar-img {
            width: 100%; height: 100%;
            border-radius: 50%;
            object-fit: cover;
            filter: sepia(10%);
        }

        /* --- Footer --- */
        footer {
            padding: 6rem 0;
            text-align: center;
            position: relative;
            z-index: 10;
        }
        .social-btn {
            display: inline-flex;
            width: 50px; height: 50px;
            justify-content: center; align-items: center;
            font-size: 1.2rem;
            color: var(--text-color);
            margin: 0 1rem;
            text-decoration: none;
            border: 1px solid #ddd;
            border-radius: 50%;
            transition: all 0.3s;
            background: #fff;
        }
        .social-btn:hover {
            border-color: var(--accent-gold);
            color: var(--accent-gold);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(212, 175, 55, 0.2);
        }

        /* --- Nav --- */
        .nav-back {
            position: fixed; top: 2rem; left: 2rem; z-index: 100;
            color: var(--text-color); text-decoration: none;
            font-family: 'Cormorant Garamond'; font-size: 1.2rem; font-style: italic;
            opacity: 0.7; transition: opacity 0.3s;
        }
        .nav-back:hover { opacity: 1; color: var(--accent-gold); }

        /* Loader */
        #loader {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #fff; z-index: 9999;
            display: flex; justify-content: center; align-items: center;
            color: var(--accent-gold); font-family: 'Cormorant Garamond';
            letter-spacing: 0.2em;
        }

        @media (max-width: 768px) {
            .hero-title { font-size: 3rem; }
            .content-card { padding: 2rem 1.5rem; }
            section { padding: 6rem 1.5rem; } /* More space for crystal visibility */
        }
    </style>
</head>
<body>

    <div id="loader">CRYSTALLIZING...</div>

    <a href="/guild/" class="nav-back clickable">Back to Guild</a>

    <div id="p5-container"></div>

    <main>
        <!-- SCROLL MARKERS for GSAP / p5 Sync -->
        <!-- We use long sections to allow the crystal to rotate as we scroll -->

        <!-- Section 1: Hero -->
        <section id="sec-hero">
            <div class="container hero-content">
                <div class="avatar-frame">
                    <img src="/assets/img/guild/leya/avatar.webp" class="avatar-img">
                </div>
                <h1 class="hero-title">LEYA</h1>
                <div class="hero-subtitle">The Crystalline Journey</div>
            </div>
        </section>

        <!-- Section 2: Bio (Text mapping to Cube Face 1) -->
        <section id="sec-bio">
            <div class="container">
                <div class="content-card">
                    <div class="section-header">
                        <h2 class="section-title">Refraction</h2>
                    </div>
                    <p>
                        我是 <span class="highlight">Leya</span>。30歲以前，我有三分之一的時間漂泊在海外。當那段旅程暫告段落，回到台灣後，內心經歷了巨大的衝擊與重新適應。
                    </p>
                    <p>
                        像一顆原石被重新打磨，我無婚姻、無子女、無房無車，但擁有一顆<span class="highlight">勇敢的心</span>。
                        花了一年的時間慢慢調適，終於在混亂中看見了光折射的方向。
                    </p>
                </div>
            </div>
        </section>

        <!-- Section 3: Services (Text mapping to Cube Face 2) -->
        <section id="sec-services">
             <div class="container">
                <div class="content-card">
                    <div class="section-header">
                        <h2 class="section-title">Facets</h2>
                    </div>
                    <p>
                        <strong>勇敢的催化劑</strong><br>
                        如果你也正處於人生的十字路口，我希望能成為你的勇氣參照物——讓你知道，晚一點開始，真的沒關係。
                    </p>
                    <p>
                        <strong>流浪的視角</strong><br>
                        從澳洲打工度假到西班牙朝聖之路，我們一起探索世界的邊界，看見不同的生活光譜。
                    </p>
                </div>
            </div>
        </section>

        <!-- Section 4: Goals (Text mapping to Cube Face 3) -->
        <section id="sec-goals">
            <div class="container">
                <div class="content-card">
                    <div class="section-header">
                        <h2 class="section-title">Reflection</h2>
                    </div>
                    <p style="text-align: center; font-style: italic; color: var(--accent-gold);">
                        「慢慢走也可以，走在自己要的路上都會發光。」
                    </p>
                    <div style="display: flex; justify-content: space-around; margin-top: 2rem; flex-wrap: wrap; gap: 1rem;">
                        <div style="text-align: center;">
                            <i class="fa-solid fa-earth-oceania" style="font-size: 2rem; color: var(--accent-blue); margin-bottom: 0.5rem;"></i>
                            <div style="font-size: 0.9rem;">Australia</div>
                        </div>
                        <div style="text-align: center;">
                            <i class="fa-solid fa-person-hiking" style="font-size: 2rem; color: var(--accent-gold); margin-bottom: 0.5rem;"></i>
                            <div style="font-size: 0.9rem;">Spain</div>
                        </div>
                        <div style="text-align: center;">
                            <i class="fa-brands fa-youtube" style="font-size: 2rem; color: #ff9999; margin-bottom: 0.5rem;"></i>
                            <div style="font-size: 0.9rem;">Channel</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="clickable">
            <div class="container">
                <h2 style="font-family: 'Cormorant Garamond'; letter-spacing: 2px; margin-bottom: 2rem; color: var(--accent-gold);">CONNECT</h2>
                <div class="socials">
                    <a href="https://www.threads.net/@goodays.leya" target="_blank" class="social-btn"><i class="fa-brands fa-threads"></i></a>
                    <a href="https://www.instagram.com/goodays.leya/" target="_blank" class="social-btn"><i class="fa-brands fa-instagram"></i></a>
                </div>
                <p style="margin-top: 3rem; color: #999; font-size: 0.8rem;">
                    Made with <span style="color: var(--accent-gold)">♥</span> for Guild
                </p>
            </div>
        </footer>
    </main>

    <script>
        // --- Global State ---
        let scrollYNorm = 0; // 0 to 1

        // --- p5.js Sketch (3D Crystal) ---
        const sketch = (p) => {
            let textures = []; // Array to hold graphics for faces
            let font;
            let myCrystal;

            p.setup = () => {
                const canvas = p.createCanvas(p.windowWidth, p.windowHeight, p.WEBGL);
                canvas.parent('p5-container');
                p.setAttributes('alpha', true); // Transparent canvas

                // Create textures for cube faces
                // Face 0: Hero/General
                textures[0] = createFaceTexture('Crystal', 'Soul', '#a8d0e6');
                // Face 1: Bio
                textures[1] = createFaceTexture('Story', 'Brave', '#d4af37');
                // Face 2: Services
                textures[2] = createFaceTexture('Value', 'Share', '#ffc8dd');
                // Face 3: Goals
                textures[3] = createFaceTexture('Dream', 'Future', '#b9fbc0');

                // Default Font
                p.textFont('Georgia');
            };

            function createFaceTexture(title, sub, color) {
                let pg = p.createGraphics(400, 400);
                pg.background(255, 255, 255, 200); // Semi-transparent white
                pg.noFill();
                pg.stroke(color);
                pg.strokeWeight(10);
                pg.rect(0, 0, 400, 400); // Border

                pg.fill(50);
                pg.noStroke();
                pg.textAlign(p.CENTER, p.CENTER);
                pg.textSize(60);
                pg.text(title, 200, 180);

                pg.textSize(30);
                pg.fill(100);
                pg.text(sub, 200, 240);

                // Decor
                pg.stroke(color);
                pg.strokeWeight(2);
                pg.line(100, 300, 300, 300);

                return pg;
            }

            p.draw = () => {
                p.clear(); // Clear canvas for transparency

                // Lights
                p.ambientLight(150);
                p.pointLight(255, 255, 255, p.width/2, -p.height/2, 200);
                p.directionalLight(212, 175, 55, -1, 0, -0.5); // Gold light

                // Rotation based on scroll
                let rotX = scrollYNorm * p.TWO_PI; // Full rotation over page
                let rotY = scrollYNorm * p.PI + (p.frameCount * 0.005); // Slow spin + scroll

                // Draw Crystal (Cube)
                p.push();

                // Determine position - maybe float slightly
                // On mobile, keep it center. On desktop, maybe offset if layout allows.
                // Center is safe.

                p.rotateX(rotX);
                p.rotateY(rotY);

                p.stroke(255, 255, 255, 100);
                p.strokeWeight(1);

                // Draw Box with Textures
                // p5 box() applies one texture to all faces if passed to texture().
                // To map different textures, we need to draw faces manually or use advanced geometry.
                // For simplicity/performance in p5, let's draw 6 planes.

                const boxSize = 250;
                const dist = boxSize / 2;

                // Front
                drawFace(textures[0], 0, 0, dist, 0, 0, 0);
                // Back
                drawFace(textures[1], 0, 0, -dist, 0, p.PI, 0);
                // Right
                drawFace(textures[2], dist, 0, 0, 0, p.HALF_PI, 0);
                // Left
                drawFace(textures[3], -dist, 0, 0, 0, -p.HALF_PI, 0);
                // Top
                drawFace(textures[0], 0, -dist, 0, p.HALF_PI, 0, 0);
                // Bottom
                drawFace(textures[1], 0, dist, 0, -p.HALF_PI, 0, 0);

                // Inner Crystal (Gloss Core)
                p.noFill();
                p.stroke(255, 255, 255, 80);
                p.strokeWeight(2);
                p.box(boxSize * 0.6);

                p.pop();
            };

            function drawFace(tex, x, y, z, rx, ry, rz) {
                p.push();
                p.translate(x, y, z);
                p.rotateX(rx);
                p.rotateY(ry);
                p.rotateZ(rz);
                p.texture(tex);
                // Plane size
                p.plane(250, 250);
                p.pop();
            }

            p.windowResized = () => {
                p.resizeCanvas(p.windowWidth, p.windowHeight);
            };
        };

        // --- GSAP & Scroll Logic ---
        function initApp() {
            gsap.registerPlugin(ScrollTrigger);

            // 1. Update Scroll Progress for p5
            ScrollTrigger.create({
                trigger: "body",
                start: "top top",
                end: "bottom bottom",
                onUpdate: (self) => {
                    scrollYNorm = self.progress;
                }
            });

            // 2. Content Reveals
            gsap.utils.toArray('.content-card').forEach(card => {
                gsap.to(card, {
                    opacity: 1,
                    y: 0,
                    duration: 1,
                    scrollTrigger: {
                        trigger: card,
                        start: "top 80%",
                        toggleActions: "play none none reverse"
                    }
                });
            });

            // 3. Hero Animation
            gsap.from(".hero-title", { opacity: 0, scale: 0.8, duration: 1.5, ease: "power2.out" });
            gsap.from(".hero-subtitle", { opacity: 0, y: 20, duration: 1, delay: 0.5 });
            gsap.from(".avatar-frame", { opacity: 0, y: -50, duration: 1, delay: 0.2 });

        }

        // --- Init ---
        window.addEventListener('load', () => {
            new p5(sketch);

            gsap.to("#loader", {
                opacity: 0,
                duration: 1,
                onComplete: () => {
                    document.getElementById('loader').style.display = 'none';
                    initApp();
                }
            });
        });

    </script>
</body>
</html>
