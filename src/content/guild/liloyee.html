<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Liloyee | The Dragon Palace Princess</title>
    <meta name="description" content="Welcome to Liloyee's Dragon Palace - A world of stories, dreams, and treasures.">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Zen+Maru+Gothic:wght@400;700&family=Zen+Old+Mincho:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <style>
        :root {
            --c-deep: #02001c;
            --c-royal: #1a0b38;
            --c-gold: #ffd700;
            --c-gem-red: #ff3366;
            --c-gem-blue: #00ffff;
            --c-pearl: #f0f8ff;
            --f-header: 'Cinzel', serif;
            --f-body: 'Zen Maru Gothic', sans-serif;
            --f-accent: 'Zen Old Mincho', serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: var(--c-deep);
            color: var(--c-pearl);
            font-family: var(--f-body);
            overflow-x: hidden;
            width: 100%;
        }

        /* 3D Background */
        #canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            /* Gradient overlay for readability */
            background: radial-gradient(circle at 50% 50%, transparent 0%, var(--c-deep) 120%);
        }

        /* Cursor */
        #cursor-follower {
            position: fixed;
            width: 40px;
            height: 40px;
            border: 2px solid var(--c-gold);
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 15px var(--c-gold), inset 0 0 10px var(--c-gold);
            transition: width 0.3s, height 0.3s;
            mix-blend-mode: difference;
        }

        /* Layout */
        .scroller {
            position: relative;
            z-index: 2;
        }

        section {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 4rem 2rem;
            position: relative;
        }

        /* Typography */
        h1, h2, h3 {
            font-family: var(--f-header);
            text-transform: uppercase;
            letter-spacing: 0.2em;
            text-align: center;
        }

        h1 {
            font-size: clamp(3rem, 10vw, 6rem);
            color: var(--c-gold);
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
            margin-bottom: 1rem;
            line-height: 1.2;
        }

        h2 {
            font-size: clamp(2rem, 5vw, 4rem);
            color: var(--c-gold);
            margin-bottom: 2rem;
            position: relative;
            display: inline-block;
        }

        h2::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 2px;
            background: var(--c-gold);
            box-shadow: 0 0 10px var(--c-gold);
        }

        p {
            font-size: 1.1rem;
            line-height: 1.8;
            max-width: 700px;
            margin-bottom: 1.5rem;
            color: rgba(255, 255, 255, 0.9);
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }

        .highlight {
            color: var(--c-gold);
            font-weight: 700;
        }

        .highlight-blue {
            color: var(--c-gem-blue);
            font-weight: 700;
        }

        /* Glass Cards */
        .glass-card {
            background: rgba(2, 0, 28, 0.85);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 215, 0, 0.15);
            border-radius: 24px;
            padding: 3rem;
            box-shadow: 0 20px 50px rgba(0,0,0,0.7);
            max-width: 900px;
            width: 100%;
            margin: 2rem auto;
            position: relative;
            overflow: hidden;
            transition: transform 0.3s ease, border-color 0.3s ease;
        }

        .glass-card::before {
            content: '';
            position: absolute;
            top: 0; left: 0; width: 100%; height: 4px;
            background: linear-gradient(90deg, transparent, var(--c-gold), transparent);
        }

        .glass-card:hover {
            transform: translateY(-5px);
            border-color: rgba(255, 215, 0, 0.5);
        }

        /* Avatar */
        .avatar-frame {
            position: relative;
            width: 300px;
            height: 300px;
            margin: 0 auto 2rem;
            border-radius: 50%;
            padding: 10px;
            background: linear-gradient(45deg, var(--c-gold), transparent, var(--c-gem-blue));
            animation: rotateBorder 10s linear infinite;
        }

        @keyframes rotateBorder {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .avatar-img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid var(--c-deep);
            position: relative;
            z-index: 2;
            animation: counterRotate 10s linear infinite; /* Counteract frame rotation */
        }

        @keyframes counterRotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(-360deg); }
        }

        /* Navigation / Badge */
        .badge-container {
            position: fixed;
            top: 2rem;
            left: 2rem;
            z-index: 10;
        }

        .badge-text {
            font-family: var(--f-header);
            color: var(--c-gold);
            font-size: 0.9rem;
            letter-spacing: 2px;
            border: 1px solid var(--c-gold);
            padding: 0.5rem 1rem;
            border-radius: 50px;
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
            transition: all 0.3s;
        }

        .badge-text:hover {
            background: var(--c-gold);
            color: var(--c-deep);
        }

        /* Gallery Grid */
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            width: 100%;
            margin-top: 2rem;
        }

        .gallery-item {
            height: 300px;
            border-radius: 15px;
            overflow: hidden;
            border: 1px solid rgba(255,215,0,0.3);
            position: relative;
            transition: transform 0.3s;
        }

        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s;
        }

        .gallery-item:hover {
            transform: scale(1.02);
            box-shadow: 0 0 20px rgba(255,215,0,0.2);
        }

        .gallery-item:hover img {
            transform: scale(1.1);
        }

        /* Footer */
        .footer-links {
            display: flex;
            gap: 2rem;
            margin-top: 2rem;
            font-size: 2rem;
        }

        .footer-links a {
            color: var(--c-pearl);
            transition: all 0.3s;
            position: relative;
        }

        .footer-links a:hover {
            color: var(--c-gold);
            transform: translateY(-5px);
            text-shadow: 0 0 15px var(--c-gold);
        }

        .wish-btn {
            margin-top: 3rem;
            padding: 1rem 3rem;
            font-family: var(--f-header);
            font-size: 1.2rem;
            color: var(--c-deep);
            background: var(--c-gold);
            border: none;
            border-radius: 50px;
            cursor: none; /* Use custom cursor */
            position: relative;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .wish-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 30px var(--c-gold);
        }

        .wish-btn::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.8), transparent);
            transform: rotate(45deg) translateY(-100%);
            transition: transform 0.5s;
        }

        .wish-btn:hover::after {
            transform: rotate(45deg) translateY(100%);
        }

    </style>
</head>
<body>

    <div id="canvas-container"></div>
    <div id="cursor-follower"></div>

    <div class="badge-container">
        <a href="/guild/" style="text-decoration: none;">
            <div class="badge-text"><i class="fa-solid fa-chevron-left"></i> GUILD</div>
        </a>
    </div>

    <main class="scroller">
        <!-- Hero Section -->
        <section id="hero">
            <div class="avatar-frame">
                <!-- Using webp converted image -->
                <img src="/assets/img/guild/liloyee/avatar.webp" alt="Liloyee" class="avatar-img">
            </div>
            <h1>Liloyee</h1>
            <h3 style="color: var(--c-gem-blue); margin-top: 0.5rem;">Dragon Palace Princess</h3>
            <p style="margin-top: 1rem; font-style: italic; opacity: 0.8;">
                "Writing gentle stories, dreaming colorful dreams."
            </p>
        </section>

        <!-- Intro / Bio -->
        <section id="about">
            <div class="glass-card">
                <h2>The Archivist</h2>
                <p>
                    Âñ≤Âëº (ÔΩÄ„Éªœâ„Éª¬¥)„Çû <br>
                    I am a <span class="highlight">Writer</span>, a <span class="highlight">Math Teacher</span>, and a dreamer from Malaysia.
                    With a background in Social Psychology, I find deep healing in teaching and helping others.
                </p>
                <p>
                    But my true calling is the pen. ‚úèÔ∏è <br>
                    I wish to record my life's journey with gentle, humorous words, turning stories into songs that walk into people's hearts.
                </p>
                <div style="display: flex; gap: 1rem; justify-content: center; margin-top: 2rem; flex-wrap: wrap;">
                    <span class="badge-text"><i class="fa-solid fa-book-open"></i> Writer</span>
                    <span class="badge-text"><i class="fa-solid fa-chalkboard-user"></i> Teacher</span>
                    <span class="badge-text"><i class="fa-solid fa-heart"></i> Helper</span>
                    <span class="badge-text"><i class="fa-solid fa-music"></i> Singer</span>
                </div>
            </div>
        </section>

        <!-- Dream / Personality -->
        <section id="dreams">
            <div class="glass-card" style="border-color: rgba(0, 255, 255, 0.3);">
                <h2 style="color: var(--c-gem-blue); text-shadow: 0 0 10px var(--c-gem-blue);">Lucid Dreaming</h2>
                <p>
                    I suffer (or benefit?) from vivid dreaming. <br>
                    In my dreams, the world has <span class="highlight-blue">Color</span>, <span class="highlight-blue">Touch</span>, <span class="highlight-blue">Temperature</span>, and even <span class="highlight-blue">Pain</span>.
                </p>
                <p>
                    Every sleep is like opening a blind box‚Äîexciting and unknown! ü§£ <br>
                    I study dream interpretation and personality analysis, exploring emotions, scenes, and environments to understand the soul.
                </p>
                <p>
                    Also... I love <span class="highlight-blue">Stitch</span>! üíô And I'm not afraid of ghosts.
                </p>
            </div>
        </section>

        <!-- Gallery / Treasures -->
        <section id="treasures">
            <div class="glass-card">
                <h2>Golden Memories</h2>
                <p>
                    From volunteer work to teaching autistic children, every experience is a precious gem in my collection.
                    I may have started with little resources, but my curiosity has led me to win memory championships and explore the world.
                </p>
                <p class="highlight">"I want to be an angel on earth before I become one in the sky." üßöüèª‚Äç‚ôÄÔ∏è</p>

                <div class="gallery-grid">
                    <!-- Placeholder images, assuming these exist or using the main one if not -->
                    <div class="gallery-item"><img src="/assets/img/guild/liloyee/memory1.webp" alt="Memory 1"></div>
                    <div class="gallery-item"><img src="/assets/img/guild/liloyee/memory2.webp" alt="Memory 2"></div>
                    <div class="gallery-item"><img src="/assets/img/guild/liloyee/memory3.webp" alt="Memory 3"></div>
                </div>

                <div style="text-align: center;">
                    <button class="wish-btn" id="btn-wish">Make a Wish ‚ú®</button>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <section id="contact" style="min-height: 50vh;">
            <h2>Connect</h2>
            <div class="footer-links">
                <a href="https://www.threads.com/@liloyee_0224" target="_blank"><i class="fa-brands fa-threads"></i></a>
                <a href="https://www.instagram.com/liloyee_0224/" target="_blank"><i class="fa-brands fa-instagram"></i></a>
            </div>
            <p style="margin-top: 2rem; font-size: 0.8rem; opacity: 0.5;">
                Part of <a href="/guild/" style="color: inherit; text-decoration: underline;">SuperGalen's Dungeon</a>
            </p>
        </section>

    </main>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/0.160.0/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <!-- Canvas Confetti -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <script>
        gsap.registerPlugin(ScrollTrigger);

        // --- THREE.JS SETUP ---
        const container = document.getElementById('canvas-container');
        const scene = new THREE.Scene();
        // Deep sea fog
        scene.fog = new THREE.FogExp2(0x02001c, 0.03);

        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 5;

        const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true, powerPreference: "high-performance" });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        renderer.toneMapping = THREE.ACESFilmicToneMapping;
        renderer.toneMappingExposure = 1.5; // Increased exposure
        container.appendChild(renderer.domElement);

        // --- TREASURE SYSTEM ---

        // Reduced counts for cleaner visual
        const coinCount = 60;
        const gemCount = 30;
        const pearlCount = 30;
        const rubyCount = 15;

        // 1. Gold Coins
        const coinGeo = new THREE.CylinderGeometry(0.4, 0.4, 0.05, 32);
        coinGeo.rotateX(Math.PI / 2);
        const coinMat = new THREE.MeshStandardMaterial({
            color: 0xffd700,
            metalness: 0.6,
            roughness: 0.2
        });
        const coins = new THREE.InstancedMesh(coinGeo, coinMat, coinCount);

        // 2. Gems (Blue/Diamond)
        const gemGeo = new THREE.OctahedronGeometry(0.3, 0);
        const gemMat = new THREE.MeshPhysicalMaterial({
            color: 0xccffff,
            transmission: 0.6,
            opacity: 0.9,
            transparent: true,
            metalness: 0.1,
            roughness: 0,
            ior: 1.5,
            thickness: 0.5,
            iridescence: 0.5
        });
        const gems = new THREE.InstancedMesh(gemGeo, gemMat, gemCount);

        // 3. Rubies (Red)
        const rubyGeo = new THREE.IcosahedronGeometry(0.35, 0);
        const rubyMat = new THREE.MeshPhysicalMaterial({
            color: 0xff0044,
            transmission: 0.5,
            opacity: 0.9,
            transparent: true,
            metalness: 0.1,
            roughness: 0,
            ior: 1.5,
            thickness: 0.8
        });
        const rubies = new THREE.InstancedMesh(rubyGeo, rubyMat, rubyCount);

        // 4. Pearls
        const pearlGeo = new THREE.SphereGeometry(0.25, 32, 32);
        const pearlMat = new THREE.MeshPhysicalMaterial({
            color: 0xffffff,
            roughness: 0.2,
            metalness: 0.1,
            iridescence: 0.8,
            iridescenceIOR: 1.3,
            sheen: 1,
            sheenColor: 0xffddff,
            clearcoat: 0.5
        });
        const pearls = new THREE.InstancedMesh(pearlGeo, pearlMat, pearlCount);

        scene.add(coins);
        scene.add(gems);
        scene.add(rubies);
        scene.add(pearls);

        // Helper to randomize positions
        const dummy = new THREE.Object3D();
        const spreadX = 25; // Wider spread
        const spreadY = 50;

        // Key change: Push objects further back (-5 to -20)
        // Camera is at +5. Text is at 0 (DOM overlay).
        // This ensures objects are background elements.

        function randomizeMesh(mesh, count) {
            for (let i = 0; i < count; i++) {
                dummy.position.set(
                    (Math.random() - 0.5) * spreadX,
                    (Math.random() - 0.5) * spreadY,
                    -5 - Math.random() * 15 // z from -5 to -20
                );
                dummy.rotation.set(
                    Math.random() * Math.PI,
                    Math.random() * Math.PI,
                    Math.random() * Math.PI
                );
                const scale = 0.5 + Math.random() * 1.0;
                dummy.scale.set(scale, scale, scale);
                dummy.updateMatrix();
                mesh.setMatrixAt(i, dummy.matrix);
            }
            mesh.instanceMatrix.needsUpdate = true;
        }

        randomizeMesh(coins, coinCount);
        randomizeMesh(gems, gemCount);
        randomizeMesh(rubies, rubyCount);
        randomizeMesh(pearls, pearlCount);

        // --- LIGHTING ---
        // Significantly boosted lighting
        const ambientLight = new THREE.AmbientLight(0xffffff, 1.5);
        scene.add(ambientLight);

        // Hemisphere Light for overall tone (Sky Blue / Ground Gold)
        const hemiLight = new THREE.HemisphereLight(0x0000ff, 0xffaa00, 0.5);
        scene.add(hemiLight);

        const pointLight = new THREE.PointLight(0xffaa00, 10, 50);
        pointLight.position.set(5, 5, 5);
        scene.add(pointLight);

        const blueLight = new THREE.PointLight(0x0088ff, 8, 50);
        blueLight.position.set(-5, -5, 2);
        scene.add(blueLight);

        // God Rays (Simulated with a directional light)
        const dirLight = new THREE.DirectionalLight(0xaaccff, 3);
        dirLight.position.set(0, 10, 5);
        scene.add(dirLight);


        // --- ANIMATION LOOP ---
        function animate(time) {
            time *= 0.001; // Seconds

            // Slower, calmer rotation
            coins.rotation.y = time * 0.02;
            gems.rotation.y = time * 0.01 + 0.5;
            rubies.rotation.y = time * 0.015 + 1.0;
            pearls.rotation.y = time * 0.01 + 2.0;

            // Subtle float effect
            coins.position.y = Math.sin(time * 0.3) * 0.3;
            gems.position.y = Math.sin(time * 0.2 + 1) * 0.3;

            // Move lights to create glimmer
            pointLight.position.x = Math.sin(time * 0.7) * 8;
            pointLight.position.z = Math.cos(time * 0.5) * 8;

            blueLight.position.y = Math.sin(time * 0.3) * 10;

            renderer.render(scene, camera);
            requestAnimationFrame(animate);
        }
        animate();


        // --- SCROLL INTERACTION ---
        // Move camera down through the treasure field
        gsap.to(camera.position, {
            y: -15, // Move down deep
            ease: "none",
            scrollTrigger: {
                trigger: document.body,
                start: "top top",
                end: "bottom bottom",
                scrub: 1
            }
        });

        // Rotate camera slightly based on scroll
        gsap.to(camera.rotation, {
            z: 0.1, // Slight tilt
            ease: "none",
            scrollTrigger: {
                trigger: document.body,
                start: "top top",
                end: "bottom bottom",
                scrub: 1
            }
        });


        // --- UI ANIMATIONS (GSAP) ---
        gsap.utils.toArray('.glass-card').forEach(card => {
            gsap.from(card, {
                y: 100,
                opacity: 0,
                duration: 1,
                scrollTrigger: {
                    trigger: card,
                    start: "top 80%",
                    toggleActions: "play none none reverse"
                }
            });
        });

        // Avatar entrance
        gsap.from('.avatar-frame', {
            scale: 0,
            rotation: -180,
            duration: 1.5,
            ease: "back.out(1.7)"
        });

        // --- CURSOR ---
        const cursor = document.getElementById('cursor-follower');
        let mouseX = 0, mouseY = 0;
        let cursorX = 0, cursorY = 0;

        document.addEventListener('mousemove', (e) => {
            mouseX = e.clientX;
            mouseY = e.clientY;

            // Parallax on scene
            const pX = (e.clientX / window.innerWidth) * 2 - 1;
            const pY = -(e.clientY / window.innerHeight) * 2 + 1;

            gsap.to(scene.rotation, {
                x: pY * 0.05,
                y: pX * 0.05,
                duration: 1
            });
        });

        gsap.ticker.add(() => {
            const dt = 1.0 - Math.pow(1.0 - 0.2, gsap.ticker.deltaRatio());
            cursorX += (mouseX - cursorX) * dt;
            cursorY += (mouseY - cursorY) * dt;
            cursor.style.transform = `translate(${cursorX}px, ${cursorY}px) translate(-50%, -50%)`;
        });

        // --- BUTTON INTERACTION ---
        const btnWish = document.getElementById('btn-wish');
        btnWish.addEventListener('click', (e) => {
            // Confetti explosion
            const rect = btnWish.getBoundingClientRect();
            const x = (rect.left + rect.width / 2) / window.innerWidth;
            const y = (rect.top + rect.height / 2) / window.innerHeight;

            confetti({
                particleCount: 150,
                spread: 70,
                origin: { x, y },
                colors: ['#ffd700', '#00ffff', '#ffffff'],
                zIndex: 10000
            });

            // Add a fun message or shake
            gsap.to(btnWish, { x: -5, duration: 0.1, yoyo: true, repeat: 5 });
        });

        // Resize handler
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

    </script>
</body>
</html>
