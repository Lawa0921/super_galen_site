<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lo Yu | The Golden Thread</title>
    <meta name="description" content="羅玉 Lo Yu - Tactical Analyst & Golden Weaver.">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Great+Vibes&family=Noto+Serif+TC:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <style>
        :root {
            --navy-dark: #0a1128;
            --navy-light: #1c2541;
            --gold-bright: #ffd700;
            --gold-mute: #c5a000;
            --text-light: #f8f9fa;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { overflow-x: hidden; scroll-behavior: smooth; }
        body {
            background-color: var(--navy-dark);
            color: var(--text-light);
            font-family: 'Noto Serif TC', serif;
            overflow-x: hidden;
        }

        /* === LAYERS === */
        #webgl-canvas {
            position: fixed; top: 0; left: 0;
            width: 100vw; height: 100vh;
            z-index: -1;
        }

        /* === UI & HUD === */
        .hud-layer {
            position: fixed; inset: 0; pointer-events: none; z-index: 10;
            display: flex; flex-direction: column; justify-content: space-between;
            padding: 20px;
        }
        .hud-top { display: flex; justify-content: space-between; align-items: center; }
        .hud-bottom { display: flex; justify-content: space-between; align-items: center; }

        .logo-text { font-family: 'Cinzel', serif; font-weight: 700; font-size: 1.5rem; color: var(--gold-bright); letter-spacing: 2px; }
        .scroll-indicator { color: var(--gold-mute); font-size: 0.8rem; letter-spacing: 1px; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { opacity: 0.5; } 50% { opacity: 1; } 100% { opacity: 0.5; } }

        /* === SCROLL CONTENT === */
        /* We use a long container to drive the 3D scroll, but content appears fixed/faded in based on JS */
        .scroll-driver {
            height: 800vh; /* Determines length of the journey */
        }

        .content-layer {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 5;
            display: flex; justify-content: center; align-items: center;
        }

        .slide {
            position: absolute;
            width: 100%; max-width: 1000px; padding: 2rem;
            opacity: 0; transform: translateY(20px); transition: all 0.8s ease-out;
            display: flex; gap: 3rem; align-items: center;
        }
        .slide.active { opacity: 1; transform: translateY(0); pointer-events: auto; }
        .slide.exit { opacity: 0; transform: translateY(-20px); }

        /* HERO SLIDE */
        .hero-layout { display: flex; align-items: center; gap: 3rem; text-align: left; width: 100%; }
        .avatar-frame {
            width: 280px; height: 280px; flex-shrink: 0;
            border: 2px solid var(--gold-bright); padding: 10px;
            position: relative;
        }
        .avatar-frame::before {
            content: ''; position: absolute; top: -5px; left: -5px; width: 20px; height: 20px;
            border-top: 2px solid var(--gold-bright); border-left: 2px solid var(--gold-bright);
        }
        .avatar-frame::after {
            content: ''; position: absolute; bottom: -5px; right: -5px; width: 20px; height: 20px;
            border-bottom: 2px solid var(--gold-bright); border-right: 2px solid var(--gold-bright);
        }
        .hero-img { width: 100%; height: 100%; object-fit: cover; filter: sepia(20%) contrast(110%); }

        .hero-text h1 { font-family: 'Cinzel', serif; font-size: 3.5rem; margin-bottom: 0.5rem; color: var(--gold-bright); }
        .hero-text h2 { font-size: 1.2rem; margin-bottom: 1.5rem; letter-spacing: 3px; color: #aaa; text-transform: uppercase; }
        .hero-desc { font-size: 1.1rem; line-height: 1.8; max-width: 500px; color: #ddd; }

        /* ANALYST SLIDE */
        .analyst-layout { text-align: left; width: 100%; position: relative; }
        .tactical-grid {
            display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem;
            margin-top: 2rem; border-top: 1px solid var(--gold-mute); padding-top: 2rem;
        }
        .stat-box h3 { font-family: 'Cinzel'; color: var(--gold-bright); margin-bottom: 0.5rem; }
        .stat-box p { font-size: 0.9rem; color: #bbb; }

        /* WEAVER SLIDE */
        .weaver-layout { text-align: center; width: 100%; }
        .quote-box {
            font-family: 'Great Vibes', cursive; font-size: 2.5rem; color: var(--gold-bright);
            margin-bottom: 2rem; text-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
        }

        /* GALLERY SLIDE */
        .gallery-grid {
            display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px;
            width: 100%;
        }
        .gallery-item { aspect-ratio: 1; border: 1px solid var(--gold-mute); overflow: hidden; opacity: 0; transform: scale(0.9); }
        .gallery-item img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.5s; }
        .gallery-item:hover img { transform: scale(1.1); }

        /* FINAL SLIDE */
        .final-layout { text-align: center; }
        .social-row { display: flex; gap: 2rem; justify-content: center; margin-top: 2rem; }
        .social-btn { font-size: 2rem; color: var(--gold-bright); transition: 0.3s; }
        .social-btn:hover { transform: scale(1.2); color: #fff; }

        /* Mobile Adjustments */
        @media (max-width: 768px) {
            .hero-layout { flex-direction: column; text-align: center; }
            .avatar-frame { width: 200px; height: 200px; margin: 0 auto; }
            .tactical-grid { grid-template-columns: 1fr; }
            .gallery-grid { grid-template-columns: repeat(2, 1fr); }
        }

    </style>
</head>
<body>

    <canvas id="webgl-canvas"></canvas>

    <!-- HUD -->
    <div class="hud-layer">
        <div class="hud-top">
            <div class="logo-text">LO YU</div>
            <div style="font-family: monospace;">SYS.STATUS: ONLINE</div>
        </div>
        <div class="hud-bottom">
            <div style="font-family: monospace;">COORD: <span id="coord-display">000.000</span></div>
            <div class="scroll-indicator">FOLLOW THE THREAD ↓</div>
        </div>
    </div>

    <!-- DRIVER -->
    <div class="scroll-driver"></div>

    <!-- CONTENT SLIDES -->
    <div class="content-layer">

        <!-- 1. HERO -->
        <div class="slide active" id="slide-0">
            <div class="hero-layout">
                <div class="avatar-frame">
                    <img src="/assets/img/guild/loyu/avatar.webp" alt="Lo Yu" class="hero-img">
                </div>
                <div class="hero-text">
                    <h1>羅玉 LO YU</h1>
                    <h2>The Tactical Weaver</h2>
                    <p class="hero-desc">
                        專注於人際關係的行銷策劃師。<br>
                        前國軍招募專員 / 知識平台處長 / 牛津能力分析師。<br>
                        用嚴謹的邏輯與溫暖的編織，連結人與人的心。
                    </p>
                </div>
            </div>
        </div>

        <!-- 2. ANALYST (Logic) -->
        <div class="slide" id="slide-1">
            <div class="analyst-layout">
                <h2 style="font-family: 'Cinzel'; font-size: 2.5rem; color: var(--gold-bright); margin-bottom: 1rem;">STRATEGIC ANALYST</h2>
                <p style="font-size: 1.1rem; max-width: 600px;">
                    將軍事般的精準度帶入人際溝通。擅長分析跨世代語境，找出連結斷點，並制定修復策略。
                </p>
                <div class="tactical-grid">
                    <div class="stat-box">
                        <h3>RECRUITMENT</h3>
                        <p>前國軍人才招募專員<br>識人術與談判技巧</p>
                    </div>
                    <div class="stat-box">
                        <h3>ANALYSIS</h3>
                        <p>牛津能力分析師<br>數據化人格特質</p>
                    </div>
                    <div class="stat-box">
                        <h3>STRATEGY</h3>
                        <p>人際關係訓練<br>社交恐懼克服與職場應用</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 3. WEAVER (Art) -->
        <div class="slide" id="slide-2">
            <div class="weaver-layout">
                <div class="quote-box">"Weaving happiness, one loop at a time."</div>
                <p style="max-width: 600px; margin: 0 auto 2rem; font-size: 1.1rem;">
                    卸下分析師的理性，我是熱愛雞蛋與維尼的編織者。<br>
                    日文的雞蛋寫作「玉子」，我的名字也有「玉」。<br>
                    我希望透過手作，傳遞那份純粹的溫暖與美好。
                </p>
                <div style="font-family: 'Cinzel'; color: var(--gold-mute);">
                    INTJ // HANDMADE // WINNIE THE POOH
                </div>
            </div>
        </div>

        <!-- 4. GALLERY -->
        <div class="slide" id="slide-3">
            <div style="text-align: center; width: 100%;">
                <h2 style="font-family: 'Cinzel'; margin-bottom: 2rem; color: var(--gold-bright);">PORTFOLIO ARCHIVE</h2>
                <div class="gallery-grid">
                    <div class="gallery-item"><img src="/assets/img/guild/loyu/gallery_01.webp"></div>
                    <div class="gallery-item"><img src="/assets/img/guild/loyu/gallery_02.webp"></div>
                    <div class="gallery-item"><img src="/assets/img/guild/loyu/gallery_03.webp"></div>
                    <div class="gallery-item"><img src="/assets/img/guild/loyu/gallery_04.webp"></div>
                    <div class="gallery-item"><img src="/assets/img/guild/loyu/gallery_05.webp"></div>
                    <div class="gallery-item"><img src="/assets/img/guild/loyu/gallery_06.webp"></div>
                </div>
            </div>
        </div>

        <!-- 5. FINALE -->
        <div class="slide" id="slide-4">
            <div class="final-layout">
                <h2 style="font-family: 'Cinzel'; font-size: 3rem; color: var(--gold-bright);">INITIATE LINK</h2>
                <p style="margin-top: 1rem; color: #ccc;">與陌生人建立良好連結，並保持舒適的社交距離。</p>

                <div class="social-row">
                    <a href="https://www.threads.com/@loyu1230" target="_blank" class="social-btn"><i class="fa-brands fa-threads"></i></a>
                    <a href="https://www.instagram.com/loyu1230/" target="_blank" class="social-btn"><i class="fa-brands fa-instagram"></i></a>
                    <a href="https://joytoknow.com/lecturer-yulo/" target="_blank" class="social-btn"><i class="fa-solid fa-globe"></i></a>
                </div>

                <div style="margin-top: 3rem; opacity: 0.5;">
                    <i class="fa-solid fa-egg" style="font-size: 2rem; color: var(--gold-bright);"></i>
                </div>
            </div>
        </div>

    </div>

    <!-- SCRIPTS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        // === CONFIG ===
        const CONFIG = {
            lineColor: 0xffd700,
            bgColor: 0x0a1128,
            pipeSegments: 200,
            pipeRadius: 0.3,
            camSpeed: 0.0005
        };

        // === SCENE SETUP ===
        const scene = new THREE.Scene();
        scene.fog = new THREE.FogExp2(CONFIG.bgColor, 0.02);
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('webgl-canvas'), antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setClearColor(CONFIG.bgColor);

        // === THE THREAD (Spline) ===
        // Define a complex path: Origin -> Straight (Logic) -> Curve (Weave) -> Spiral (Finale)
        const points = [];

        // 1. Origin Burst
        points.push(new THREE.Vector3(0, 0, 0));
        points.push(new THREE.Vector3(0, 0, -20)); // Zoom out

        // 2. Logic (Sharp turns)
        points.push(new THREE.Vector3(10, 5, -40));
        points.push(new THREE.Vector3(-10, 5, -60));
        points.push(new THREE.Vector3(-10, -5, -80));
        points.push(new THREE.Vector3(10, -5, -100));

        // 3. Weaving (Curves)
        for (let i = 0; i < 20; i++) {
            const angle = i * 0.5;
            const z = -120 - (i * 5);
            const x = Math.sin(angle) * 15;
            const y = Math.cos(angle) * 15;
            points.push(new THREE.Vector3(x, y, z));
        }

        // 4. Finale (Straight)
        points.push(new THREE.Vector3(0, 0, -250));

        const curve = new THREE.CatmullRomCurve3(points);
        const tubeGeo = new THREE.TubeGeometry(curve, CONFIG.pipeSegments, CONFIG.pipeRadius, 8, false);
        const tubeMat = new THREE.MeshStandardMaterial({
            color: CONFIG.lineColor,
            emissive: 0xaa8800,
            roughness: 0.3,
            metalness: 0.8
        });
        const tube = new THREE.Mesh(tubeGeo, tubeMat);
        scene.add(tube);

        // === PARTICLES (The Egg Explosion / Dust) ===
        const particlesGeo = new THREE.BufferGeometry();
        const pCount = 500;
        const pPos = new Float32Array(pCount * 3);
        for(let i=0; i<pCount*3; i++) {
            pPos[i] = (Math.random() - 0.5) * 100;
        }
        particlesGeo.setAttribute('position', new THREE.BufferAttribute(pPos, 3));
        const particlesMat = new THREE.PointsMaterial({ color: 0xffffff, size: 0.2, transparent: true, opacity: 0.5 });
        const particles = new THREE.Points(particlesGeo, particlesMat);
        scene.add(particles);

        // === LIGHTS ===
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
        scene.add(ambientLight);

        const pointLight = new THREE.PointLight(CONFIG.lineColor, 1, 50);
        scene.add(pointLight); // Will follow camera

        // === SCROLL SYNC ===
        let scrollPercent = 0;
        const driver = document.querySelector('.scroll-driver');
        const slides = document.querySelectorAll('.slide');

        function updateScroll() {
            const h = document.documentElement;
            const st = window.pageYOffset || h.scrollTop;
            const sh = h.scrollHeight || document.body.scrollHeight;
            scrollPercent = st / (sh - h.clientHeight);

            // Camera Path
            const p1 = curve.getPointAt(scrollPercent);
            const p2 = curve.getPointAt(Math.min(scrollPercent + 0.05, 1)); // Look ahead

            camera.position.copy(p1);
            camera.lookAt(p2);

            // Move Light with Camera
            pointLight.position.copy(p1);

            // Update HUD
            document.getElementById('coord-display').innerText = `${p1.x.toFixed(2)} / ${p1.z.toFixed(2)}`;

            // Slide Transition Logic
            // Map scrollPercent (0-1) to slides (0-4)
            const totalSlides = slides.length;
            // Zones: 0-0.15 (Hero), 0.15-0.35 (Analyst), 0.35-0.6 (Weaver), 0.6-0.85 (Gallery), 0.85-1 (Finale)
            let activeIndex = -1;

            if (scrollPercent < 0.15) activeIndex = 0;
            else if (scrollPercent < 0.35) activeIndex = 1;
            else if (scrollPercent < 0.60) activeIndex = 2;
            else if (scrollPercent < 0.85) activeIndex = 3;
            else activeIndex = 4;

            slides.forEach((slide, i) => {
                if (i === activeIndex) {
                    slide.classList.add('active');
                    slide.classList.remove('exit');
                    // Animate gallery children staggered
                    if (i === 3) {
                        const items = slide.querySelectorAll('.gallery-item');
                        items.forEach((item, k) => {
                            setTimeout(() => { item.style.opacity = 1; item.style.transform = 'scale(1)'; }, k * 100);
                        });
                    }
                } else if (i < activeIndex) {
                    slide.classList.add('exit');
                    slide.classList.remove('active');
                } else {
                    slide.classList.remove('active');
                    slide.classList.remove('exit');
                }
            });
        }

        window.addEventListener('scroll', updateScroll);
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        // Loop
        function animate() {
            requestAnimationFrame(animate);
            particles.rotation.y += 0.001;
            renderer.render(scene, camera);
        }
        animate();
        updateScroll(); // Init

    </script>
</body>
</html>
