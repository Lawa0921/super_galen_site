<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEKOPAPAYA | é¿é¢¨æ¸¯</title>
    <meta name="description" content="é€™æ˜¯ä¸€å€‹ã€Œé¿é¢¨æ¸¯ã€å‹çš„å€‹äººé é¢ï¼Œå‘ˆç¾èšäººçš„æ°›åœã€‚">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&family=Playfair+Display:ital@1&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <!-- Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js" defer></script>

    <!-- Three.js Import Map -->
    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
            }
        }
    </script>

    <style>
        :root {
            /* ğŸ¨ Mood Board Colors */
            --bg-main: #F4F1EC;   /* å¥¶èŒ¶ç±³ç™½ï¼Œæº«æŸ”ã€é¿é¢¨æ¸¯æ„Ÿ */
            --bg-sub: #E8E2D9;    /* æ·¡æ²™è‰²ï¼Œåˆ†æ®µè½ã€å¼·èª¿ç©ºé–“æ„Ÿ */
            --accent: #A8B2A1;    /* é¼ å°¾è‰ç¶ ï¼Œç”Ÿå‘½æ„Ÿã€æŸ”å’Œé»ç¶´ */
            --text-main: #3F3F3F; /* æš–æ·±ç°ï¼Œæ¯”é»‘è‰²æ›´æº«æŸ” */
            --text-hint: #8C8C8C; /* è¼•é‡æç¤ºç”¨ */

            --font-tc: 'Noto Sans TC', sans-serif;
            --font-en: 'Playfair Display', serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: var(--bg-main);
            color: var(--text-main);
            font-family: var(--font-tc);
            overflow-x: hidden;
            line-height: 2.2; /* ç•¥å¤§ï¼Œæ®µè½çŸ­ */
            font-weight: 400;
            cursor: default;
        }

        /* Fullscreen WebGL Background for Soft Atmosphere */
        #webgl-container {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 0;
            pointer-events: none;
        }

        /* Overlay to soften the 3D even further */
        .ambient-overlay {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 1;
            background: radial-gradient(circle at center, transparent 0%, rgba(244, 241, 236, 0.4) 100%);
            pointer-events: none;
        }

        .content-layer {
            position: relative;
            z-index: 10;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* ç•™ç™½å¤šï¼Œç©ºé–“æ„Ÿ */
        .section {
            min-height: 100vh;
            width: 100%;
            max-width: 1200px;
            padding: 10vh 5vw;
            display: flex;
            align-items: center;
            position: relative;
        }

        /* Layout Variations */
        .layout-hero { justify-content: center; text-align: center; flex-direction: column; }
        .layout-left { justify-content: flex-start; }
        .layout-right { justify-content: flex-end; }
        .layout-center { justify-content: center; text-align: center; }

        .text-block {
            max-width: 500px;
            background: rgba(255, 255, 255, 0.4);
            backdrop-filter: blur(10px);
            padding: 3.5rem;
            border-radius: 2px; /* Slight edge for a 'card' or 'paper' feel */
            border-left: 4px solid var(--accent);
            opacity: 0; /* Init for GSAP */
            transform: translateY(30px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.02);
            position: relative;
        }

        .layout-hero .text-block { border-left: none; border-top: 4px solid var(--accent); }
        .layout-right .text-block { border-left: none; border-right: 4px solid var(--accent); text-align: right; }
        .layout-center .text-block { border-left: none; border-bottom: 4px solid var(--accent); text-align: center; }

        /* Typography */
        h1, h2, h3 {
            font-weight: 500;
            color: var(--text-main);
            margin-bottom: 1.5rem;
            line-height: 1.5;
            letter-spacing: 0.05em;
        }
        h1 { font-size: 2.2rem; margin-bottom: 2rem; }
        h2 { font-size: 1.4rem; color: var(--accent); }
        .en-title { font-family: var(--font-en); font-size: 1.2rem; color: var(--text-hint); font-style: italic; display: block; margin-bottom: 0.5rem; }

        p {
            font-size: 1.1rem;
            margin-bottom: 1.5rem;
            color: #555;
        }
        p:last-child { margin-bottom: 0; }

        .hint {
            font-size: 0.9rem;
            color: var(--text-hint);
            margin-top: 1rem;
        }

        /* Avatar Element */
        .avatar-container {
            width: 140px; height: 140px;
            border-radius: 50%;
            overflow: hidden;
            margin: 0 auto 2.5rem;
            box-shadow: 0 10px 20px rgba(0,0,0,0.05);
            border: 4px solid var(--bg-main);
            position: relative;
            z-index: 2;
        }
        .avatar-container img {
            width: 100%; height: 100%; object-fit: cover;
            filter: contrast(0.9) brightness(1.05) saturate(0.9);
        }

        /* Nav */
        .nav-fixed {
            position: fixed; top: 2.5rem; left: 2.5rem; z-index: 50;
            font-family: var(--font-tc); font-weight: 500; color: var(--text-hint);
            text-decoration: none; pointer-events: auto;
            transition: color 0.3s;
            font-size: 0.95rem;
            letter-spacing: 0.1em;
            display: flex; align-items: center; gap: 0.5rem;
        }
        .nav-fixed:hover { color: var(--text-main); }

        /* Social */
        .social-links {
            display: flex; gap: 1rem; margin-top: 2rem;
            justify-content: center;
        }
        .social-btn {
            display: flex; align-items: center; justify-content: center;
            width: 50px; height: 50px; border-radius: 50%;
            background: white; color: var(--text-main);
            text-decoration: none; transition: all 0.3s ease;
            font-size: 1.3rem;
            box-shadow: 0 4px 10px rgba(0,0,0,0.03);
            border: 1px solid rgba(0,0,0,0.05);
        }
        .social-btn:hover {
            background: var(--accent); color: white;
            transform: translateY(-3px);
            box-shadow: 0 8px 15px rgba(168, 178, 161, 0.3);
        }

        /* Abstract Decor Element (Pure CSS) */
        .decor-circle {
            position: absolute;
            border-radius: 50%;
            background: var(--bg-sub);
            z-index: -1;
            opacity: 0.5;
            filter: blur(40px);
        }

    </style>
</head>
<body>

    <a href="/guild" class="nav-fixed"><i class="fa-solid fa-arrow-left"></i> é›¢é–‹ç©ºé–“</a>

    <div id="webgl-container"></div>
    <div class="ambient-overlay"></div>

    <div class="content-layer">

        <!-- 1. Hero / Safe Haven Intro -->
        <div class="section layout-hero">
            <!-- CSS Decor -->
            <div class="decor-circle" style="width: 300px; height: 300px; top: 20%; left: 50%; transform: translateX(-50%); background: #fff;"></div>

            <div class="text-block gs-reveal">
                <div class="avatar-container">
                    <img src="/assets/img/guild/nekopapaya/avatar.webp" alt="NEKOPAPAYA">
                </div>
                <span class="en-title">The Safe Haven</span>
                <h1>é€™è£¡æ˜¯ä¸€å€‹å¯ä»¥åœä¸‹ä¾†ã€åä¸€ä¸‹çš„åœ°æ–¹ã€‚</h1>
                <p>æœ‰æ™‚å€™æˆ‘æœƒåœ¨é€™è£¡ï¼Œäººèšåœ¨ä¸€èµ·ï¼Œ<br>æ…¢æ…¢äº«å—äººèˆ‡äººçš„æº«åº¦ã€‚</p>
            </div>
        </div>

        <!-- 2. The Analyst -->
        <div class="section layout-left">
            <div class="decor-circle" style="width: 400px; height: 400px; bottom: 10%; left: -10%;"></div>

            <div class="text-block gs-reveal">
                <span class="en-title">Human Condition Analyst</span>
                <h2>äººé«”ç‹€æ…‹è§€å¯Ÿåˆ†æå¸«</h2>
                <p>å–œæ­¡å¯æ„›äººäº‹ç‰©æ˜Ÿäººã€‚</p>
                <p>ã€Œæ°«æ°«æ•²é†’ä½ çš„å¿ƒéˆã€‚ã€</p>
                <p class="hint"><i class="fa-solid fa-seedling" style="color: var(--accent);"></i> è§€å¯Ÿã€æ„Ÿå—ã€é™ªä¼´ã€‚</p>
            </div>
        </div>

        <!-- 3. The Coordinator -->
        <div class="section layout-right">
            <div class="decor-circle" style="width: 250px; height: 250px; top: 20%; right: 5%; background: var(--accent);"></div>

            <div class="text-block gs-reveal">
                <span class="en-title">Activities Coordinator</span>
                <h2>åº·æ¨‚è‚¡é•· / é­”äººæªæª</h2>
                <p>å„ä½å–œæ­¡ç†±é¬§çš„å¯ä»¥ä¾†åƒèˆ‡è²¢ç»è‡ªå·±çš„ä¸€ä»½åŠ›ï¼Œ<br>ä»€éº¼éƒ½æªä¸€ä¸‹ã€‚</p>
                <p>ä¸æ˜¯ç‚ºäº†ä»»ä½•ç›®çš„ï¼Œä¹Ÿä¸éœ€è¦å ±åæˆ–æ‰¿è«¾ã€‚<br>æ¯å€‹äººéƒ½å¯ä»¥è‡ªç”±é¸æ“‡ï¼Œé€™è£¡åªç•™ä¸€å€‹ç©ºé–“çµ¦é¡˜æ„çš„äººã€‚</p>
            </div>
        </div>

        <!-- 4. Contact -->
        <div class="section layout-center" style="padding-bottom: 20vh;">
            <div class="text-block gs-reveal">
                <span class="en-title">Connect</span>
                <h2>åŠ å…¥ç©ºé–“</h2>
                <p>å¦‚æœä½ å‰›å¥½æƒ³åƒèˆ‡ã€æƒ³ä¸€èµ·æ„Ÿå—ï¼Œå°±å¯ä»¥ç§è¨Šæˆ‘ã€‚</p>
                <p class="hint">âš ï¸ ç§è¨Šè«‹ä¸è¦ç”¨å°å¸³ï¼Œå…¨ç•¶ä½œè©é¨™ä¸ç†ã€‚</p>

                <div class="social-links">
                    <a href="https://www.threads.net/@nekopapaya" target="_blank" class="social-btn" aria-label="Threads"><i class="fa-brands fa-threads"></i></a>
                    <a href="https://www.instagram.com/nekopapaya/" target="_blank" class="social-btn" aria-label="Instagram"><i class="fa-brands fa-instagram"></i></a>
                </div>
            </div>
        </div>

    </div>

    <!-- SCRIPT -->
    <script type="module">
        import * as THREE from 'three';

        // --- Setup Three.js (Soft Bokeh / Dust Particles) ---
        // This provides a high-quality, professional ambient background without "baffling" abstract geometry.
        const container = document.getElementById('webgl-container');
        const scene = new THREE.Scene();

        // Use the exact background color from Mood Board
        scene.background = new THREE.Color(0xF4F1EC);
        scene.fog = new THREE.FogExp2(0xF4F1EC, 0.02);

        const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 1, 1000);
        camera.position.z = 100;

        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        container.appendChild(renderer.domElement);

        // --- Generate Soft Radial Gradient Texture for Particles ---
        function createCircleTexture() {
            const size = 128;
            const canvas = document.createElement('canvas');
            canvas.width = size;
            canvas.height = size;
            const context = canvas.getContext('2d');

            const center = size / 2;
            const radius = size / 2;
            const gradient = context.createRadialGradient(center, center, 0, center, center, radius);

            // Soft blur edge
            gradient.addColorStop(0, 'rgba(255, 255, 255, 1)');
            gradient.addColorStop(0.2, 'rgba(255, 255, 255, 0.8)');
            gradient.addColorStop(0.5, 'rgba(255, 255, 255, 0.2)');
            gradient.addColorStop(1, 'rgba(255, 255, 255, 0)');

            context.fillStyle = gradient;
            context.fillRect(0, 0, size, size);

            const texture = new THREE.CanvasTexture(canvas);
            return texture;
        }

        const particleTexture = createCircleTexture();

        // --- Create Particle System (The "Atmosphere") ---
        const particleCount = 150;
        const geometry = new THREE.BufferGeometry();
        const positions = new Float32Array(particleCount * 3);
        const sizes = new Float32Array(particleCount);
        const colors = new Float32Array(particleCount * 3);

        const colorAccent = new THREE.Color(0xA8B2A1); // Sage Green
        const colorSub = new THREE.Color(0xE8E2D9);    // Sand
        const colorWhite = new THREE.Color(0xFFFFFF);  // White

        for (let i = 0; i < particleCount; i++) {
            // Spread across a large volume
            positions[i * 3] = (Math.random() - 0.5) * 400;     // x
            positions[i * 3 + 1] = (Math.random() - 0.5) * 400; // y
            positions[i * 3 + 2] = (Math.random() - 0.5) * 200; // z

            // Randomize sizes for depth
            sizes[i] = Math.random() * 20 + 5;

            // Mix colors
            const mix = Math.random();
            const pColor = new THREE.Color();
            if (mix < 0.2) pColor.copy(colorAccent);
            else if (mix < 0.6) pColor.copy(colorSub);
            else pColor.copy(colorWhite);

            colors[i * 3] = pColor.r;
            colors[i * 3 + 1] = pColor.g;
            colors[i * 3 + 2] = pColor.b;
        }

        geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
        geometry.setAttribute('size', new THREE.BufferAttribute(sizes, 1));
        geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));

        // Custom Shader Material for size attenuation and soft blending
        const material = new THREE.ShaderMaterial({
            uniforms: {
                pointTexture: { value: particleTexture },
                time: { value: 0 }
            },
            vertexShader: `
                attribute float size;
                attribute vec3 color;
                varying vec3 vColor;
                uniform float time;

                void main() {
                    vColor = color;
                    // Slow, gentle drift based on time and original position
                    vec3 pos = position;
                    pos.y += sin(time * 0.5 + position.x * 0.01) * 10.0;
                    pos.x += cos(time * 0.3 + position.y * 0.01) * 5.0;

                    vec4 mvPosition = modelViewMatrix * vec4(pos, 1.0);
                    // Attenuate size based on distance
                    gl_PointSize = size * (200.0 / -mvPosition.z);
                    gl_Position = projectionMatrix * mvPosition;
                }
            `,
            fragmentShader: `
                uniform sampler2D pointTexture;
                varying vec3 vColor;
                void main() {
                    vec4 texColor = texture2D(pointTexture, gl_PointCoord);
                    // Extremely soft, low opacity blending
                    gl_FragColor = vec4(vColor, texColor.a * 0.4);
                }
            `,
            blending: THREE.NormalBlending,
            depthTest: false,
            transparent: true
        });

        const particleSystem = new THREE.Points(geometry, material);
        scene.add(particleSystem);


        // --- Animation Loop ---
        const clock = new THREE.Clock();

        // Mouse interaction for subtle parallax
        let mouseX = 0;
        let mouseY = 0;
        let targetX = 0;
        let targetY = 0;

        window.addEventListener('mousemove', (e) => {
            mouseX = (e.clientX - window.innerWidth / 2) * 0.05;
            mouseY = (e.clientY - window.innerHeight / 2) * 0.05;
        });

        function animate() {
            requestAnimationFrame(animate);
            const time = clock.getElapsedTime();

            material.uniforms.time.value = time;

            // Gentle parallax
            targetX = mouseX * 0.5;
            targetY = mouseY * 0.5;
            camera.position.x += (targetX - camera.position.x) * 0.02;
            camera.position.y += (-targetY - camera.position.y) * 0.02;
            camera.lookAt(scene.position);

            renderer.render(scene, camera);
        }
        animate();

        // --- GSAP Scroll Animations ---
        gsap.registerPlugin(ScrollTrigger);

        // Fade in text blocks gently
        gsap.utils.toArray('.gs-reveal').forEach(elem => {
            gsap.to(elem, {
                y: 0, opacity: 1, duration: 1.5, ease: "power2.out",
                scrollTrigger: { trigger: elem, start: "top 80%" }
            });
        });

        // Parallax for CSS decor circles
        gsap.utils.toArray('.decor-circle').forEach((elem, index) => {
            const dir = index % 2 === 0 ? 1 : -1;
            gsap.to(elem, {
                y: 100 * dir,
                ease: "none",
                scrollTrigger: {
                    trigger: elem,
                    start: "top bottom",
                    end: "bottom top",
                    scrub: 1
                }
            });
        });

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

    </script>
</body>
</html>