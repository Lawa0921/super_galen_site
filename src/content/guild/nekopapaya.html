<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEKOPAPAYA | The Safe Haven</title>
    <meta name="description" content="NEKOPAPAYA - 人體狀態觀察分析師 | 康樂股長 | 避風港">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;700&family=Nunito:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <!-- Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js" defer></script>

    <!-- Three.js Import Map -->
    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
            }
        }
    </script>

    <style>
        :root {
            /* Palette: Gentle Haven (Explicit Request) */
            --c-bg: #F4F1EC;       /* Milk Tea White */
            --c-bg-sec: #E8E2D9;   /* Sand */
            --c-accent: #A8B2A1;   /* Sage Green */
            --c-text: #3F3F3F;     /* Warm Dark Grey */
            --c-note: #8C8C8C;     /* Light Grey */
            --c-boat: #D7B698;     /* Wood */
            --c-sea: #A8B2A1;      /* Sage Sea */

            --f-main: 'Noto Sans TC', sans-serif;
            --f-en: 'Nunito', sans-serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: var(--c-bg);
            color: var(--c-text);
            font-family: var(--f-main);
            overflow-x: hidden;
            line-height: 1.8;
        }

        #webgl-container { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 0; }
        .scroller { position: relative; z-index: 10; pointer-events: none; }
        .interactive-layer { pointer-events: auto; }

        /* --- Layout --- */
        .section {
            min-height: 100vh;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            padding: 4rem 2rem; position: relative;
            text-align: center;
        }

        .content-card {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(8px);
            padding: 3rem;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(168, 178, 161, 0.15); /* Sage shadow */
            max-width: 600px;
            margin-bottom: 2rem;
            transform: translateY(30px); opacity: 0;
            border: 1px solid rgba(255,255,255,0.8);
        }

        /* --- Typography --- */
        h1 {
            font-family: var(--f-en); font-weight: 700; font-size: clamp(2.5rem, 6vw, 4rem);
            color: var(--c-text); margin-bottom: 1rem; letter-spacing: 0.05em;
        }
        h2 {
            font-size: 1.1rem; color: var(--c-accent); margin-bottom: 1.5rem;
            font-weight: 700; letter-spacing: 0.1em;
        }
        p {
            font-size: 1.1rem; color: var(--c-text); margin-bottom: 1.5rem;
            font-weight: 300;
        }
        .note { font-size: 0.9rem; color: var(--c-note); }

        .tag {
            display: inline-block; padding: 0.3rem 1rem;
            background: var(--c-bg-sec); color: var(--c-text);
            border-radius: 50px; font-size: 0.9rem; margin: 0 0.3rem;
        }

        /* --- Avatar --- */
        .avatar-circle {
            width: 140px; height: 140px; border-radius: 50%;
            border: 4px solid white; margin: 0 auto 2rem;
            overflow: hidden; box-shadow: 0 10px 20px rgba(0,0,0,0.05);
        }
        .avatar-circle img { width: 100%; height: 100%; object-fit: cover; }

        /* --- Nav --- */
        .nav-fixed {
            position: fixed; top: 2rem; left: 2rem; z-index: 50;
            font-family: var(--f-en); font-weight: 700;
            color: var(--c-text); text-decoration: none;
            padding: 0.5rem 1.2rem; background: rgba(255,255,255,0.8);
            border-radius: 50px; pointer-events: auto;
        }

        /* --- Social --- */
        .social-link {
            display: inline-flex; align-items: center; justify-content: center;
            width: 50px; height: 50px; border-radius: 50%; background: white;
            color: var(--c-text); font-size: 1.2rem; margin: 0 0.5rem;
            transition: 0.2s; text-decoration: none; box-shadow: 0 5px 10px rgba(0,0,0,0.05);
        }
        .social-link:hover { transform: translateY(-3px); color: var(--c-accent); }

    </style>
</head>
<body>

    <a href="/guild" class="nav-fixed">← GUILD</a>
    <div id="webgl-container"></div>

    <div class="scroller">

        <!-- 1. Hero -->
        <section class="section">
            <div class="content-card interactive-layer gs-reveal">
                <div class="avatar-circle">
                    <img src="/assets/img/guild/nekopapaya/avatar.webp" alt="Avatar">
                </div>
                <h1>NEKOPAPAYA</h1>
                <p style="font-weight: 500;">康樂股長 | 人體狀態觀察分析師</p>
                <div style="margin-top: 1rem;">
                    <span class="tag">#避風港</span>
                    <span class="tag">#熱情</span>
                    <span class="tag">#魔人揪揪</span>
                </div>
            </div>
        </section>

        <!-- 2. Intro -->
        <section class="section">
            <div class="content-card interactive-layer gs-reveal">
                <h2>CORE CONCEPT</h2>
                <p>這裡是一個可以停下來、坐一下的地方。<br>有時候我會在這裡，人聚在一起，慢慢享受人與人的溫度。</p>
                <p class="note">不是為了任何目的，也不需要報名或承諾。</p>
            </div>
        </section>

        <!-- 3. Methodology -->
        <section class="section">
            <div class="content-card interactive-layer gs-reveal">
                <h2>ANALYSIS</h2>
                <p><strong>氫氫敲醒你的心靈</strong></p>
                <p>喜歡可愛人事物星人。我觀察、我感受、我連結。<br>將散落的個體，透過熱情重新編織成網。</p>
            </div>
        </section>

        <!-- 4. Contact -->
        <section class="section">
            <div class="content-card interactive-layer gs-reveal">
                <h2>CONNECTION</h2>
                <p>如果你剛好想參與、想一起感受，就可以私訊我。<br>每個人都可以自由選擇，這裡只留一個空間給願意的人。</p>
                <div style="margin-top: 2rem;">
                    <a href="https://www.threads.net/@nekopapaya" target="_blank" class="social-link"><i class="fa-brands fa-threads"></i></a>
                    <a href="https://www.instagram.com/nekopapaya/" target="_blank" class="social-link"><i class="fa-brands fa-instagram"></i></a>
                </div>
                <p class="note" style="margin-top: 1rem;">(私訊請不要用小帳 全當作詐騙不理)</p>
            </div>
        </section>

    </div>

    <!-- SCRIPT -->
    <script type="module">
        import * as THREE from 'three';

        // --- Setup ---
        const container = document.getElementById('webgl-container');
        const scene = new THREE.Scene();
        const bgColor = 0xF4F1EC;
        scene.background = new THREE.Color(bgColor);
        scene.fog = new THREE.FogExp2(bgColor, 0.08); // Heavy fog for "Soft/Blurry" feel

        const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 100);
        camera.position.set(0, 5, 10);
        camera.lookAt(0, 0, 0);

        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        container.appendChild(renderer.domElement);

        // --- Lights ---
        const ambient = new THREE.AmbientLight(0xffffff, 0.8);
        scene.add(ambient);
        const sun = new THREE.DirectionalLight(0xffffff, 0.5);
        sun.position.set(5, 10, 5);
        scene.add(sun);

        // --- Objects ---

        // 1. The Sea (Toon Shader)
        const seaGeo = new THREE.PlaneGeometry(100, 100, 128, 128);
        const seaMat = new THREE.MeshToonMaterial({
            color: 0xA8B2A1, // Sage
            transparent: true, opacity: 0.8
        });
        const sea = new THREE.Mesh(seaGeo, seaMat);
        sea.rotation.x = -Math.PI / 2;
        scene.add(sea);

        // 2. The Boat
        const boatGroup = new THREE.Group();
        scene.add(boatGroup);

        // Hull
        const hullGeo = new THREE.CylinderGeometry(1.2, 0.8, 3.5, 6, 1, false, 0, Math.PI);
        const hullMat = new THREE.MeshToonMaterial({ color: 0xD7B698 }); // Wood
        const hull = new THREE.Mesh(hullGeo, hullMat);
        hull.rotation.z = Math.PI / 2;
        hull.scale.set(1, 0.6, 1); hull.position.y = 0.3;
        boatGroup.add(hull);
        // Deck
        const deck = new THREE.Mesh(new THREE.BoxGeometry(3, 0.1, 1.5), hullMat);
        deck.position.y = 0.2; boatGroup.add(deck);

        // 3. The Passenger (Cute Blob/Cat)
        const charGroup = new THREE.Group();
        charGroup.position.set(0, 0.3, 0);
        boatGroup.add(charGroup);
        // Body (Capsule-ish)
        const bodyGeo = new THREE.CapsuleGeometry(0.3, 0.4, 4, 8);
        const charMat = new THREE.MeshToonMaterial({ color: 0x8AB6D6 }); // Soft Blue
        const body = new THREE.Mesh(bodyGeo, charMat);
        body.rotation.z = Math.PI/2;
        charGroup.add(body);
        // Ears
        const earGeo = new THREE.ConeGeometry(0.1, 0.2, 4);
        const ear1 = new THREE.Mesh(earGeo, charMat); ear1.position.set(-0.2, 0.3, 0); charGroup.add(ear1);
        const ear2 = new THREE.Mesh(earGeo, charMat); ear2.position.set(0.2, 0.3, 0); charGroup.add(ear2);

        // 4. Floating Messages (Bottles)
        const bottleCount = 20;
        const bottleInst = new THREE.InstancedMesh(
            new THREE.CylinderGeometry(0.1, 0.1, 0.4),
            new THREE.MeshToonMaterial({ color: 0xFFFFFF }), // Glass/White
            bottleCount
        );
        scene.add(bottleInst);

        const dummy = new THREE.Object3D();
        const bottles = [];
        for(let i=0; i<bottleCount; i++) {
            const x = (Math.random()-0.5) * 30;
            const z = -Math.random() * 50 - 5;
            bottles.push({ x, z, speed: Math.random()*0.02 + 0.01, offset: Math.random()*10 });
        }

        // 5. Passion Sparks (Particles)
        const pCount = 50;
        const pGeo = new THREE.BufferGeometry();
        const pPos = new Float32Array(pCount * 3);
        for(let i=0; i<pCount; i++) {
            pPos[i*3] = (Math.random()-0.5) * 2; // Close to boat
            pPos[i*3+1] = Math.random() * 2;
            pPos[i*3+2] = (Math.random()-0.5) * 2;
        }
        pGeo.setAttribute('position', new THREE.BufferAttribute(pPos, 3));
        const pMat = new THREE.PointsMaterial({ color: 0xEAC435, size: 0.1 });
        const particles = new THREE.Points(pGeo, pMat);
        boatGroup.add(particles);


        // --- Interaction ---
        let scrollY = 0;
        window.addEventListener('scroll', () => scrollY = window.scrollY);

        const clock = new THREE.Clock();

        function animate() {
            requestAnimationFrame(animate);
            const time = clock.getElapsedTime();

            // Waves
            const pos = seaGeo.attributes.position;
            for(let i=0; i<pos.count; i++) {
                const x = pos.getX(i);
                const y = pos.getY(i);
                // Gentle, slow wave
                const z = Math.sin(x * 0.3 + time * 0.5) * 0.3 + Math.cos(y * 0.2 + time * 0.3) * 0.2;
                pos.setZ(i, z);
            }
            pos.needsUpdate = true;

            // Boat Bobbing
            boatGroup.position.y = Math.sin(time) * 0.1;
            boatGroup.rotation.z = Math.sin(time * 0.5) * 0.05;
            boatGroup.rotation.x = Math.sin(time * 0.3) * 0.05;

            // Floating Bottles (Scroll Driven)
            const speed = 0.05 + scrollY * 0.001;
            for(let i=0; i<bottleCount; i++) {
                const b = bottles[i];
                b.z += speed;
                if(b.z > 5) b.z = -50; // Loop

                dummy.position.set(b.x, 0.1 + Math.sin(time + b.offset)*0.1, b.z);
                dummy.rotation.z = Math.sin(time + b.offset) * 0.5;
                dummy.updateMatrix();
                bottleInst.setMatrixAt(i, dummy.matrix);
            }
            bottleInst.instanceMatrix.needsUpdate = true;

            renderer.render(scene, camera);
        }
        animate();

        // GSAP
        gsap.registerPlugin(ScrollTrigger);
        gsap.utils.toArray('.gs-reveal').forEach(elem => {
            gsap.to(elem, {
                y: 0, opacity: 1, duration: 1, ease: "power2.out",
                scrollTrigger: { trigger: elem, start: "top 85%" }
            });
        });

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

    </script>
</body>
</html>