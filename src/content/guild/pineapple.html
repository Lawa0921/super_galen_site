<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>é³³æ¢¨è€å¸« ğŸ | Sunny Math Logic</title>
    <meta name="description" content="çµ¦äºˆï¼Œæ˜¯ä¸€ç”Ÿæœ€æœ‰æ„ç¾©çš„äº‹ã€‚é³³æ¢¨è€å¸«çš„æ•¸å­¸å¥§æ•¸å¤©åœ°ã€‚">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&family=LXGW+WenKai+TC:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <!-- Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <style>
        :root {
            --sunny-yellow: #FFD700;
            --warm-orange: #FFA500;
            --cream: #FFF8E1;
            --dark-brown: #4A3B2A;
            --leaf-green: #6B8E23;
            --font-main: 'LXGW WenKai TC', sans-serif;
            --font-head: 'Fredoka', sans-serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: var(--cream);
            color: var(--dark-brown);
            font-family: var(--font-main);
            overflow-x: hidden;
            width: 100vw;
        }

        /* --- Backgrounds --- */
        #p5-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1;
            opacity: 0.6;
        }

        #three-container {
            position: absolute; top: 0; left: 0; width: 100%; height: 100vh;
            z-index: 0;
            pointer-events: none; /* Let clicks pass to nav */
        }

        /* --- UI Components --- */
        .glass-card {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(12px);
            border-radius: 20px;
            border: 2px solid rgba(255, 255, 255, 0.8);
            box-shadow: 0 8px 32px rgba(74, 59, 42, 0.1);
            padding: 2rem;
            margin: 1rem 0;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .glass-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(74, 59, 42, 0.15);
            border-color: var(--sunny-yellow);
        }

        .highlight-text {
            color: var(--warm-orange);
            font-weight: bold;
            position: relative;
            display: inline-block;
        }

        .highlight-text::after {
            content: ''; position: absolute; bottom: 0; left: 0; width: 100%; height: 30%;
            background: var(--sunny-yellow);
            opacity: 0.4;
            z-index: -1;
            transform: skewX(-10deg);
        }

        /* --- Navigation --- */
        .nav-back {
            position: fixed; top: 2rem; left: 2rem;
            font-family: var(--font-head);
            font-weight: 600;
            color: var(--dark-brown);
            text-decoration: none;
            z-index: 100;
            background: rgba(255, 255, 255, 0.8);
            padding: 0.5rem 1rem;
            border-radius: 50px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }
        .nav-back:hover {
            background: var(--sunny-yellow);
            color: white;
            transform: scale(1.05);
        }

        /* --- Sections --- */
        section {
            min-height: 100vh;
            padding: 4rem 2rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        /* Hero */
        #hero {
            text-align: center;
            height: 100vh;
        }

        h1 {
            font-family: var(--font-head);
            font-size: clamp(3rem, 10vw, 6rem);
            color: var(--dark-brown);
            margin-bottom: 1rem;
            text-shadow: 2px 2px 0px var(--sunny-yellow);
            position: relative;
            z-index: 10;
        }

        .subtitle {
            font-size: 1.5rem;
            background: var(--dark-brown);
            color: var(--sunny-yellow);
            padding: 0.5rem 1.5rem;
            border-radius: 50px;
            display: inline-block;
            transform: rotate(-2deg);
            box-shadow: 4px 4px 0px rgba(0,0,0,0.1);
            position: relative;
            z-index: 10;
        }

        /* About & Mission */
        .content-container {
            max-width: 1000px;
            width: 100%;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
            align-items: center;
        }

        .avatar-frame {
            position: relative;
            width: 300px;
            height: 300px;
            margin: 0 auto;
        }

        .avatar-img {
            width: 100%; height: 100%;
            border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%;
            object-fit: cover;
            border: 5px solid white;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            animation: blob-pulse 8s ease-in-out infinite;
        }

        @keyframes blob-pulse {
            0% { border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%; }
            50% { border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%; }
            100% { border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%; }
        }

        .text-block h2 {
            font-family: var(--font-head);
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--warm-orange);
        }

        .text-block p {
            font-size: 1.2rem;
            line-height: 1.8;
            margin-bottom: 1.5rem;
        }

        .stat-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: white;
            padding: 0.5rem 1rem;
            border-radius: 12px;
            font-weight: bold;
            color: var(--leaf-green);
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
        }

        /* Gallery */
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
            width: 100%;
            max-width: 1200px;
        }

        .gallery-item {
            position: relative;
            height: 300px;
            border-radius: 15px;
            overflow: hidden;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            background: white;
            padding: 10px; /* Polaroid style */
            padding-bottom: 40px;
            transition: transform 0.3s;
        }

        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 5px;
            filter: sepia(0.2);
            transition: filter 0.3s;
        }

        .gallery-item:hover {
            transform: scale(1.05) rotate(2deg);
            z-index: 10;
        }
        .gallery-item:hover img { filter: sepia(0); }

        .gallery-item::after {
            content: 'ğŸ';
            position: absolute;
            bottom: 10px;
            right: 15px;
            font-size: 1.2rem;
            opacity: 0.5;
        }

        /* Footer */
        .footer-socials {
            display: flex;
            gap: 2rem;
            margin-top: 2rem;
        }
        .social-link {
            font-size: 2.5rem;
            color: var(--dark-brown);
            transition: color 0.3s, transform 0.3s;
        }
        .social-link:hover {
            color: var(--warm-orange);
            transform: rotate(15deg) scale(1.2);
        }

        /* Loader */
        #loader {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--sunny-yellow);
            z-index: 9999;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            transition: transform 0.8s ease-in-out;
        }
        .loader-icon {
            font-size: 4rem;
            animation: spin 2s infinite linear;
            margin-bottom: 1rem;
            color: white;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* Responsive */
        @media (max-width: 768px) {
            .content-container { grid-template-columns: 1fr; text-align: center; }
            .avatar-frame { width: 200px; height: 200px; margin-bottom: 2rem; }
            h1 { font-size: 3.5rem; }
        }

    </style>
</head>
<body>

    <!-- Loading Screen -->
    <div id="loader">
        <i class="fa-solid fa-calculator loader-icon"></i>
        <h2 style="font-family: 'Fredoka'; color: white;">Calculating Joy...</h2>
    </div>

    <a href="/guild/" class="nav-back"><i class="fa-solid fa-arrow-left"></i> GUILD</a>

    <!-- P5 Background -->
    <div id="p5-container"></div>

    <main>
        <!-- Hero Section -->
        <section id="hero">
            <div id="three-container"></div>
            <div style="position: relative; z-index: 10; pointer-events: none;">
                <h1 class="gsap-hero">é³³æ¢¨è€å¸« ğŸ</h1>
                <div class="subtitle gsap-hero">Sunny Math Logic</div>
                <div style="margin-top: 2rem; font-size: 1.2rem; font-weight: bold; color: var(--dark-brown); opacity: 0.8;" class="gsap-hero">
                    Scroll to Explore <i class="fa-solid fa-chevron-down fa-bounce"></i>
                </div>
            </div>
        </section>

        <!-- Intro Section -->
        <section id="intro">
            <div class="content-container">
                <div class="avatar-frame gsap-reveal-left">
                    <img src="/assets/img/guild/pineapple/avatar.webp" alt="Pineapple Teacher" class="avatar-img">
                </div>
                <div class="text-block glass-card gsap-reveal-right">
                    <h2>Hello! æˆ‘æ˜¯é³³æ¢¨è€å¸«</h2>
                    <p>
                        ä¸€ä½è£œç¿’ç­æ•¸å­¸è€å¸«ã€å®‰è¦ªç­è€å¸«ã€æ¡ŒéŠè€å¸«ï¼Œä¹Ÿæ˜¯åœ‹å°å¥§æ•¸æ•™ç·´ã€‚<br>
                        å…¥è¡Œå¤§ç´„ 7 å¹´ã€‚
                    </p>
                    <p>
                        æˆ‘æ˜¯ä¸€ä½<span class="highlight-text">å”‡é¡è£‚æ‚£è€…</span>ï¼Œå¾å°ä¾¿æ¥å—åˆ°è¨±å¤šäººçš„å¹«åŠ©ã€‚<br>
                        é€™ä»½ç¶“æ­·è®“æˆ‘æ±ºå®šå¾äº‹ä¸€ä»½å¯ä»¥å›é¥‹ç¤¾æœƒã€å¹«åŠ©äººçš„å·¥ä½œã€‚<br>
                        å°æˆ‘ä¾†èªªï¼Œé€™å·²ä¸åƒ…åƒ…æ˜¯å·¥ä½œï¼Œè€Œæ˜¯æˆ‘çš„<span class="highlight-text">ä½¿å‘½</span>ã€‚
                    </p>
                    <div style="margin-top: 1rem;">
                        <span class="stat-badge"><i class="fa-solid fa-chalkboard-user"></i> 7å¹´è³‡æ­·</span>
                        <span class="stat-badge"><i class="fa-solid fa-puzzle-piece"></i> æ¡ŒéŠæ•™å­¸</span>
                        <span class="stat-badge"><i class="fa-solid fa-infinity"></i> å¥§æ•¸æ•™ç·´</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Mission Section -->
        <section id="mission" style="background: rgba(255,255,255,0.4);">
            <div class="content-container">
                <div class="text-block glass-card gsap-up" style="grid-column: 1 / -1; text-align: center;">
                    <h2><i class="fa-solid fa-star" style="color: var(--sunny-yellow)"></i> æˆ‘çš„æ•™å­¸ç†å¿µ</h2>
                    <p style="font-size: 1.4rem;">
                        ã€Œä½œç‚ºä¸€åæ•¸å­¸è€å¸«ï¼Œ<br>æˆ‘å¸Œæœ›å¯ä»¥è®“å­©å­å€‘ä¸æ‡¼æ€•æ•¸å­¸ï¼Œ<br>ç”šè‡³å¯ä»¥å–œæ­¡ä¸Šæ•¸å­¸ã€‚ã€
                    </p>
                    <hr style="border: 0; height: 2px; background: var(--sunny-yellow); width: 100px; margin: 2rem auto;">
                    <p>
                        ç›®å‰æ­£åœ¨åŠªåŠ›é–‹è¾¦<span class="highlight-text">å¥§æ•¸ç­</span>ï¼Œé è¨ˆä¸‹å­¸æœŸå¯ä»¥é–‹èª²æˆåŠŸï¼<br>
                        2024å¹´ï¼Œæˆ‘é–‹å§‹åŸ¹è¨“å­©å­å€‘åƒåŠ å¥§æ—åŒ¹å…‹æ•¸å­¸åœ˜é«”ç«¶è³½ï¼Œ<br>
                        ç›®å‰å­¸ç”Ÿå·²åœ¨å€‹äººè³½ç²å¾— <strong style="color: silver">éŠ€ç</strong> å’Œ <strong style="color: #cd7f32">éŠ…ç</strong> çš„ä½³ç¸¾ã€‚
                    </p>
                    <div class="subtitle" style="margin-top: 2rem; transform: rotate(1deg);">
                        çµ¦äºˆï¼Œæ˜¯ä¸€ç”Ÿæœ€æœ‰æ„ç¾©çš„äº‹ã€‚
                    </div>
                </div>
            </div>
        </section>

        <!-- Gallery Section -->
        <section id="gallery">
            <h2 class="gsap-up" style="font-family: var(--font-head); font-size: 3rem; margin-bottom: 2rem; color: var(--warm-orange);">
                æ•™å­¸å›æ†¶éŒ„
            </h2>
            <div class="gallery-grid">
                <!-- Generate 9 items -->
                <div class="gallery-item gsap-fade"><img src="/assets/img/guild/pineapple/gallery_1.webp"></div>
                <div class="gallery-item gsap-fade"><img src="/assets/img/guild/pineapple/gallery_2.webp"></div>
                <div class="gallery-item gsap-fade"><img src="/assets/img/guild/pineapple/gallery_3.webp"></div>
                <div class="gallery-item gsap-fade"><img src="/assets/img/guild/pineapple/gallery_4.webp"></div>
                <div class="gallery-item gsap-fade"><img src="/assets/img/guild/pineapple/gallery_5.webp"></div>
                <div class="gallery-item gsap-fade"><img src="/assets/img/guild/pineapple/gallery_6.webp"></div>
                <div class="gallery-item gsap-fade"><img src="/assets/img/guild/pineapple/gallery_7.webp"></div>
                <div class="gallery-item gsap-fade"><img src="/assets/img/guild/pineapple/gallery_8.webp"></div>
                <div class="gallery-item gsap-fade"><img src="/assets/img/guild/pineapple/gallery_9.webp"></div>
            </div>
        </section>

        <!-- Footer -->
        <footer style="padding: 4rem 2rem; text-align: center; background: var(--dark-brown); color: var(--cream);">
            <h3 style="font-family: var(--font-head); margin-bottom: 1rem;">Connect with Pineapple Teacher</h3>
            <div class="footer-socials" style="justify-content: center;">
                <a href="https://www.instagram.com/a_l_w_a_y_s_joy/" target="_blank" rel="noopener noreferrer" class="social-link"><i class="fa-brands fa-instagram"></i></a>
                <a href="https://www.threads.com/@a_l_w_a_y_s_joy" target="_blank" rel="noopener noreferrer" class="social-link"><i class="fa-brands fa-threads"></i></a>
            </div>
            <p style="margin-top: 2rem; opacity: 0.5;">Â© 2024 Sunny Math Logic. Design by SuperGalen's Guild.</p>
        </footer>
    </main>

    <script>
        // --- Loader ---
        window.addEventListener('load', () => {
            gsap.to('#loader', {
                y: "-100%",
                duration: 1,
                ease: "power4.inOut",
                delay: 0.5
            });
            initThree(); // Start 3D when resources loaded
        });

        // --- P5.js Background (Math Playground) ---
        const sketch = (p) => {
            let symbols = [];
            const symbolChars = ['+', '-', 'Ã—', 'Ã·', 'âˆ‘', 'Ï€', 'âˆ', 'âˆš', 'âˆ«'];

            p.setup = () => {
                const canvas = p.createCanvas(p.windowWidth, p.windowHeight);
                canvas.parent('p5-container');
                p.textAlign(p.CENTER, p.CENTER);

                // Spawn symbols
                for(let i=0; i<30; i++) {
                    symbols.push(new MathSymbol(p));
                }
            };

            p.draw = () => {
                p.clear();
                // Subtle gradient trace? No, clean background.

                symbols.forEach(s => {
                    s.update();
                    s.display();
                    s.interact();
                });
            };

            p.windowResized = () => {
                p.resizeCanvas(p.windowWidth, p.windowHeight);
            };

            class MathSymbol {
                constructor(p) {
                    this.p = p;
                    this.char = p.random(symbolChars);
                    this.pos = p.createVector(p.random(p.width), p.random(p.height));
                    this.vel = p5.Vector.random2D().mult(0.5);
                    this.size = p.random(20, 50);
                    this.baseSize = this.size;
                    this.color = p.color(255, 165, 0, 100); // Orange
                    if(p.random() > 0.5) this.color = p.color(255, 215, 0, 100); // Gold
                }

                update() {
                    this.pos.add(this.vel);
                    // Wrap around
                    if(this.pos.x < -50) this.pos.x = this.p.width + 50;
                    if(this.pos.x > this.p.width + 50) this.pos.x = -50;
                    if(this.pos.y < -50) this.pos.y = this.p.height + 50;
                    if(this.pos.y > this.p.height + 50) this.pos.y = -50;

                    // Pulse
                    this.size = this.baseSize + Math.sin(this.p.frameCount * 0.05) * 5;
                }

                display() {
                    this.p.noStroke();
                    this.p.fill(this.color);
                    this.p.textSize(this.size);
                    this.p.text(this.char, this.pos.x, this.pos.y);
                }

                interact() {
                    let mouse = this.p.createVector(this.p.mouseX, this.p.mouseY);
                    let dist = p5.Vector.dist(this.pos, mouse);
                    if(dist < 150) {
                        let repulse = p5.Vector.sub(this.pos, mouse);
                        repulse.normalize();
                        repulse.mult(2);
                        this.vel.add(repulse);
                        this.vel.limit(4);
                    } else {
                        // Return to calm speed
                        this.vel.limit(0.5);
                    }
                }
            }
        };
        new p5(sketch);

        // --- Three.js Hero (The Geometric Pineapple) ---
        let scene, camera, renderer, pineappleGroup;

        function initThree() {
            const container = document.getElementById('three-container');
            scene = new THREE.Scene();

            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 5;

            renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            container.appendChild(renderer.domElement);

            // Lighting
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
            scene.add(ambientLight);

            const dirLight = new THREE.DirectionalLight(0xffd700, 1);
            dirLight.position.set(5, 5, 5);
            scene.add(dirLight);

            // Create "Pineapple" Structure
            // A stack of Icosahedrons/Cylinders?
            pineappleGroup = new THREE.Group();

            // Body
            const geometry = new THREE.IcosahedronGeometry(1.5, 1);
            const material = new THREE.MeshStandardMaterial({
                color: 0xffa500,
                wireframe: false,
                flatShading: true,
                roughness: 0.4,
                metalness: 0.2
            });
            const body = new THREE.Mesh(geometry, material);

            // Add wireframe overlay for "Math" feel
            const wireGeo = new THREE.WireframeGeometry(geometry);
            const wireMat = new THREE.LineBasicMaterial({ color: 0xffd700 });
            const wireframe = new THREE.LineSegments(wireGeo, wireMat);

            body.add(wireframe);
            pineappleGroup.add(body);

            // Leaves (Cones)
            const leafMat = new THREE.MeshStandardMaterial({ color: 0x6B8E23, flatShading: true });
            for(let i=0; i<5; i++) {
                const leaf = new THREE.Mesh(new THREE.ConeGeometry(0.3, 1.5, 8), leafMat);
                leaf.position.y = 1.2;
                leaf.rotation.x = (Math.random() - 0.5);
                leaf.rotation.z = (Math.random() - 0.5);
                leaf.rotation.y = (i / 5) * Math.PI * 2;
                leaf.position.x = Math.sin(leaf.rotation.y) * 0.3;
                leaf.position.z = Math.cos(leaf.rotation.y) * 0.3;
                pineappleGroup.add(leaf);
            }

            scene.add(pineappleGroup);

            // Floating Numbers around it
            const fontLoader = new THREE.FontLoader();
            // Simplify: Just use small spheres or cubes orbiting for now to avoid font load complexity
            // Or better, torus rings
            const ringGeo = new THREE.TorusGeometry(2.5, 0.05, 16, 100);
            const ringMat = new THREE.MeshBasicMaterial({ color: 0xffd700, transparent: true, opacity: 0.3 });
            const ring1 = new THREE.Mesh(ringGeo, ringMat);
            const ring2 = new THREE.Mesh(ringGeo, ringMat);
            ring2.rotation.x = Math.PI / 2;
            pineappleGroup.add(ring1);
            pineappleGroup.add(ring2);

            // Loop
            animateThree();
        }

        function animateThree() {
            requestAnimationFrame(animateThree);
            if(pineappleGroup) {
                pineappleGroup.rotation.y += 0.005;
                pineappleGroup.rotation.x = Math.sin(Date.now() * 0.001) * 0.1;
            }
            renderer.render(scene, camera);
        }

        window.addEventListener('resize', () => {
            if(camera && renderer) {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            }
        });

        // --- GSAP Scroll Animations ---
        gsap.registerPlugin(ScrollTrigger);

        // Hero Reveal
        gsap.from(".gsap-hero", {
            y: 50, opacity: 0, duration: 1, stagger: 0.2, delay: 1.5, ease: "back.out(1.7)"
        });

        // ScrollTriggers
        gsap.utils.toArray('.gsap-reveal-left').forEach(el => {
            gsap.from(el, {
                x: -100, opacity: 0, duration: 1,
                scrollTrigger: { trigger: el, start: "top 80%" }
            });
        });

        gsap.utils.toArray('.gsap-reveal-right').forEach(el => {
            gsap.from(el, {
                x: 100, opacity: 0, duration: 1,
                scrollTrigger: { trigger: el, start: "top 80%" }
            });
        });

        gsap.utils.toArray('.gsap-up').forEach(el => {
            gsap.from(el, {
                y: 50, opacity: 0, duration: 0.8,
                scrollTrigger: { trigger: el, start: "top 85%" }
            });
        });

        // Gallery Stagger
        gsap.from(".gallery-item", {
            scale: 0.5, opacity: 0,
            duration: 0.5,
            stagger: 0.1,
            ease: "back.out(1.7)",
            scrollTrigger: {
                trigger: ".gallery-grid",
                start: "top 80%"
            }
        });

        // Rotate Pineapple on scroll
        ScrollTrigger.create({
            trigger: "body",
            start: "top top",
            end: "bottom bottom",
            onUpdate: (self) => {
                if(pineappleGroup) {
                    gsap.to(pineappleGroup.rotation, {
                        y: self.progress * Math.PI * 4,
                        overwrite: true
                    });
                }
            }
        });

    </script>
</body>
</html>
