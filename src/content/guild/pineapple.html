<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>é³³æ¢¨è€å¸« ğŸ | Math Playground</title>
    <meta name="description" content="çµ¦äºˆï¼Œæ˜¯ä¸€ç”Ÿæœ€æœ‰æ„ç¾©çš„äº‹ã€‚é³³æ¢¨è€å¸«çš„æ•¸å­¸å¥§æ•¸å¤©åœ°ã€‚">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&family=LXGW+WenKai+TC:wght@400;700&family=Nunito:wght@400;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <!-- Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/TextPlugin.min.js"></script>

    <style>
        :root {
            --bg-color: #FFECB3; /* Light Warm Yellow */
            --primary: #FFB300; /* Deep Amber */
            --accent: #FF6F00; /* Orange */
            --green: #43A047; /* Pineapple Green */
            --text: #3E2723; /* Dark Brown */
            --white: #ffffff;
            --clay-shadow: 8px 8px 16px rgba(166, 145, 96, 0.4), -8px -8px 16px rgba(255, 255, 255, 0.8);
            --font-main: 'LXGW WenKai TC', sans-serif;
            --font-head: 'Fredoka', sans-serif;
            --font-en: 'Nunito', sans-serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: var(--bg-color);
            color: var(--text);
            font-family: var(--font-main);
            overflow-x: hidden;
            width: 100vw;
        }

        /* --- Canvases --- */
        #three-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 0;
            pointer-events: none;
            opacity: 0.8;
        }

        #p5-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 100; /* Top layer for cursor */
            pointer-events: none;
        }

        /* --- Navigation --- */
        .nav-back {
            position: fixed; top: 2rem; left: 2rem;
            font-family: var(--font-en);
            font-weight: 800;
            font-size: 1rem;
            color: var(--text);
            text-decoration: none;
            z-index: 200;
            padding: 1rem 2rem;
            background: var(--white);
            border-radius: 50px;
            box-shadow: var(--clay-shadow);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); /* Bouncy */
            pointer-events: auto;
            display: flex; align-items: center; gap: 10px;
        }
        .nav-back:hover {
            transform: scale(1.1) rotate(-3deg);
            color: var(--accent);
        }

        /* --- Layout --- */
        main { position: relative; z-index: 10; opacity: 0; /* Hidden initially for entrance */ }

        section {
            position: relative;
            width: 100%;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 4rem 2rem;
        }

        /* Claymorphism Cards */
        .clay-card {
            background: var(--white);
            border-radius: 30px;
            padding: 3rem;
            box-shadow: var(--clay-shadow);
            transition: transform 0.3s;
            position: relative;
            overflow: hidden;
        }

        .badge {
            display: inline-block;
            background: var(--primary);
            color: white;
            padding: 0.5rem 1.5rem;
            border-radius: 20px;
            font-family: var(--font-en);
            font-weight: bold;
            box-shadow: inset 2px 2px 5px rgba(0,0,0,0.1);
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
        }

        /* Hero */
        #hero h1 {
            font-family: var(--font-head);
            font-size: clamp(4rem, 15vw, 10rem);
            line-height: 0.9;
            color: var(--primary);
            text-shadow: 4px 4px 0px var(--white), 8px 8px 0px rgba(0,0,0,0.1);
            text-align: center;
            position: relative;
            z-index: 2;
        }

        .hero-subtitle {
            font-size: 1.5rem;
            margin-top: 1rem;
            background: var(--white);
            padding: 1rem 2rem;
            border-radius: 20px;
            box-shadow: var(--clay-shadow);
            transform: rotate(-2deg);
        }

        /* Bio */
        .bio-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            max-width: 1200px;
            width: 100%;
            align-items: center;
        }

        .avatar-frame {
            position: relative;
            width: 100%;
            aspect-ratio: 1;
            border-radius: 50%;
            background: var(--white);
            padding: 1rem;
            box-shadow: var(--clay-shadow);
            transform: rotate(3deg);
        }
        .avatar-img {
            width: 100%; height: 100%;
            object-fit: cover;
            border-radius: 50%;
        }

        .bio-text h2 {
            font-size: 2.5rem;
            color: var(--accent);
            margin-bottom: 1.5rem;
            font-family: var(--font-head);
        }
        .bio-text p {
            font-size: 1.2rem;
            line-height: 1.8;
            margin-bottom: 1.5rem;
        }

        /* Timeline Items */
        .timeline-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            max-width: 1200px;
            width: 100%;
        }
        .timeline-card {
            background: var(--white);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: var(--clay-shadow);
            text-align: center;
            border-top: 10px solid var(--primary);
        }
        .timeline-icon {
            font-size: 3rem;
            color: var(--primary);
            margin-bottom: 1rem;
        }

        /* Horizontal Gallery */
        #gallery-section {
            background: var(--primary);
            overflow: hidden;
            padding: 0;
            display: flex;
            align-items: center;
        }

        .gallery-track {
            display: flex;
            gap: 4vw;
            padding: 0 10vw;
            width: max-content;
        }

        .photo-card {
            width: 350px;
            height: 450px;
            background: var(--white);
            padding: 15px; /* Polaroid style */
            padding-bottom: 60px; /* Space for caption */
            box-shadow: 10px 10px 20px rgba(0,0,0,0.2);
            transform: rotate(var(--rot));
            transition: transform 0.3s;
            flex-shrink: 0;
            position: relative;
            cursor: pointer;
            overflow: hidden; /* For overlay effects */
        }
        .photo-card:hover {
            transform: scale(1.05) rotate(0deg) !important;
            z-index: 10;
        }
        .photo-card img {
            width: 100%; height: 100%;
            object-fit: cover;
            filter: sepia(20%);
        }

        /* Interactive Caption */
        .photo-caption {
            position: absolute; bottom: 0; left: 0; width: 100%;
            height: 60px;
            display: flex; justify-content: center; align-items: center;
            font-family: var(--font-head);
            color: var(--text);
            font-size: 1.5rem;
            opacity: 0; /* Hidden initially */
            transform: translateY(20px);
        }

        .scribble-overlay {
            position: absolute; inset: 0;
            pointer-events: none;
            mix-blend-mode: multiply;
            opacity: 0.6;
        }

        /* Footer */
        .connect-box {
            background: var(--white);
            padding: 4rem;
            border-radius: 40px;
            text-align: center;
            box-shadow: var(--clay-shadow);
        }
        .social-btn {
            display: inline-flex;
            width: 80px; height: 80px;
            background: #f0f0f0;
            border-radius: 50%;
            justify-content: center; align-items: center;
            font-size: 2rem;
            color: var(--text);
            text-decoration: none;
            margin: 0 1rem;
            box-shadow: inset 5px 5px 10px rgba(0,0,0,0.1), inset -5px -5px 10px rgba(255,255,255,0.8);
            transition: all 0.3s;
        }
        .social-btn:hover {
            transform: translateY(-5px);
            color: var(--accent);
            background: var(--white);
            box-shadow: var(--clay-shadow);
        }

        /* Responsive */
        @media(max-width: 900px) {
            .bio-grid { grid-template-columns: 1fr; text-align: center; }
            .avatar-frame { width: 70%; margin: 0 auto; }
            #hero h1 { font-size: 5rem; }
            .photo-card { width: 260px; height: 340px; }
        }

        #loader {
            position: fixed; inset: 0; background: var(--bg-color);
            z-index: 9999; display: flex; justify-content: center; align-items: center;
        }
        .loader-pineapple {
            font-size: 5rem; animation: bounce-loader 0.6s infinite alternate;
        }
        @keyframes bounce-loader { from { transform: translateY(0); } to { transform: translateY(-30px); } }

        /* Entrance Overlay */
        #entrance-overlay {
            position: fixed; inset: 0;
            background: #fff;
            z-index: 10000;
            display: flex; justify-content: center; align-items: center;
            overflow: hidden;
        }
        #big-bang-num {
            font-family: var(--font-head);
            font-size: 10rem;
            color: var(--primary);
            font-weight: bold;
        }

    </style>
</head>
<body>

    <!-- Entrance Animation -->
    <div id="entrance-overlay">
        <div id="big-bang-num">0</div>
    </div>

    <a href="/guild/" class="nav-back"><i class="fa-solid fa-arrow-left"></i> GUILD</a>

    <div id="three-container"></div>
    <div id="p5-container"></div>

    <main>
        <!-- HERO -->
        <section id="hero">
            <h1 class="gsap-pop">PINEAPPLE<br>TEACHER</h1>
            <div class="hero-subtitle gsap-pop">
                <i class="fa-solid fa-calculator"></i> MATH Â· LOGIC Â· JOY
            </div>
            <div style="margin-top: 3rem; font-size: 2rem; color: var(--text); animation: float 3s infinite ease-in-out;">
                <i class="fa-solid fa-chevron-down"></i>
            </div>
        </section>

        <!-- BIO -->
        <section id="bio">
            <div class="bio-grid">
                <div class="avatar-frame gsap-slide-right">
                    <img src="/assets/img/guild/pineapple/avatar.webp" class="avatar-img">
                </div>
                <div class="bio-text clay-card gsap-slide-left">
                    <div style="margin-bottom: 1rem;">
                        <span class="badge">7 Years Exp</span>
                        <span class="badge" style="background:var(--accent)">Math</span>
                        <span class="badge" style="background:var(--green)">Olympiad</span>
                    </div>
                    <h2>çµ¦äºˆï¼Œæ˜¯ä¸€ç”Ÿæœ€æœ‰æ„ç¾©çš„äº‹ã€‚</h2>
                    <p>
                        æˆ‘æ˜¯<b>é³³æ¢¨è€å¸«ğŸ</b>ï¼Œä¸€ä½è£œç¿’ç­æ•¸å­¸è€å¸«ã€å®‰è¦ªç­è€å¸«ã€æ¡ŒéŠè€å¸«èˆ‡å¥§æ•¸æ•™ç·´ã€‚
                    </p>
                    <p>
                        èº«ç‚ºä¸€ä½<b>å”‡é¡è£‚æ‚£è€…</b>ï¼Œå¾å°ä¾¿æ¥å—åˆ°è¨±å¤šäººçš„å¹«åŠ©ï¼Œä¹Ÿè®“æˆ‘æ±ºå®šå¾äº‹ä¸€ä»½å¯ä»¥å›é¥‹ç¤¾æœƒã€å¹«åŠ©äººçš„å·¥ä½œã€‚å°æˆ‘ä¾†èªªï¼Œé€™å·²ä¸åƒ…åƒ…æ˜¯å·¥ä½œï¼Œè€Œæ˜¯æˆ‘çš„<b>ä½¿å‘½</b>ã€‚
                    </p>
                    <p>
                        æˆ‘å¸Œæœ›è®“å­©å­å€‘ä¸æ‡¼æ€•æ•¸å­¸ï¼Œç”šè‡³å–œæ­¡ä¸Šæ•¸å­¸ã€‚ç›®å‰æ­£è‡´åŠ›æ–¼å¥§æ•¸åŸ¹è¨“ï¼Œå­¸ç”Ÿå·²åœ¨å€‹äººè³½ç²å¾—<b>éŠ€ç</b>å’Œ<b>éŠ…ç</b>ä½³ç¸¾ï¼ğŸ†
                    </p>
                </div>
            </div>
        </section>

        <!-- TIMELINE / HIGHLIGHTS -->
        <section id="highlights">
            <h2 style="font-family: var(--font-head); font-size: 3rem; color: var(--text); margin-bottom: 3rem; text-align: center;">
                MY JOURNEY
            </h2>
            <div class="timeline-grid">
                <div class="timeline-card gsap-up">
                    <div class="timeline-icon"><i class="fa-solid fa-chalkboard-user"></i></div>
                    <h3>Teaching</h3>
                    <p>æ·±è€•æ•™å­¸ç¾å ´ 7 å¹´ï¼Œç”¨è€å¿ƒèˆ‡æ„›å¿ƒé™ªä¼´æ¯ä¸€ä½å­©å­æˆé•·ã€‚</p>
                </div>
                <div class="timeline-card gsap-up">
                    <div class="timeline-icon"><i class="fa-solid fa-puzzle-piece"></i></div>
                    <h3>Board Games</h3>
                    <p>é€éæ¡ŒéŠåŸ¹é¤Šé‚è¼¯æ€è€ƒï¼Œè®“æ•¸å­¸è®Šå¾—å¥½ç©åˆæœ‰è¶£ï¼</p>
                </div>
                <div class="timeline-card gsap-up">
                    <div class="timeline-icon"><i class="fa-solid fa-trophy"></i></div>
                    <h3>Olympiad</h3>
                    <p>2024 é–‹å§‹åŸ¹è¨“å¥§æ•¸åœ˜éšŠï¼Œå¸¶é ˜å­©å­å¾æˆ°æ¯”è³½ï¼Œå‹‡å¥ªä½³ç¸¾ã€‚</p>
                </div>
            </div>
        </section>

        <!-- HORIZONTAL GALLERY -->
        <section id="gallery-section">
            <!-- This container pins -->
            <div id="gallery-pin-wrap" style="width: 100%; overflow: hidden; height: 100vh; display: flex; align-items: center; background: #FFC107;">
                <h2 style="position: absolute; top: 10%; left: 5%; font-family: var(--font-head); font-size: 8rem; opacity: 0.2; color: white; white-space: nowrap;">
                    MEMORIES DATABASE
                </h2>
                <div class="gallery-track">
                    <!-- Generic Fun Captions -->
                    <div class="photo-card" style="--rot: -3deg"><img src="/assets/img/guild/pineapple/gallery_1.webp"><div class="photo-caption">Moment No.1</div></div>
                    <div class="photo-card" style="--rot: 2deg"><img src="/assets/img/guild/pineapple/gallery_2.webp"><div class="photo-caption">Adventure</div></div>
                    <div class="photo-card" style="--rot: -1deg"><img src="/assets/img/guild/pineapple/gallery_3.webp"><div class="photo-caption">Focus</div></div>
                    <div class="photo-card" style="--rot: 3deg"><img src="/assets/img/guild/pineapple/gallery_4.webp"><div class="photo-caption">Team</div></div>
                    <div class="photo-card" style="--rot: -2deg"><img src="/assets/img/guild/pineapple/gallery_5.webp"><div class="photo-caption">Glory</div></div>
                    <div class="photo-card" style="--rot: 1deg"><img src="/assets/img/guild/pineapple/gallery_6.webp"><div class="photo-caption">Challenge</div></div>
                    <div class="photo-card" style="--rot: -3deg"><img src="/assets/img/guild/pineapple/gallery_7.webp"><div class="photo-caption">Victory</div></div>
                    <div class="photo-card" style="--rot: 2deg"><img src="/assets/img/guild/pineapple/gallery_8.webp"><div class="photo-caption">Together</div></div>
                    <div class="photo-card" style="--rot: 0deg"><img src="/assets/img/guild/pineapple/gallery_9.webp"><div class="photo-caption">Origin</div></div>
                </div>
            </div>
        </section>

        <!-- SERVICES -->
        <section id="services">
            <h2 style="font-family: var(--font-head); font-size: 3rem; color: var(--text); margin-bottom: 3rem; text-align: center;">
                WHAT I OFFER
            </h2>
            <div class="timeline-grid">
                <div class="timeline-card gsap-up">
                    <div class="timeline-icon"><i class="fa-solid fa-calculator"></i></div>
                    <h3>æ•¸å­¸è£œç¿’</h3>
                    <p>å°ˆæ¥­åœ‹å°/åœ‹ä¸­æ•¸å­¸æ•™å­¸ï¼Œå¹«åŠ©å­©å­å…‹æœå°æ•¸å­¸çš„ææ‡¼ï¼Œå»ºç«‹ç©©å›ºåŸºç¤ã€‚</p>
                </div>
                <div class="timeline-card gsap-up">
                    <div class="timeline-icon"><i class="fa-solid fa-medal"></i></div>
                    <h3>å¥§æ•¸åŸ¹è¨“</h3>
                    <p>é‡å°å¥§æ—åŒ¹å…‹æ•¸å­¸ç«¶è³½é€²è¡Œå°ˆæ¥­æŒ‡å°ï¼Œå·²æœ‰å­¸ç”Ÿç²å¾—éŠ€ç‰Œèˆ‡éŠ…ç‰Œä½³ç¸¾ã€‚</p>
                </div>
                <div class="timeline-card gsap-up">
                    <div class="timeline-icon"><i class="fa-solid fa-chess-board"></i></div>
                    <h3>æ¡ŒéŠé‚è¼¯</h3>
                    <p>é€éæ¡ŒéŠå¼•å°é‚è¼¯æ€è€ƒï¼Œåœ¨éŠæˆ²ä¸­å­¸ç¿’ç­–ç•¥è¦åŠƒèˆ‡å•é¡Œè§£æ±ºã€‚</p>
                </div>
                <div class="timeline-card gsap-up">
                    <div class="timeline-icon"><i class="fa-solid fa-hand-holding-heart"></i></div>
                    <h3>ç”Ÿå‘½é™ªä¼´</h3>
                    <p>ä»¥è‡ªèº«ç¶“æ­·é¼“å‹µå­©å­ï¼Œä¸åƒ…æ˜¯çŸ¥è­˜çš„å‚³éè€…ï¼Œæ›´æ˜¯ç”Ÿå‘½çš„é™ªä¼´è€…ã€‚</p>
                </div>
            </div>
        </section>

        <!-- FOOTER CONTENT -->
        <section style="min-height: 40vh;">
            <div class="connect-box gsap-pop">
                <h2 style="font-family: var(--font-head); font-size: 3rem; margin-bottom: 2rem;">Let's Connect!</h2>
                <div style="margin-bottom: 2rem;">
                    <a href="https://www.instagram.com/a_l_w_a_y_s_joy/" target="_blank" class="social-btn"><i class="fa-brands fa-instagram"></i></a>
                    <a href="https://www.threads.com/@a_l_w_a_y_s_joy" target="_blank" class="social-btn"><i class="fa-brands fa-threads"></i></a>
                </div>
                <p>çµ¦äºˆï¼Œæ˜¯ä¸€ç”Ÿæœ€æœ‰æ„ç¾©çš„äº‹ã€‚</p>
            </div>
        </section>
    </main>

    <footer style="text-align: center; padding: 2rem; color: var(--text); font-family: var(--font-main); opacity: 0.7; position: relative; z-index: 10;">
        <p>Made with <span style="color: #e25555;">â™¥</span> by <a href="/guild/" style="text-decoration: none; color: var(--accent); font-weight: bold;">SuperGalen's Dungeon</a></p>
    </footer>

    <script>
        // Global
        let isExploded = false;

        // --- ENTRANCE & INIT ---
        window.onload = () => {
             // Init visuals first but keep them hidden or centered
             initThree();
             initGSAP();
             initP5(); // New wrapper for p5 to fix interaction

             // Big Bang Entrance
             const tl = gsap.timeline();

             // 1. Count up or just pop the number
             tl.to('#big-bang-num', {
                 scale: 50, duration: 1.5, ease: 'power4.in',
                 onStart: () => {
                    // Trigger 3D explosion slightly before the end
                    setTimeout(() => explodeGeometry(), 1000);
                 }
             })
             .to('#entrance-overlay', { opacity: 0, duration: 0.5, display: 'none' }, "-=0.5")
             .to('main', { opacity: 1, duration: 0.5 }, "-=0.5")
             .from('#hero h1', { scale: 0, rotation: 360, duration: 1.5, ease: 'elastic.out(1, 0.3)' }, "-=0.2");
        };


        // --- P5.JS (Chalk/Dust Cursor) ---
        function initP5() {
            const sketch = (p) => {
                let points = [];
                let particles = []; // Dust
                let cx = -100, cy = -100;

                p.setup = () => {
                    let canvas = p.createCanvas(p.windowWidth, p.windowHeight);
                    canvas.parent('p5-container');

                    window.addEventListener('mousemove', (e) => {
                        cx = e.clientX;
                        cy = e.clientY;
                    });
                };

                p.draw = () => {
                    p.clear();

                    // Add stroke point
                    if(cx !== -100 && cy !== -100) {
                         points.push({x: cx, y: cy, life: 255});
                         // Spawn dust
                         if(p.random() < 0.3) {
                             particles.push(new Dust(p, cx, cy));
                         }
                    }

                    // Draw Line
                    p.noFill();
                    p.strokeWeight(2);
                    for (let i = 0; i < points.length; i++) {
                        let pt = points[i];
                        pt.life -= 5;

                        if(i > 0) {
                            let prev = points[i-1];
                            let d = p.dist(pt.x, pt.y, prev.x, prev.y);
                            if(d < 50) {
                                p.stroke(62, 39, 35, pt.life);
                                p.line(pt.x, pt.y, prev.x, prev.y);
                            }
                        }
                    }
                    points = points.filter(pt => pt.life > 0);

                    // Draw Dust
                    for (let i = particles.length - 1; i >= 0; i--) {
                        particles[i].update();
                        particles[i].display();
                        if (particles[i].finished()) particles.splice(i, 1);
                    }
                };

                p.windowResized = () => {
                    p.resizeCanvas(p.windowWidth, p.windowHeight);
                };

                class Dust {
                    constructor(p, x, y) {
                        this.p = p;
                        this.x = x + p.random(-5, 5);
                        this.y = y + p.random(-5, 5);
                        this.vx = p.random(-1, 1);
                        this.vy = p.random(-1, 1);
                        this.alpha = 200;
                        this.size = p.random(2, 5);
                    }
                    update() {
                        this.x += this.vx; this.y += this.vy;
                        this.alpha -= 4;
                    }
                    display() {
                        this.p.noStroke();
                        this.p.fill(120, 80, 60, this.alpha);
                        this.p.circle(this.x, this.y, this.size);
                    }
                    finished() { return this.alpha < 0; }
                }
            };
            new p5(sketch);
        }

        // --- THREE.JS (Floating Geometry with Explosion) ---
        let scene, camera, renderer;
        let shapes = [];

        function initThree() {
            const container = document.getElementById('three-container');
            scene = new THREE.Scene();

            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 100);
            camera.position.z = 15;

            renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
            container.appendChild(renderer.domElement);

            const ambient = new THREE.AmbientLight(0xffffff, 0.6);
            scene.add(ambient);
            const dirLight = new THREE.DirectionalLight(0xffffff, 0.8);
            dirLight.position.set(10, 20, 10);
            scene.add(dirLight);

            // Create Shapes centered initially
            const colors = [0xFFB300, 0xFF6F00, 0x43A047, 0xFFFFFF];
            const geometries = [
                new THREE.IcosahedronGeometry(0.8, 0),
                new THREE.BoxGeometry(1, 1, 1),
                new THREE.TetrahedronGeometry(1, 0),
                new THREE.TorusGeometry(0.6, 0.2, 8, 16)
            ];

            for(let i=0; i<60; i++) {
                const geo = geometries[Math.floor(Math.random() * geometries.length)];
                const mat = new THREE.MeshToonMaterial({
                    color: colors[Math.floor(Math.random() * colors.length)]
                });
                const mesh = new THREE.Mesh(geo, mat);

                // Start at ZERO
                mesh.position.set(0, 0, 0);
                mesh.visible = false; // Hide until explosion

                // Store target position for explosion
                mesh.userData = {
                    targetX: (Math.random() - 0.5) * 50,
                    targetY: (Math.random() - 0.5) * 40,
                    targetZ: (Math.random() - 0.5) * 20,
                    rotX: (Math.random() - 0.5) * 0.02,
                    rotY: (Math.random() - 0.5) * 0.02,
                    floatSpeed: Math.random() * 0.02 + 0.01
                };

                scene.add(mesh);
                shapes.push(mesh);
            }

            animateThree();
        }

        function explodeGeometry() {
            shapes.forEach(mesh => {
                mesh.visible = true;
                // Use GSAP inside Three.js context
                gsap.to(mesh.position, {
                    x: mesh.userData.targetX,
                    y: mesh.userData.targetY,
                    z: mesh.userData.targetZ,
                    duration: 2,
                    ease: "power4.out"
                });
            });
        }

        function animateThree() {
            requestAnimationFrame(animateThree);

            shapes.forEach(mesh => {
                // Continuous rotation
                mesh.rotation.x += mesh.userData.rotX;
                mesh.rotation.y += mesh.userData.rotY;

                // Gentle floating after explosion settled (approx)
                if(Math.abs(mesh.position.x) > 1) { // Check if not at center
                    mesh.position.y += Math.sin(Date.now() * 0.001 + mesh.id) * 0.01;
                }
            });

            camera.position.y = window.scrollY * -0.01;
            renderer.render(scene, camera);
        }

        window.addEventListener('resize', () => {
            if(camera && renderer) {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            }
        });


        // --- GSAP ---
        function initGSAP() {
            gsap.registerPlugin(ScrollTrigger, TextPlugin);

            // Pop Animations
            gsap.utils.toArray('.gsap-pop').forEach(el => {
                gsap.from(el, {
                    scale: 0.5, opacity: 0, duration: 1, ease: 'elastic.out(1, 0.5)',
                    scrollTrigger: { trigger: el, start: 'top 80%' }
                });
            });

            // Slide Animations
            gsap.from('.gsap-slide-right', {
                x: -100, opacity: 0, duration: 1, ease: 'power2.out',
                scrollTrigger: { trigger: '#bio', start: 'top 70%' }
            });
            gsap.from('.gsap-slide-left', {
                x: 100, opacity: 0, duration: 1, ease: 'power2.out',
                scrollTrigger: { trigger: '#bio', start: 'top 70%' }
            });

            // Timeline Up
            gsap.utils.toArray('.gsap-up').forEach((el, i) => {
                gsap.from(el, {
                    y: 50, opacity: 0, duration: 0.8, delay: i * 0.2, ease: 'back.out(1.7)',
                    scrollTrigger: { trigger: '#highlights', start: 'top 75%' }
                });
            });

            // Horizontal Scroll
            const track = document.querySelector(".gallery-track");

            function getScrollAmount() {
                let trackWidth = track.scrollWidth;
                return -(trackWidth - window.innerWidth + 100);
            }

            const tween = gsap.to(track, {
                x: getScrollAmount,
                ease: "none"
            });

            ScrollTrigger.create({
                trigger: "#gallery-section",
                start: "top top",
                end: () => `+=${getScrollAmount() * -1}`,
                pin: true,
                animation: tween,
                scrub: 1,
                invalidateOnRefresh: true
            });

            // Gallery Interactions
            document.querySelectorAll('.photo-card').forEach(card => {
                const caption = card.querySelector('.photo-caption');
                const img = card.querySelector('img');

                card.addEventListener('mouseenter', () => {
                    gsap.to(caption, {
                        opacity: 1, y: -20, duration: 0.4, ease: 'back.out(1.7)'
                    });
                    // Scramble text effect just for fun
                    const originalText = caption.innerText;
                    gsap.to(caption, {
                        duration: 0.5,
                        text: {
                            value: originalText,
                            scrambleText: { chars: "0123456789+-%", speed: 0.3 }
                        }
                    });
                });

                card.addEventListener('mouseleave', () => {
                    gsap.to(caption, { opacity: 0, y: 20, duration: 0.3 });
                });
            });
        }
    </script>
</body>
</html>
