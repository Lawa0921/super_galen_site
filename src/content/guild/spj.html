<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>塞趴卷 - 具現化系鍊金術師</title>
    <meta name="description" content="塞趴卷冒險公會 - 具現化系鍊金術師的酒館佈告欄">

    <!-- Fonts: Use Noto Serif TC for Chinese text -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=IM+Fell+English:ital@0;1&family=Noto+Serif+TC:wght@400;600;900&display=swap" rel="stylesheet">

    <!-- GSAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <style>
        :root {
            --wood-dark: #3E2723;
            --wood-light: #5D4037;
            --parchment: #F5E6CA;
            --parchment-shadow: #D7CCC8;
            --ink: #2F2F2F;
            --gold: #FFD700;
            --secondary: #DAA520;
            --accent: #8B0000; /* Wax Seal Red */
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            cursor: none; /* Custom cursor */
        }

        body {
            background-color: #1a1a1a;
            color: var(--ink);
            font-family: 'Noto Serif TC', serif;
            overflow-x: hidden;
            opacity: 0;
        }

        /* Custom Cursor - Quill Pen */
        #cursor {
            width: 20px;
            height: 20px;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23FFD700"><path d="M12 2L2 22l10-4 10 4L12 2z"/></svg>') no-repeat center center;
            background-size: contain;
            position: fixed;
            pointer-events: none;
            z-index: 9999;
            transform: translate(-50%, -50%) rotate(-45deg);
            transition: transform 0.1s;
            filter: drop-shadow(2px 2px 2px rgba(0,0,0,0.5));
        }
        #cursor.hovered {
            transform: translate(-50%, -50%) rotate(0deg) scale(1.5);
        }

        /* Preloader */
        #loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #251605; /* Deep wood color */
            z-index: 1000;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .loader-seal {
            width: 100px;
            height: 100px;
            background: var(--accent);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--parchment);
            font-family: 'Cinzel', serif;
            font-size: 3rem;
            font-weight: bold;
            box-shadow: inset -5px -5px 15px rgba(0,0,0,0.3), 5px 5px 15px rgba(0,0,0,0.5);
            border: 4px dashed rgba(255,255,255,0.2);
            animation: pulse-seal 2s infinite ease-in-out;
        }

        @keyframes pulse-seal {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .loader-text {
            font-family: 'Noto Serif TC', serif;
            color: var(--parchment);
            letter-spacing: 5px;
            margin-top: 1.5rem;
            font-size: 1.2rem;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }

        /* 3D Container */
        #canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        /* Navigation */
        nav {
            position: fixed;
            top: 2rem;
            left: 2rem;
            z-index: 100;
        }

        .back-btn {
            color: var(--parchment);
            text-decoration: none;
            font-family: 'Noto Serif TC', serif;
            font-weight: 600;
            font-size: 1rem;
            padding: 0.8rem 1.5rem;
            background: url('data:image/svg+xml;utf8,<svg width="100" height="100" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><rect width="100%" height="100%" fill="%235D4037"/><rect x="5" y="5" width="90" height="90" fill="none" stroke="%23DAA520" stroke-width="2"/></svg>');
            background-size: cover;
            border-radius: 4px;
            box-shadow: 3px 3px 10px rgba(0,0,0,0.6);
            transition: all 0.3s ease;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
        }

        .back-btn:hover {
            transform: translateY(-2px);
            box-shadow: 5px 5px 15px rgba(0,0,0,0.8);
            color: var(--gold);
        }

        /* Main Layout - Bulletin Board */
        main {
            padding-top: 100vh; /* Allow scrolling past initial view */
            padding-bottom: 20vh;
        }

        /* The Hero "Sign" hanging at the top */
        .tavern-sign {
            position: absolute;
            top: 15%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80%;
            max-width: 600px;
            text-align: center;
            z-index: 10;
            pointer-events: none;
        }

        .sign-wood {
            background: #4E342E;
            padding: 2rem;
            border: 4px solid #3E2723;
            border-radius: 8px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.8);
            position: relative;
        }

        /* Chains holding the sign */
        .sign-wood::before, .sign-wood::after {
            content: '';
            position: absolute;
            top: -100px;
            width: 4px;
            height: 100px;
            background: repeating-linear-gradient(0deg, #333, #333 10px, #111 10px, #111 20px);
        }
        .sign-wood::before { left: 20%; }
        .sign-wood::after { right: 20%; }

        h1 {
            font-family: 'Noto Serif TC', serif;
            font-weight: 900;
            color: var(--gold);
            font-size: 3.5rem;
            text-shadow: 2px 2px 0 #000, 0 0 20px rgba(255, 215, 0, 0.5);
            margin-bottom: 0.5rem;
        }

        .subtitle {
            color: #D7CCC8;
            font-size: 1.2rem;
            letter-spacing: 2px;
        }

        /* Parchment Notes Container */
        .board-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15vh; /* Space between notes */
            width: 100%;
            max-width: 900px;
            margin: 0 auto;
            position: relative;
        }

        /* Shared Parchment Style */
        .parchment {
            background: var(--parchment);
            color: var(--ink);
            padding: 3rem;
            width: 90%;
            max-width: 700px;
            box-shadow: 5px 10px 20px rgba(0,0,0,0.4);
            position: relative;
            transform-origin: center top;
            transition: transform 0.3s ease;
        }

        /* Nail/Pin visual */
        .pin {
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 20px;
            background: radial-gradient(circle at 30% 30%, #a9a9a9, #555);
            border-radius: 50%;
            box-shadow: 2px 4px 6px rgba(0,0,0,0.5);
            z-index: 5;
        }

        .parchment h2 {
            font-size: 2rem;
            border-bottom: 2px solid var(--ink);
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
            font-family: 'Noto Serif TC', serif;
            font-weight: 900;
        }

        .parchment p {
            font-size: 1.1rem;
            line-height: 1.8;
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .highlight {
            color: var(--accent);
            font-weight: 900;
            background: rgba(255, 255, 0, 0.2); /* Highlighter effect */
            padding: 0 4px;
        }

        /* Specific Notes Rotation */
        #intro-note { transform: rotate(-2deg); }
        #dream-note { transform: rotate(1.5deg); }
        #projects-note { transform: rotate(-1deg); width: 100%; max-width: 900px; background: transparent; box-shadow: none; padding: 0; }

        /* Wanted Posters Grid */
        .poster-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            width: 100%;
        }

        .wanted-poster {
            background: #EFEBE9; /* Lighter paper */
            padding: 1rem;
            box-shadow: 3px 6px 15px rgba(0,0,0,0.3);
            text-align: center;
            position: relative;
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            /* Paper texture overlay */
            background-image: linear-gradient(rgba(255,255,255,0.8), rgba(255,255,255,0.8)), url('data:image/svg+xml;utf8,<svg width="100" height="100" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.5" numOctaves="3" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23n)" opacity="0.3"/></svg>');
        }

        .wanted-poster:hover {
            transform: scale(1.05) rotate(0deg) !important;
            z-index: 10;
        }

        .poster-image {
            width: 100%;
            height: 160px;
            background: #333;
            object-fit: cover;
            border: 2px solid var(--ink);
            margin: 1rem 0;
            filter: sepia(0.6) contrast(1.1);
        }

        .poster-title {
            font-size: 1.5rem;
            font-weight: 900;
            margin-top: 0.5rem;
        }

        .poster-reward {
            font-family: 'Cinzel', serif;
            color: var(--accent);
            font-weight: bold;
            font-size: 1.2rem;
            margin-top: 1rem;
            border-top: 1px solid #ccc;
            padding-top: 0.5rem;
        }

        /* HUD - Adventurer Card */
        #hud {
            position: fixed;
            top: 2rem;
            right: 2rem;
            z-index: 100;
            opacity: 0;
            transform: translateX(50px);
        }

        .id-card {
            background: #FFF8E1;
            border: 1px solid #8D6E63;
            padding: 1rem;
            display: flex;
            gap: 1rem;
            box-shadow: 5px 5px 15px rgba(0,0,0,0.5);
            transform: rotate(2deg); /* Slightly skewed like a card on a table */
            max-width: 300px;
        }

        .id-photo {
            width: 80px;
            height: 100px;
            border: 1px solid #5D4037;
            background: #ccc;
            padding: 4px;
            background-clip: content-box;
            object-fit: cover;
        }

        .id-info {
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .id-name {
            font-size: 1.4rem;
            font-weight: 900;
            color: var(--wood-dark);
        }

        .id-title {
            font-size: 0.8rem;
            color: #6D4C41;
            margin-bottom: 0.5rem;
        }

        .stamp {
            border: 2px solid var(--accent);
            color: var(--accent);
            font-size: 0.7rem;
            padding: 2px 6px;
            border-radius: 4px;
            display: inline-block;
            transform: rotate(-10deg);
            font-weight: bold;
            margin-top: 5px;
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 2rem;
            color: #aaa;
            font-size: 0.8rem;
            position: relative;
            z-index: 10;
        }

        /* Socials */
        .social-links {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin-top: 3rem;
        }

        .social-btn {
            background: var(--accent);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.4);
            transition: transform 0.2s;
        }
        .social-btn:hover {
            transform: scale(1.1);
        }

    </style>
</head>
<body>

    <!-- Preloader -->
    <div id="loader">
        <div class="loader-seal">公會</div>
        <div class="loader-text">正在開啟酒館大門...</div>
    </div>

    <!-- 3D Background -->
    <div id="canvas-container"></div>

    <div id="cursor"></div>

    <!-- HUD -->
    <div id="hud">
        <div class="id-card">
            <img src="/assets/img/guild/spj/avatar.webp" alt="SPJ" class="id-photo">
            <div class="id-info">
                <div class="id-name">塞趴卷 SPJ</div>
                <div class="id-title">具現化系鍊金術師 Lv.99</div>
                <div class="stamp">SEPAJUAN GUILD</div>
            </div>
        </div>
    </div>

    <nav>
        <a href="/guild/" class="back-btn" onmouseenter="expandCursor()" onmouseleave="shrinkCursor()">← 返回公會大廳</a>
    </nav>

    <!-- Hanging Sign (Hero) -->
    <div class="tavern-sign">
        <div class="sign-wood">
            <h1>具現化酒館</h1>
            <div class="subtitle">The Materialization Tavern</div>
        </div>
    </div>

    <!-- Scrollable Board Content -->
    <main>
        <div class="board-content">

            <!-- Note 1: Intro -->
            <div id="intro-note" class="parchment" onmouseenter="expandCursor()" onmouseleave="shrinkCursor()">
                <div class="pin"></div>
                <h2>鍊金術師日誌</h2>
                <p>我是一個曾經做過很多 Side Project 的<span class="highlight">軟體工程師</span>。</p>
                <p>最近想把<span class="highlight">「文字小鎮」</span>這個概念做成一個遊戲，有種像是「天書系統」的感覺，讓我可以把我的創意都在裡面實現。</p>
            </div>

            <!-- Note 2: Dream -->
            <div id="dream-note" class="parchment" onmouseenter="expandCursor()" onmouseleave="shrinkCursor()">
                <div class="pin"></div>
                <h2>公會願景</h2>
                <p>我還有一個夢想，是成立一個<span class="highlight">塞趴卷冒險公會</span>。</p>
                <p>就像動漫或異世界轉生番那樣，一群現實世界的冒險者會在公會交流、組隊、接任務、打副本，希望可以聚集更多資源。</p>
                <p>同時我也喜歡紀錄跟寫作，可以把這些過程的故事分享出來，讓事情不是只有死板板的結果，而是有溫度的過程。</p>
                <p>我想成為<span class="highlight">具現化系的鍊金術魔法師</span>。</p>
            </div>

            <!-- Note 3: Projects (Posters) -->
            <div id="projects-note" class="parchment">
                <div class="pin"></div>
                <h2 style="text-align: center; color: var(--parchment); text-shadow: 2px 2px 4px #000; border-bottom: none;">懸賞佈告欄</h2>

                <div class="poster-grid">
                    <!-- Poster 1 -->
                    <div class="wanted-poster" style="transform: rotate(-3deg);">
                        <div class="pin"></div>
                        <img src="https://placehold.co/600x400/3E2723/DAA520?text=文字小鎮" alt="文字小鎮" class="poster-image">
                        <div class="poster-title">文字小鎮</div>
                        <p>透過天書系統，實現無限創意的遊戲世界。</p>
                        <div class="poster-reward">懸賞級別: S</div>
                    </div>

                    <!-- Poster 2 -->
                    <div class="wanted-poster" style="transform: rotate(2deg);">
                        <div class="pin"></div>
                        <img src="https://placehold.co/600x400/3E2723/DAA520?text=冒險公會" alt="冒險公會" class="poster-image">
                        <div class="poster-title">塞趴卷公會</div>
                        <p>現實世界的冒險者集散地。組隊、交流、資源共享。</p>
                        <div class="poster-reward">懸賞級別: A</div>
                    </div>

                    <!-- Poster 3 -->
                    <div class="wanted-poster" style="transform: rotate(-1deg);">
                        <div class="pin"></div>
                        <img src="https://placehold.co/600x400/3E2723/DAA520?text=紀錄傳說" alt="紀錄傳說" class="poster-image">
                        <div class="poster-title">紀錄與寫作</div>
                        <p>分享有溫度的過程故事，而不僅僅是冰冷的結果。</p>
                        <div class="poster-reward">懸賞級別: B</div>
                    </div>
                </div>

                <div class="social-links">
                    <a href="https://www.threads.net/@spj.story" target="_blank" class="social-btn" title="Threads" onmouseenter="expandCursor()" onmouseleave="shrinkCursor()">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 12a7 7 0 1 1-14 0 7 7 0 0 1 14 0Z"/><path d="M12 19v-7"/><path d="M12 5v4"/></svg>
                    </a>
                </div>
            </div>

        </div>
    </main>

    <footer>
        <p>© 2024 塞趴卷 SPJ - 冒險公會 ID: #SPJ-001</p>
    </footer>

    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
            }
        }
    </script>

    <script type="module">
        import * as THREE from 'three';

        // --- Init Scene (Bulletin Board Background) ---
        const container = document.getElementById('canvas-container');
        const scene = new THREE.Scene();

        // Camera setup - we want a fairly flat view, looking at the board
        const camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 100);
        camera.position.set(0, 0, 30); // Start centered

        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: false });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 1.5));
        renderer.shadowMap.enabled = true; // Shadows are key for "pinned" look depth
        renderer.shadowMap.type = THREE.PCFSoftShadowMap;
        container.appendChild(renderer.domElement);

        // --- Lighting (Warm Tavern Atmosphere) ---
        const ambientLight = new THREE.AmbientLight(0xffaa55, 0.4); // Warm ambient
        scene.add(ambientLight);

        // Moving Lantern Light (Simulates player holding a lantern or nearby candle flicker)
        const lanternLight = new THREE.PointLight(0xffaa00, 1.5, 50);
        lanternLight.position.set(0, 0, 15);
        lanternLight.castShadow = true;
        lanternLight.shadow.mapSize.width = 1024;
        lanternLight.shadow.mapSize.height = 1024;
        scene.add(lanternLight);

        // --- The Board (Background) ---
        // Create a large wood texture plane
        const boardGroup = new THREE.Group();

        // We'll simulate wood planks using multiple long boxes for depth
        const woodMat = new THREE.MeshStandardMaterial({
            color: 0x3E2723,
            roughness: 0.9,
            metalness: 0.1
        });

        const plankCount = 20;
        const boardWidth = 60;
        const boardHeight = 80;
        const plankHeight = boardHeight / plankCount;

        for (let i = 0; i < plankCount; i++) {
            const plank = new THREE.Mesh(
                new THREE.BoxGeometry(boardWidth, plankHeight - 0.2, 1), // Slight gap
                woodMat
            );
            plank.position.y = (i * plankHeight) - (boardHeight / 2);
            plank.position.z = -5; // Behind content
            plank.receiveShadow = true;

            // Randomize slightly for old feel
            plank.rotation.z = (Math.random() - 0.5) * 0.01;
            plank.position.x = (Math.random() - 0.5) * 0.5;

            boardGroup.add(plank);
        }
        scene.add(boardGroup);

        // --- Interaction ---
        let mouseX = 0;
        let mouseY = 0;

        document.addEventListener('mousemove', (e) => {
            mouseX = (e.clientX - window.innerWidth / 2) * 0.01;
            mouseY = (e.clientY - window.innerHeight / 2) * 0.01;

            // Move the lantern light with mouse slightly
            gsap.to(lanternLight.position, {
                x: mouseX,
                y: -mouseY + 5, // Offset
                duration: 1
            });

            // Move cursor
            const cursor = document.getElementById('cursor');
            cursor.style.left = e.clientX + 'px';
            cursor.style.top = e.clientY + 'px';
        });

        window.expandCursor = () => document.getElementById('cursor').classList.add('hovered');
        window.shrinkCursor = () => document.getElementById('cursor').classList.remove('hovered');

        // --- Animation Loop ---
        function animate() {
            requestAnimationFrame(animate);

            // Candle flicker effect
            lanternLight.intensity = 1.2 + Math.random() * 0.1;

            renderer.render(scene, camera);
        }
        animate();

        // --- GSAP Scroll ---
        // Map scroll to Camera movement (Scanning down the board)
        gsap.registerPlugin(ScrollTrigger);

        // Initial Intro
        const tlIntro = gsap.timeline();
        tlIntro.to(".loader-seal", { rotation: 360, opacity: 0, duration: 1 })
               .to("#loader", { yPercent: -100, duration: 0.8, ease: "power2.inOut" })
               .to("body", { opacity: 1, duration: 0.5 })
               .to("#hud", { opacity: 1, x: 0, duration: 0.8, ease: "back.out(1.7)" });

        // Parallax Scroll
        // As we scroll down the HTML body, we move the 3D camera down to match
        // Total scroll height ~ 200vh + content
        // We want the camera to start at Y=0 and go down to Y=-40 approx

        ScrollTrigger.create({
            trigger: "body",
            start: "top top",
            end: "bottom bottom",
            scrub: 0.5,
            onUpdate: (self) => {
                // Map scroll progress (0-1) to Camera Y (10 to -30)
                const yPos = 10 - (self.progress * 40);
                camera.position.y = yPos;
            }
        });

        // Resize
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

    </script>
</body>
</html>
