<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¡è¶´å· - å…·ç¾åŒ–ç³»éŠé‡‘è¡“å¸«</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Noto+Serif+TC:wght@400;600;900&display=swap" rel="stylesheet">

    <!-- Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <style>
        :root {
            --bg-dark: #050302;
            --panel-bg: rgba(20, 15, 10, 0.95);
            --gold-dim: #8a6e4b;
            --gold-bright: #ffdb8b;
            --text-main: #e0d0b0;
            --accent-red: #8b0000;
            --magic-glow: 0 0 15px rgba(255, 219, 139, 0.3);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: var(--bg-dark);
            color: var(--text-main);
            font-family: 'Noto Serif TC', serif;
            overflow-x: hidden;
        }

        /* --- Backgrounds --- */
        #bg-canvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1; pointer-events: none;
        }

        /* Vignette / Torch Light */
        #torch-light {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 0; pointer-events: none;
            background: radial-gradient(circle at var(--x, 50%) var(--y, 50%), rgba(255, 160, 50, 0.08) 0%, transparent 50%),
                        radial-gradient(circle at 50% 50%, transparent 20%, #000 100%);
            mix-blend-mode: screen;
        }

        /* --- Main Layout --- */
        main {
            position: relative;
            z-index: 10;
            padding-bottom: 5rem;
        }

        /* Return Nav */
        .nav-return {
            position: fixed; top: 2rem; left: 2rem; z-index: 100;
            display: flex; align-items: center; gap: 0.5rem;
            text-decoration: none;
            color: var(--gold-dim);
            font-family: 'Cinzel', serif;
            font-weight: 700;
            transition: all 0.3s;
            mix-blend-mode: difference;
        }
        .nav-return:hover { color: var(--gold-bright); transform: translateX(5px); }

        /* --- Header / Hero --- */
        #hero {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            perspective: 1000px;
        }

        .hero-card {
            width: 100%;
            max-width: 900px;
            background: var(--panel-bg);
            border: 2px solid var(--gold-dim);
            padding: 3rem;
            position: relative;
            display: flex;
            gap: 3rem;
            box-shadow: 0 20px 50px rgba(0,0,0,0.8);
            backdrop-filter: blur(5px);
            /* Ornate Corner Decorations (CSS) */
            background-image:
                linear-gradient(45deg, var(--gold-dim) 5px, transparent 5px),
                linear-gradient(-45deg, var(--gold-dim) 5px, transparent 5px),
                linear-gradient(135deg, var(--gold-dim) 5px, transparent 5px),
                linear-gradient(-135deg, var(--gold-dim) 5px, transparent 5px);
            background-position: top left, top right, bottom left, bottom right;
            background-size: 20px 20px;
            background-repeat: no-repeat;
        }

        .hero-card::after { /* Inner gold border */
            content: ''; position: absolute; inset: 10px;
            border: 1px solid rgba(138, 110, 75, 0.3);
            pointer-events: none;
        }

        .hero-avatar-frame {
            flex: 0 0 300px;
            height: 400px;
            border: 4px double var(--gold-dim);
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 0 30px rgba(0,0,0,0.8);
        }

        .hero-avatar {
            width: 100%; height: 100%;
            object-fit: cover;
            filter: sepia(0.2) contrast(1.1) brightness(0.9);
            transition: transform 0.5s;
        }
        .hero-card:hover .hero-avatar { transform: scale(1.05); }

        .hero-stats {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .class-label {
            font-family: 'Cinzel', serif;
            color: var(--gold-dim);
            font-size: 0.9rem;
            letter-spacing: 4px;
            text-transform: uppercase;
            margin-bottom: 0.5rem;
        }

        .char-name {
            font-family: 'Cinzel', serif;
            color: var(--gold-bright);
            font-size: 3.5rem;
            line-height: 1;
            margin-bottom: 1.5rem;
            text-shadow: 0 0 20px rgba(255, 219, 139, 0.2);
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            border-bottom: 1px dashed rgba(138, 110, 75, 0.3);
            padding-bottom: 0.5rem;
        }

        .stat-label { font-weight: bold; color: #a89f91; font-size: 1rem; }
        .stat-value { font-family: 'Cinzel', serif; color: var(--gold-bright); font-size: 1.2rem; }

        .hp-bar-container {
            width: 100%; height: 6px; background: #222; margin-top: 5px;
            position: relative;
        }
        .hp-bar-fill {
            height: 100%; background: linear-gradient(90deg, #8b0000, #ff3333);
            box-shadow: 0 0 10px rgba(255, 51, 51, 0.5);
        }

        .mp-bar-fill {
            height: 100%; background: linear-gradient(90deg, #004d40, #00bfa5);
            box-shadow: 0 0 10px rgba(0, 191, 165, 0.5);
        }

        /* --- Log Section --- */
        .log-section {
            max-width: 800px;
            margin: 0 auto 8rem auto;
            text-align: center;
            position: relative;
        }

        .log-title {
            font-family: 'Cinzel', serif;
            font-size: 2rem;
            color: var(--gold-dim);
            margin-bottom: 2rem;
            display: flex; align-items: center; justify-content: center; gap: 1rem;
        }
        .log-title::before, .log-title::after {
            content: ''; width: 50px; height: 1px; background: var(--gold-dim);
        }

        .log-content {
            font-size: 1.2rem;
            line-height: 2;
            color: #ccc;
        }

        .highlight { color: var(--gold-bright); font-weight: 600; text-shadow: var(--magic-glow); }

        /* --- Quest Board (Projects) --- */
        #quest-board-section {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .section-header {
            text-align: center;
            margin-bottom: 4rem;
        }
        .section-header h2 {
            font-family: 'Cinzel', serif;
            font-size: 3rem;
            color: var(--gold-bright);
            text-shadow: 0 0 30px rgba(255, 219, 139, 0.2);
        }

        .quests-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 3rem;
        }

        .quest-card {
            background: linear-gradient(180deg, #1a1510 0%, #0f0b08 100%);
            border: 1px solid var(--gold-dim);
            padding: 2px; /* For double border effect inner */
            position: relative;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
        }

        .quest-inner {
            border: 1px solid rgba(138, 110, 75, 0.3);
            padding: 2rem;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .quest-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 40px rgba(255, 219, 139, 0.1);
            border-color: var(--gold-bright);
        }
        .quest-card:hover .quest-rank { background: var(--gold-bright); color: #000; }

        .quest-rank {
            position: absolute; top: -15px;
            background: #222; border: 1px solid var(--gold-dim);
            color: var(--gold-dim);
            font-family: 'Cinzel', serif;
            padding: 5px 15px;
            font-weight: bold;
            transition: all 0.3s;
        }

        .quest-title {
            font-family: 'Cinzel', serif;
            font-size: 1.8rem;
            color: #eee;
            margin: 1.5rem 0 1rem 0;
        }

        .quest-desc {
            font-size: 0.95rem;
            color: #999;
            line-height: 1.6;
            margin-bottom: 2rem;
        }

        .quest-reward {
            margin-top: auto;
            font-family: 'Cinzel', serif;
            font-size: 0.9rem;
            color: var(--accent-red);
            font-weight: bold;
            border-top: 1px solid #333;
            width: 100%;
            padding-top: 1rem;
        }

        /* --- Footer --- */
        footer {
            margin-top: 8rem;
            text-align: center;
            padding: 3rem;
            border-top: 1px solid #333;
            background: #080504;
        }

        .social-row {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 1.5rem;
        }

        .social-icon {
            width: 40px; height: 40px;
            border: 1px solid #444;
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            color: #888;
            transition: all 0.3s;
        }
        .social-icon:hover { border-color: var(--gold-bright); color: var(--gold-bright); box-shadow: 0 0 10px var(--gold-dim); }

        .footer-credit {
            font-family: 'Cinzel', serif;
            color: #555;
            font-size: 0.8rem;
        }
        .footer-credit a { color: #777; text-decoration: none; }
        .footer-credit a:hover { color: var(--gold-dim); }

        @media (max-width: 768px) {
            .hero-card { flex-direction: column; padding: 2rem; }
            .hero-avatar-frame { flex: 0 0 auto; height: 300px; width: 100%; }
            .quests-grid { grid-template-columns: 1fr; }
        }

    </style>
</head>
<body>

    <!-- 3D Background -->
    <div id="bg-canvas"></div>
    <!-- Interactive Torch Light -->
    <div id="torch-light"></div>

    <a href="/guild/" class="nav-return">
        <span>â®</span> GUILD HALL
    </a>

    <main>
        <!-- Hero Section -->
        <section id="hero">
            <div class="hero-card">
                <div class="hero-avatar-frame">
                    <img src="/assets/img/guild/spj/avatar.webp" alt="SPJ" class="hero-avatar">
                </div>
                <div class="hero-stats">
                    <div class="class-label">Materialization Alchemist</div>
                    <div class="char-name">å¡è¶´å· SPJ</div>

                    <div class="stat-row">
                        <span class="stat-label">HP (Coffee Level)</span>
                        <div style="flex:1; margin-left: 1rem;">
                            <div class="stat-value" style="font-size:0.8rem; text-align:right;">85%</div>
                            <div class="hp-bar-container"><div class="hp-bar-fill" style="width: 85%"></div></div>
                        </div>
                    </div>

                    <div class="stat-row">
                        <span class="stat-label">MP (Creative Mana)</span>
                        <div style="flex:1; margin-left: 1rem;">
                            <div class="stat-value" style="font-size:0.8rem; text-align:right;">MAX</div>
                            <div class="hp-bar-container"><div class="mp-bar-fill" style="width: 100%"></div></div>
                        </div>
                    </div>

                    <div class="stat-row">
                        <span class="stat-label">Equipped Item</span>
                        <span class="stat-value">Mechanical Keyboard</span>
                    </div>
                    <div class="stat-row" style="border:none;">
                        <span class="stat-label">Specialization</span>
                        <span class="stat-value">Code Synthesis</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Narrative Section -->
        <section class="log-section">
            <div class="log-title">THE ARCHIVES</div>
            <div class="log-content">
                <p>æˆ‘æ˜¯ SPJï¼Œä¸€å<span class="highlight">è»Ÿé«”å·¥ç¨‹å¸«</span>ï¼Œä¹Ÿæ˜¯æ½›è—æ–¼ç¾ä»£ç¤¾æœƒçš„å…·ç¾åŒ–ç³»éŠé‡‘è¡“å¸«ã€‚</p>
                <p>æˆ‘æ“…é•·ä½¿ç”¨ç¨‹å¼ç¢¼ä½œç‚ºç…‰æˆé™£ï¼Œå°‡è…¦æµ·ä¸­çš„å¹»æƒ³è½‰åŒ–ç‚ºå¯¦é«”ã€‚ç›®å‰ï¼Œæˆ‘æ­£åœ¨é€²è¡Œä¸€é …åç‚º<span class="highlight">ã€Œæ–‡å­—å°é®ã€</span>çš„å‰å¤§å¯¦é©—ï¼Œè©¦åœ–æ§‹å»ºä¸€å€‹åƒ…æ†‘æ–‡å­—å°±èƒ½é‹ä½œçš„éŠæˆ²ä¸–ç•Œã€‚</p>
                <br>
                <p>ä½†æˆ‘çš„é‡å¿ƒä¸æ­¢æ–¼æ­¤ã€‚æˆ‘å¤¢æƒ³å»ºç«‹<span class="highlight">ã€Œå¡è¶´å·å†’éšªå…¬æœƒã€</span>â€”â€”ä¸€å€‹å±¬æ–¼å‰µé€ è€…çš„åº‡è­·æ‰€ã€‚åœ¨é€™è£¡ï¼Œæˆ‘å€‘ä¸å†æ˜¯å­¤ç¨çš„ç¢¼è¾²æˆ–å‰µä½œè€…ï¼Œè€Œæ˜¯ä¸¦è‚©ä½œæˆ°çš„å†’éšªè€…ï¼Œå…±åŒåœ¨ç¾å¯¦èˆ‡è™›æ“¬çš„é‚Šç•Œé–‹æ‹“ç–†åœŸã€‚</p>
            </div>
        </section>

        <!-- Quest Board -->
        <section id="quest-board-section">
            <div class="section-header">
                <h2>ACTIVE BOUNTIES</h2>
                <div style="color: #666; font-family: 'Cinzel'; letter-spacing: 2px;">SELECT A QUEST TO VIEW DETAILS</div>
            </div>

            <div class="quests-grid">
                <!-- Quest 1 -->
                <div class="quest-card">
                    <span class="quest-rank">RANK S</span>
                    <div class="quest-inner">
                        <div class="quest-title">æ–‡å­—å°é®</div>
                        <div class="quest-desc">æ§‹å»ºä¸€å€‹ç”±ã€Œå¤©æ›¸ç³»çµ±ã€é©…å‹•çš„ä¸–ç•Œã€‚æ‰€æœ‰è¦å‰‡ã€å ´æ™¯ã€äº’å‹•çš†ç”±æ–‡å­—å…·ç¾åŒ–ã€‚</div>
                        <div class="quest-reward">REWARD: ETERNAL GLORY</div>
                    </div>
                </div>

                <!-- Quest 2 -->
                <div class="quest-card">
                    <span class="quest-rank">RANK A</span>
                    <div class="quest-inner">
                        <div class="quest-title">å†’éšªå…¬æœƒ</div>
                        <div class="quest-desc">å»ºç«‹ç¾å¯¦ä¸–ç•Œçš„å†’éšªè€…é›†æ•£åœ°ã€‚æ‹›å‹Ÿå„è·¯è±ªå‚‘ï¼Œçµ„å»ºéšŠä¼ï¼Œæ”»ç•¥ç¾å¯¦å‰¯æœ¬ã€‚</div>
                        <div class="quest-reward">REWARD: ALLIES & RESOURCES</div>
                    </div>
                </div>

                <!-- Quest 3 -->
                <div class="quest-card">
                    <span class="quest-rank">RANK B</span>
                    <div class="quest-inner">
                        <div class="quest-title">å‚³èªªç´€éŒ„</div>
                        <div class="quest-desc">ç´€éŒ„é–‹ç™¼éç¨‹ä¸­çš„è¡€æ·šèˆ‡æ­¡ç¬‘ã€‚å°‡å†°å†·çš„æŠ€è¡“æˆæœè½‰åŒ–ç‚ºæœ‰æº«åº¦çš„åŸéŠè©©ç¯‡ã€‚</div>
                        <div class="quest-reward">REWARD: WISDOM</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer>
            <div class="social-row">
                <a href="https://www.threads.net/@spj.story" target="_blank" class="social-icon" title="Threads">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 12a7 7 0 1 1-14 0 7 7 0 0 1 14 0Z"/><path d="M12 19v-7"/><path d="M12 5v4"/></svg>
                </a>
                <a href="/guild/" class="social-icon" title="Guild Hall">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 21h18"/><path d="M5 21V7l8-4 8 4v14"/><path d="M9 10a2 2 0 1 1-4 0v11"/><path d="M15 10a2 2 0 1 1 4 0v11"/></svg>
                </a>
            </div>
            <div class="footer-credit">
                Made with ğŸº by <a href="/guild/">SuperGalen's Dungeon</a>
            </div>
        </footer>
    </main>

    <!-- Logic -->
    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.160.0/build/three.module.js"
            }
        }
    </script>

    <script type="module">
        import * as THREE from 'three';

        // --- 1. GSAP Animations ---
        gsap.registerPlugin(ScrollTrigger);

        // Entrance: Hero Card
        gsap.from(".hero-card", {
            y: 50,
            opacity: 0,
            duration: 1.5,
            ease: "power3.out"
        });

        // Entrance: Log
        gsap.from(".log-content", {
            y: 30,
            opacity: 0,
            duration: 1,
            scrollTrigger: {
                trigger: ".log-section",
                start: "top 80%"
            }
        });

        // Entrance: Quests (Staggered)
        gsap.from(".quest-card", {
            y: 50,
            opacity: 0,
            stagger: 0.2,
            duration: 1,
            ease: "back.out(1.7)",
            scrollTrigger: {
                trigger: ".quests-grid",
                start: "top 85%"
            }
        });

        // Mouse Torch Effect
        document.addEventListener('mousemove', (e) => {
            const x = e.clientX;
            const y = e.clientY;
            const torch = document.getElementById('torch-light');
            torch.style.setProperty('--x', x + 'px');
            torch.style.setProperty('--y', y + 'px');
        });


        // --- 2. Three.js Background (Magical Dust) ---
        const container = document.getElementById('bg-canvas');
        const scene = new THREE.Scene();
        // Subtle fog for depth
        scene.fog = new THREE.FogExp2(0x050302, 0.002);

        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 100);
        camera.position.z = 5;

        const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: false });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 1.5));
        container.appendChild(renderer.domElement);

        // Particles
        const particlesCnt = 300;
        const posArray = new Float32Array(particlesCnt * 3);
        const randomArray = new Float32Array(particlesCnt);

        for(let i = 0; i < particlesCnt * 3; i++) {
            posArray[i] = (Math.random() - 0.5) * 20;
        }
        for(let i = 0; i < particlesCnt; i++) {
            randomArray[i] = Math.random();
        }

        const geometry = new THREE.BufferGeometry();
        geometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
        geometry.setAttribute('aRandom', new THREE.BufferAttribute(randomArray, 1));

        // Create a soft glow texture via canvas
        const canvas = document.createElement('canvas');
        canvas.width = 32; canvas.height = 32;
        const ctx = canvas.getContext('2d');
        const grad = ctx.createRadialGradient(16,16,0, 16,16,16);
        grad.addColorStop(0, 'rgba(255, 215, 0, 1)');
        grad.addColorStop(1, 'rgba(255, 215, 0, 0)');
        ctx.fillStyle = grad;
        ctx.fillRect(0,0,32,32);
        const texture = new THREE.CanvasTexture(canvas);

        const material = new THREE.PointsMaterial({
            size: 0.1,
            map: texture,
            transparent: true,
            opacity: 0.6,
            color: 0xffd700,
            blending: THREE.AdditiveBlending,
            depthWrite: false
        });

        const particlesMesh = new THREE.Points(geometry, material);
        scene.add(particlesMesh);

        // Animation
        const clock = new THREE.Clock();

        function animate() {
            requestAnimationFrame(animate);
            const time = clock.getElapsedTime();

            // Float upwards slowly
            const positions = particlesMesh.geometry.attributes.position.array;
            for(let i = 1; i < particlesCnt * 3; i += 3) {
                // Individual speed based on random attribute? simplified here
                positions[i] += 0.005;
                if (positions[i] > 10) positions[i] = -10;
            }
            particlesMesh.geometry.attributes.position.needsUpdate = true;

            // Rotate entire cloud
            particlesMesh.rotation.y = time * 0.02;

            renderer.render(scene, camera);
        }
        animate();

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>
