<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¡è¶´å· - é…’é¤¨è€é—†</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Noto+Serif+TC:wght@400;700;900&family=IM+Fell+English+SC&display=swap" rel="stylesheet">

    <!-- Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/TextPlugin.min.js"></script>

    <style>
        :root {
            /* Brighter, warmer palette */
            --bg-color: #2b1d12;
            --ui-bg: rgba(255, 248, 225, 0.95); /* Light parchment UI */
            --ui-border: #8d6e63;
            --text-dark: #3e2723;
            --text-gold: #f9a825;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: var(--bg-color);
            color: var(--text-dark);
            font-family: 'Noto Serif TC', serif;
            overflow-x: hidden;
            overflow-y: hidden; /* Locked initially */
        }

        #canvas-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 0;
        }

        /* --- Simple Cinematic Intro --- */
        #intro-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000;
            z-index: 2000;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer;
            transition: opacity 1.5s;
        }

        .intro-text {
            color: #fff; font-family: 'Cinzel'; font-size: 1.5rem; letter-spacing: 5px;
            text-align: center; animation: pulse 2s infinite;
        }
        .intro-sub { font-size: 0.8rem; color: #888; margin-top: 1rem; }

        #intro-overlay.hidden { opacity: 0; pointer-events: none; }

        @keyframes pulse { 0% { opacity: 0.5; } 50% { opacity: 1; } 100% { opacity: 0.5; } }

        /* --- Scroll Track --- */
        .scroll-track { height: 500vh; }

        /* --- UI Layer --- */
        #ui-layer {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: 10;
            opacity: 0; transition: opacity 1s;
        }
        #ui-layer.visible { opacity: 1; }

        /* Navigation */
        .nav-return {
            position: fixed; top: 2rem; left: 2rem;
            color: var(--text-dark); text-decoration: none;
            font-family: 'Cinzel'; font-size: 0.9rem; letter-spacing: 2px;
            pointer-events: auto; background: rgba(255, 255, 255, 0.8);
            padding: 10px 20px; border-radius: 4px;
            border: 1px solid var(--ui-border);
            transition: 0.3s;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        .nav-return:hover { background: var(--text-dark); color: #fff; }

        /* Character */
        .char-container {
            position: absolute;
            bottom: 30vh; right: 10vw;
            width: 350px; height: 350px;
            transition: transform 0.5s ease-out;
            pointer-events: none;
        }
        .char-img {
            width: 100%; height: 100%; object-fit: cover;
            border-radius: 50%;
            border: 6px solid #fff;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            background: #000;
        }
        .speaker-tag {
            position: absolute; bottom: -15px; left: 50%; transform: translateX(-50%);
            background: #fff; color: var(--text-dark);
            padding: 5px 20px; border-radius: 20px;
            font-family: 'Cinzel'; font-size: 0.9rem; font-weight: bold;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        /* Dialogue Box (Light Theme) */
        .dialogue-box {
            position: absolute;
            bottom: 5vh; left: 50%; transform: translateX(-50%);
            width: 90%; max-width: 800px; height: 22vh;
            background: var(--ui-bg);
            border: 1px solid var(--ui-border);
            border-radius: 4px;
            padding: 2rem;
            pointer-events: auto;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            display: flex; flex-direction: column;
        }
        .dialogue-text {
            font-size: 1.2rem; line-height: 1.8; color: var(--text-dark);
            flex: 1; font-weight: 500;
        }
        .dialogue-prompt {
            text-align: right; color: #888; font-family: 'Cinzel';
            font-size: 0.8rem; animation: pulse 1s infinite;
        }

        /* Interaction Labels (Floating) */
        .interact-label {
            position: absolute; padding: 5px 10px;
            background: rgba(0,0,0,0.7); color: #fff;
            border-radius: 4px; font-family: 'Cinzel'; font-size: 0.8rem;
            pointer-events: none; opacity: 0; transition: opacity 0.2s;
            white-space: nowrap;
        }

        /* Quest Log (Parchment) */
        #quest-parchment {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.9);
            width: 90%; max-width: 700px; height: 80vh;
            background: #fffbf0;
            box-shadow: 0 30px 80px rgba(0,0,0,0.5);
            padding: 4rem 3rem;
            opacity: 0; pointer-events: none;
            z-index: 20;
            color: #3e2723;
            overflow-y: auto;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 1px solid #d7ccc8;
        }

        #quest-parchment.visible {
            opacity: 1; pointer-events: auto;
            transform: translate(-50%, -50%) scale(1);
        }

        .parchment-header {
            text-align: center; font-family: 'Cinzel'; font-size: 2.5rem;
            border-bottom: 2px solid #3e2723; padding-bottom: 1rem; margin-bottom: 2rem;
            color: #5d4037; font-weight: bold;
        }

        .quest-item {
            margin-bottom: 2rem; border-bottom: 1px dashed #d7ccc8; padding-bottom: 1rem;
        }
        .quest-title {
            font-family: 'Cinzel'; font-weight: bold; font-size: 1.4rem;
            display: flex; justify-content: space-between; color: #3e2723;
        }
        .quest-desc {
            font-family: 'Noto Serif TC'; font-size: 1.1rem; color: #5d4037; margin-top: 0.5rem; line-height: 1.6;
        }

        .close-btn {
            position: absolute; top: 1rem; right: 1rem;
            width: 40px; height: 40px;
            background: #8d6e63; color: #fff;
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            font-weight: bold; cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        /* Skill Board */
        #skill-board {
            position: absolute; top: 20vh; left: 15vw;
            width: 320px;
            background: #fff8e1; /* Paper color */
            border: 1px solid #8d6e63;
            padding: 2rem;
            transform: rotate(-2deg);
            box-shadow: 5px 10px 20px rgba(0,0,0,0.2);
            opacity: 0;
        }
        .skill-title { text-align: center; border-bottom: 2px solid #3e2723; padding-bottom: 10px; margin-bottom: 1rem; font-family: 'Cinzel'; font-size: 1.5rem; color: #3e2723; }
        .skill-list li { margin-bottom: 0.8rem; font-family: 'Noto Serif TC'; color: #5d4037; font-size: 1.1rem; font-weight: bold; }

        /* Footer Socials */
        .footer-socials {
            position: fixed; bottom: 2rem; right: 2rem;
            display: flex; gap: 1rem;
            pointer-events: auto;
            opacity: 0;
        }
        .social-btn {
            background: #fff; color: #3e2723;
            padding: 10px 20px; font-family: 'Cinzel';
            text-decoration: none; border-radius: 4px;
            font-weight: bold; border: 1px solid #3e2723;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: 0.2s;
        }
        .social-btn:hover { background: #3e2723; color: #fff; }

        /* Click Here Indicator for Book */
        #book-indicator {
            position: absolute; /* Set by JS */
            color: #fff; background: #e53935; padding: 5px 10px;
            border-radius: 4px; font-weight: bold; font-size: 0.8rem;
            pointer-events: none; opacity: 0; z-index: 100;
            animation: bounce 1s infinite;
        }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }

    </style>
</head>
<body>

    <div id="intro-overlay" onclick="enterTavern()">
        <div>
            <div class="intro-text">CLICK TO ENTER THE TAVERN</div>
            <div class="intro-sub">Audio Not Included (Yet)</div>
        </div>
    </div>

    <div id="canvas-container"></div>

    <a href="/guild/" class="nav-return">LEAVE</a>

    <div class="scroll-track"></div>

    <div id="ui-layer">

        <div class="char-container" id="character">
            <img src="/assets/img/guild/spj/avatar.webp" class="char-img">
            <div class="speaker-tag">SPJ</div>
        </div>

        <div id="skill-board">
            <div class="skill-title">MENU</div>
            <ul class="skill-list" style="list-style: none; padding: 0;">
                <li>ğŸº Code Synthesis</li>
                <li>ğŸ· Materialization</li>
                <li>â˜• Mana (Coffee)</li>
                <li>ğŸ“œ Legend Writing</li>
            </ul>
        </div>

        <div class="dialogue-box">
            <div class="dialogue-text" id="dialogue-text"></div>
            <div class="dialogue-prompt">â–¼ SCROLL TO CONTINUE</div>
        </div>

        <!-- Book Indicator -->
        <div id="book-indicator">CLICK ME!</div>
        <div id="hover-label" class="interact-label"></div>

        <!-- Quest Log -->
        <div id="quest-parchment">
            <div class="close-btn" onclick="closeScroll()">X</div>
            <div class="parchment-header">QUEST LOG</div>

            <div class="quest-item">
                <div class="quest-title">TEXT TOWN <span style="color: #d32f2f; font-size: 1rem;">RANK S</span></div>
                <div class="quest-desc">
                    å¤©æ›¸ç³»çµ±æ ¸å¿ƒé–‹ç™¼ã€‚ç›®æ¨™æ˜¯å‰µé€ ä¸€å€‹å®Œå…¨ç”±æ–‡å­—å®šç¾©ç‰©ç†æ³•å‰‡çš„ä¸–ç•Œã€‚
                </div>
            </div>

            <div class="quest-item">
                <div class="quest-title">SEPAJUAN GUILD <span style="color: #d32f2f; font-size: 1rem;">RANK A</span></div>
                <div class="quest-desc">
                    é€£çµç¾å¯¦ä¸–ç•Œçš„å‰µé€ è€…ã€‚æˆ‘å€‘åœ¨æ­¤é›†çµï¼Œå…±äº«è³‡æºï¼Œå°æŠ—å­¤ç¨ã€‚
                </div>
            </div>

            <div class="quest-item">
                <div class="quest-title">CHRONICLES <span style="color: #d32f2f; font-size: 1rem;">RANK B</span></div>
                <div class="quest-desc">
                    ç´€éŒ„é–‹ç™¼çš„éç¨‹èˆ‡æº«åº¦ã€‚æ¯ä¸€è¡Œä»£ç¢¼éƒ½æ˜¯è©©ç¯‡ã€‚
                </div>
            </div>
        </div>

        <div class="footer-socials" id="footer-socials">
            <a href="https://www.threads.net/@spj.story" target="_blank" class="social-btn">THREADS</a>
        </div>

    </div>

    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
            }
        }
    </script>

    <script type="module">
        import * as THREE from 'three';

        // --- Init Scene ---
        const container = document.getElementById('canvas-container');
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x3e2723); // Base wood color to avoid black voids
        scene.fog = new THREE.Fog(0x3e2723, 10, 50); // Lighter fog

        const camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 0.1, 100);
        camera.position.set(0, 3, 15); // Start outside

        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 1.5));
        renderer.shadowMap.enabled = true;
        renderer.shadowMap.type = THREE.PCFSoftShadowMap;
        renderer.toneMapping = THREE.ACESFilmicToneMapping;
        renderer.toneMappingExposure = 1.0;
        container.appendChild(renderer.domElement);

        // --- Lighting (High Visibility) ---
        // 1. General Ambience (Warm)
        const ambientLight = new THREE.AmbientLight(0xffedd5, 0.8);
        scene.add(ambientLight);

        // 2. Bar Lights (Overhead)
        const mainLight = new THREE.DirectionalLight(0xffe0b2, 1.2);
        mainLight.position.set(5, 10, 5);
        mainLight.castShadow = true;
        scene.add(mainLight);

        // 3. Candle (Orange Accent)
        const candleLight = new THREE.PointLight(0xff6d00, 1.5, 10);
        candleLight.position.set(2, 2, 2);
        scene.add(candleLight);

        // --- Environment (The Bar) ---
        const clickableObjects = [];

        // Textures (Procedural)
        function createWoodTex(color) {
            const canvas = document.createElement('canvas');
            canvas.width = 256; canvas.height = 256;
            const ctx = canvas.getContext('2d');
            ctx.fillStyle = color;
            ctx.fillRect(0,0,256,256);
            ctx.fillStyle = "rgba(0,0,0,0.1)";
            for(let i=0; i<100; i++) ctx.fillRect(Math.random()*256, 0, Math.random()*20+5, 256);
            const t = new THREE.CanvasTexture(canvas);
            return t;
        }
        const woodTex = createWoodTex('#8d6e63'); // Oak

        // 1. Counter Top
        const counterMat = new THREE.MeshStandardMaterial({ map: woodTex, roughness: 0.5 });
        const counter = new THREE.Mesh(new THREE.BoxGeometry(30, 1, 10), counterMat);
        counter.position.set(0, -0.5, 0);
        counter.receiveShadow = true;
        scene.add(counter);

        // 2. Bar Cabinet (Back Wall)
        const cabinetGroup = new THREE.Group();
        cabinetGroup.position.set(0, 0, -5);

        // Main Structure
        const wall = new THREE.Mesh(new THREE.BoxGeometry(20, 10, 1), counterMat);
        wall.position.y = 4;
        cabinetGroup.add(wall);

        // Shelves
        const shelfGeo = new THREE.BoxGeometry(18, 0.2, 1);
        for(let i=0; i<3; i++) {
            const shelf = new THREE.Mesh(shelfGeo, counterMat);
            shelf.position.set(0, 2 + i*2.5, 0.6);
            shelf.receiveShadow = true;
            cabinetGroup.add(shelf);
        }

        // Bottles (InstancedMesh for performance & quantity)
        const bottleGeo = new THREE.CylinderGeometry(0.3, 0.3, 1.2, 8);
        const bottleMat = new THREE.MeshPhysicalMaterial({
            color: 0xffffff, transmission: 0.5, opacity: 0.8, roughness: 0.1, thickness: 0.5
        });
        const bottleCount = 60;
        const bottles = new THREE.InstancedMesh(bottleGeo, bottleMat, bottleCount);

        const dummy = new THREE.Object3D();
        const colors = [];
        const colorPalette = [0xe53935, 0x43a047, 0x1e88e5, 0xfdd835, 0x8e24aa];

        for(let i=0; i<bottleCount; i++) {
            const row = Math.floor(i / 20); // 3 rows
            const col = i % 20;
            dummy.position.set( (col - 9.5) * 0.8 + (Math.random()*0.2), 2.6 + row*2.5, 0.6 );
            dummy.scale.setY(0.8 + Math.random()*0.5);
            dummy.updateMatrix();
            bottles.setMatrixAt(i, dummy.matrix);

            const c = new THREE.Color(colorPalette[Math.floor(Math.random()*colorPalette.length)]);
            bottles.setColorAt(i, c);
        }
        bottles.instanceMatrix.needsUpdate = true;
        // bottles.instanceColor.needsUpdate = true; // Needs newer Three.js, fallback to tint if fail
        // Using basic random colors if instanceColor supported, else white

        cabinetGroup.add(bottles);
        scene.add(cabinetGroup);

        // Hitboxes for bottles?
        // Let's make the whole shelf area clickable for "Inspect Bar" flavor text
        const shelfHit = new THREE.Mesh(new THREE.BoxGeometry(18, 8, 2), new THREE.MeshBasicMaterial({visible:false}));
        shelfHit.position.set(0, 4, -4);
        shelfHit.userData = { id: 'bottles' };
        scene.add(shelfHit);
        clickableObjects.push(shelfHit);

        // 3. Quest Book (Interactive Hero)
        const bookGroup = new THREE.Group();
        const bookMesh = new THREE.Mesh(new THREE.BoxGeometry(2.5, 0.4, 3.5), new THREE.MeshStandardMaterial({ color: 0x5d4037 }));
        const bookPages = new THREE.Mesh(new THREE.BoxGeometry(2.3, 0.2, 3.3), new THREE.MeshStandardMaterial({ color: 0xffffff }));
        bookPages.position.y = 0.2;
        bookGroup.add(bookMesh, bookPages);

        bookGroup.position.set(-2, 0.3, 2); // Raised slightly
        bookGroup.rotation.y = 0.4;
        bookGroup.rotation.x = -0.1; // Tilted towards user

        bookGroup.userData = { id: 'book' };
        scene.add(bookGroup);

        const bookHit = new THREE.Mesh(new THREE.BoxGeometry(3, 2, 4), new THREE.MeshBasicMaterial({visible:false}));
        bookHit.position.copy(bookGroup.position);
        bookHit.userData = { id: 'book' };
        scene.add(bookHit);
        clickableObjects.push(bookHit);

        // 4. Tankard
        const mug = new THREE.Mesh(new THREE.CylinderGeometry(0.5, 0.6, 1.4, 16), new THREE.MeshStandardMaterial({ color: 0x8d6e63 }));
        mug.position.set(2, 0.7, 2);
        mug.userData = { id: 'mug' };
        scene.add(mug);
        clickableObjects.push(mug);

        // 5. Candle
        const candle = new THREE.Mesh(new THREE.CylinderGeometry(0.15, 0.15, 0.8, 8), new THREE.MeshStandardMaterial({color: 0xfff}));
        candle.position.copy(candleLight.position);
        candle.position.y -= 0.5;
        scene.add(candle);

        // --- Logic ---

        // Door
        window.enterTavern = () => {
            document.getElementById('intro-overlay').classList.add('hidden');
            document.body.style.overflow = 'auto'; // Unlock

            // Camera Move
            gsap.to(camera.position, {
                z: 8,
                y: 3,
                duration: 2,
                ease: "power2.out",
                onComplete: () => {
                    document.getElementById('ui-layer').classList.add('visible');
                    // Show indicator
                    updateBookIndicator();
                }
            });
        };

        // Book Indicator Position
        function updateBookIndicator() {
            const vector = new THREE.Vector3();
            bookGroup.getWorldPosition(vector);
            vector.y += 1; // Above book
            vector.project(camera);

            const x = (vector.x * .5 + .5) * window.innerWidth;
            const y = (-(vector.y * .5) + .5) * window.innerHeight;

            const el = document.getElementById('book-indicator');
            el.style.left = x + 'px';
            el.style.top = y + 'px';
            el.style.opacity = 1;
        }

        // Raycasting
        const raycaster = new THREE.Raycaster();
        const mouse = new THREE.Vector2();

        window.addEventListener('click', (e) => {
            if (e.target.closest('a, button, .close-btn, #intro-overlay')) return;

            mouse.x = (e.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(e.clientY / window.innerHeight) * 2 + 1;
            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObjects(clickableObjects);

            if (intersects.length > 0) {
                const id = intersects[0].object.userData.id;
                if (id === 'book') openScroll();
                if (id === 'mug') {
                    gsap.to(mug.position, { y: 1, duration: 0.2, yoyo: true, repeat: 1 });
                    document.getElementById('dialogue-text').innerText = "ç‚ºæˆ‘å€‘çš„ç›¸é‡ä¹¾æ¯ï¼";
                }
                if (id === 'bottles') {
                    const msgs = ["é‚£æ˜¯é™³å¹´çš„ã€Œé™¤éŒ¯è—¥æ°´ã€ã€‚", "é€™ç“¶æ˜¯ã€Œéˆæ„Ÿé‡€ã€ï¼Œå–äº†æœƒç†¬å¤œã€‚", "å°å¿ƒï¼Œé‚£æ˜¯ã€Œç„¡çª®è¿´åœˆã€çƒˆé…’ã€‚"];
                    document.getElementById('dialogue-text').innerText = msgs[Math.floor(Math.random()*msgs.length)];
                }
            }
        });

        window.openScroll = () => {
            document.getElementById('quest-parchment').classList.add('visible');
            document.getElementById('book-indicator').style.opacity = 0; // Hide hint
        };
        window.closeScroll = () => {
            document.getElementById('quest-parchment').classList.remove('visible');
        };

        // Animation Loop
        const clock = new THREE.Clock();
        function animate() {
            requestAnimationFrame(animate);
            const time = clock.getElapsedTime();
            candleLight.intensity = 2 + Math.sin(time * 10) * 0.3;

            // Only update indicator if ui visible
            if (document.getElementById('ui-layer').style.opacity === '1') updateBookIndicator();

            renderer.render(scene, camera);
        }
        animate();

        // Scroll
        gsap.registerPlugin(ScrollTrigger);
        const script = [
            { text: "å˜¿ï¼Œæ­¡è¿ï¼å¤–é¢å¾ˆå†·å§ï¼Ÿæˆ‘æ˜¯ SPJï¼Œé€™è£¡çš„è€é—†ã€‚", camera: { x:0, y:3, z:8 }, skill: false },
            { text: "çœ‹çœ‹é€™é¢ç‰†ï¼Œéƒ½æ˜¯æˆ‘çš„æ”¶è—ã€‚æ¯ä¸€ç“¶éƒ½æ˜¯ä¸€å€‹å°ˆæ¡ˆçš„ç²¾è¯ã€‚", camera: { x: -1, y: 4, z: 6 }, skill: true },
            { text: "æ¡Œä¸Šé‚£æœ¬<span style='color:#ffd54f'>ã€Œä»»å‹™æ—¥èªŒã€</span>... è¨˜è¼‰è‘—æˆ‘æœ€è¿‘çš„ç˜‹ç‹‚è¨ˆç•«ã€‚é»é–‹çœ‹çœ‹å§ï¼Ÿ", camera: { x: -1.5, y: 1.5, z: 5 }, skill: false },
            { text: "æˆ‘å¤¢æƒ³å»ºç«‹ä¸€å€‹ã€Œå…¬æœƒã€ã€‚è®“æ‰€æœ‰å‰µé€ è€…ä¸å†å­¤å–®ã€‚", camera: { x: 0, y: 3, z: 8 }, skill: false },
            { text: "é€™å¼µåç‰‡ä½ æ”¶è‘—ã€‚æœŸå¾…ä½ çš„åŠ å…¥ï¼Œå†’éšªè€…ï¼", camera: { x: 1.5, y: 1, z: 5 }, skill: false, footer: true }
        ];

        const textBox = document.getElementById('dialogue-text');

        ScrollTrigger.create({
            trigger: ".scroll-track",
            start: "top top",
            end: "bottom bottom",
            onUpdate: (self) => {
                if (document.getElementById('intro-overlay').style.opacity !== '0') return; // Wait for entry

                const idx = Math.min(Math.floor(self.progress * script.length), script.length - 1);
                const beat = script[idx];

                if (textBox.dataset.index != idx) {
                    textBox.dataset.index = idx;
                    gsap.to(textBox, { opacity: 0, duration: 0.2, onComplete: () => {
                        textBox.innerHTML = beat.text;
                        gsap.to(textBox, { opacity: 1, duration: 0.2 });
                    }});

                    if (beat.camera) {
                        gsap.to(camera.position, {
                            x: beat.camera.x, y: beat.camera.y, z: beat.camera.z,
                            duration: 1.5, ease: "power2.inOut"
                        });
                    }

                    gsap.to("#skill-board", { opacity: beat.skill ? 1 : 0 });
                    gsap.to("#footer-socials", { opacity: beat.footer ? 1 : 0 });
                }
            }
        });

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

    </script>
</body>
</html>
