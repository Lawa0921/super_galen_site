<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>塞趴卷 - 具現化系鍊金術師</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Noto+Serif+TC:wght@400;700;900&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">

    <!-- Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <style>
        :root {
            --bg-color: #050505;
            --text-color: #e0e0e0;
            --gold: #FFD700;
            --gold-dim: #b8860b;
            --cyan: #00FFFF;
            --glass: rgba(255, 255, 255, 0.05);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Noto Serif TC', serif;
            overflow-x: hidden;
        }

        /* --- 3D Canvas --- */
        #canvas-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1;
        }

        /* --- Navigation --- */
        nav {
            position: fixed; top: 2rem; left: 2rem; z-index: 100;
            mix-blend-mode: difference;
        }

        .nav-btn {
            color: var(--gold);
            text-decoration: none;
            font-family: 'Orbitron', sans-serif;
            font-size: 0.8rem;
            letter-spacing: 2px;
            border: 1px solid var(--gold);
            padding: 0.5rem 1rem;
            transition: all 0.3s;
        }
        .nav-btn:hover { background: var(--gold); color: #000; }

        /* --- Layout Sections --- */
        section {
            min-height: 100vh;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            pointer-events: none; /* Pass clicks to 3D by default */
        }

        .content-box {
            pointer-events: auto;
            max-width: 800px;
            width: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 215, 0, 0.2);
            padding: 4rem;
            position: relative;
            opacity: 0; /* Animated in */
            transform: translateY(50px);
        }

        /* High-tech corners */
        .content-box::before, .content-box::after {
            content: ''; position: absolute; width: 20px; height: 20px;
            border: 2px solid var(--gold); transition: all 0.3s;
        }
        .content-box::before { top: 0; left: 0; border-right: none; border-bottom: none; }
        .content-box::after { bottom: 0; right: 0; border-left: none; border-top: none; }
        .content-box:hover::before, .content-box:hover::after { width: 100%; height: 100%; opacity: 0.5; }

        h1, h2 {
            font-family: 'Cinzel', serif;
            color: var(--gold);
            text-transform: uppercase;
            letter-spacing: 3px;
            margin-bottom: 1.5rem;
        }

        h1 { font-size: 4rem; font-weight: 900; line-height: 1; text-shadow: 0 0 20px rgba(255, 215, 0, 0.3); }
        h2 { font-size: 2rem; border-bottom: 1px solid var(--gold-dim); padding-bottom: 1rem; display: inline-block; }

        p {
            font-size: 1.1rem;
            line-height: 1.8;
            margin-bottom: 1.5rem;
            color: #ccc;
        }

        .highlight { color: var(--gold); font-weight: bold; }

        /* --- Specifics --- */
        #hero .hero-content {
            text-align: center;
        }

        .hero-title {
            position: relative;
            display: inline-block;
        }

        .glitch-text {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            opacity: 0.5; pointer-events: none;
        }

        .avatar-container {
            width: 150px; height: 150px;
            margin: 0 auto 2rem auto;
            border-radius: 50%;
            border: 2px solid var(--gold);
            padding: 5px;
            position: relative;
        }
        .avatar-img {
            width: 100%; height: 100%;
            border-radius: 50%;
            object-fit: cover;
            filter: grayscale(100%) contrast(1.2);
            transition: 0.5s;
        }
        .avatar-container:hover .avatar-img { filter: grayscale(0%); }

        /* Grid System for Projects */
        .project-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .project-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 2rem;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .project-card:hover {
            transform: translateY(-5px);
            border-color: var(--gold);
            background: rgba(255, 215, 0, 0.05);
        }

        .project-rank {
            position: absolute; top: 1rem; right: 1rem;
            font-family: 'Orbitron', sans-serif;
            color: var(--gold-dim);
            font-size: 0.8rem;
            border: 1px solid var(--gold-dim);
            padding: 2px 6px;
        }

        .project-title {
            font-family: 'Noto Serif TC', serif;
            font-size: 1.4rem;
            color: #fff;
            margin-bottom: 0.5rem;
            font-weight: 700;
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 3rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #666;
            font-family: 'Orbitron', sans-serif;
            font-size: 0.8rem;
            background: #020202;
        }

        .social-link {
            color: var(--gold);
            margin: 0 1rem;
            text-decoration: none;
            font-size: 1.2rem;
            transition: 0.3s;
        }
        .social-link:hover { text-shadow: 0 0 10px var(--gold); }

    </style>
</head>
<body>

    <div id="canvas-container"></div>

    <nav>
        <a href="/guild/" class="nav-btn">SYSTEM_EXIT</a>
    </nav>

    <main>
        <!-- Hero -->
        <section id="hero">
            <div class="content-box hero-content">
                <div class="avatar-container">
                    <img src="/assets/img/guild/spj/avatar.webp" alt="SPJ" class="avatar-img">
                </div>
                <h1 class="hero-title">具現化系<br>鍊金術師</h1>
                <p style="font-family: 'Orbitron'; letter-spacing: 2px; color: var(--gold); margin-top: 1rem;">SPJ // THE MATERIALIZER</p>
            </div>
        </section>

        <!-- Narrative -->
        <section id="intro">
            <div class="content-box">
                <h2>起源代碼 (ORIGIN)</h2>
                <p>我是<span class="highlight">塞趴卷 SPJ</span>。在 0 與 1 的虛空之中，我尋找著將創意轉化為現實的法則。</p>
                <p>身為一名軟體工程師，我將代碼視為煉金術的咒語。目前正致力於<span class="highlight">「文字小鎮」</span>計畫——一個僅憑文字描述就能具現化出完整生態的遊戲世界。這是我的「賢者之石」。</p>
            </div>
        </section>

        <!-- Dream -->
        <section id="dream">
            <div class="content-box" style="text-align: right;">
                <h2>公會協議 (PROTOCOL)</h2>
                <p>我的終極目標是建立<span class="highlight">「塞趴卷冒險公會」</span>。</p>
                <p>這不是一個普通的社群，而是一個現實世界的 Nexus。在這裡，創造者們（冒險者）可以連線、組隊、共享運算資源，並一同攻略名為「現實」的高難度副本。</p>
                <p>我紀錄這一切，因為<span class="highlight">過程即是魔法</span>。冷冰冰的結果只是殘渣，唯有燃燒的過程才是有溫度的。</p>
            </div>
        </section>

        <!-- Projects -->
        <section id="projects">
            <div class="content-box" style="max-width: 1000px;">
                <h2 style="width: 100%; text-align: center; border: none;">懸賞任務 (BOUNTIES)</h2>
                <div class="project-grid">
                    <div class="project-card">
                        <span class="project-rank">S-CLASS</span>
                        <div class="project-title">文字小鎮</div>
                        <p>天書系統核心開發。目標：無限創意的具現化。</p>
                    </div>
                    <div class="project-card">
                        <span class="project-rank">A-CLASS</span>
                        <div class="project-title">冒險公會</div>
                        <p>建立現實連結節點。目標：組隊與資源共享。</p>
                    </div>
                    <div class="project-card">
                        <span class="project-rank">B-CLASS</span>
                        <div class="project-title">傳說紀錄</div>
                        <p>冒險日誌編纂。目標：傳遞有溫度的故事。</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>INITIATED BY SUPERGALEN'S DUNGEON // SYSTEM ID: SPJ-001</p>
        <div style="margin-top: 1rem;">
            <a href="https://www.threads.net/@spj.story" target="_blank" class="social-link">THREADS</a>
        </div>
    </footer>

    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
            }
        }
    </script>

    <script type="module">
        import * as THREE from 'three';
        import { EffectComposer } from 'three/addons/postprocessing/EffectComposer.js';
        import { RenderPass } from 'three/addons/postprocessing/RenderPass.js';
        import { UnrealBloomPass } from 'three/addons/postprocessing/UnrealBloomPass.js';

        // --- Scene Setup ---
        const container = document.getElementById('canvas-container');
        const scene = new THREE.Scene();
        scene.fog = new THREE.FogExp2(0x050505, 0.02);

        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 15;

        const renderer = new THREE.WebGLRenderer({ antialias: false, alpha: false });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 1.5));
        container.appendChild(renderer.domElement);

        // --- Post Processing (Bloom) ---
        // Warning: Might cause GPU stall in tests, keep strength moderate
        const composer = new EffectComposer(renderer);
        const renderPass = new RenderPass(scene, camera);
        const bloomPass = new UnrealBloomPass(new THREE.Vector2(window.innerWidth, window.innerHeight), 1.5, 0.4, 0.85);
        bloomPass.strength = 1.0;
        bloomPass.radius = 0.5;
        bloomPass.threshold = 0.1;
        composer.addPass(renderPass);
        composer.addPass(bloomPass);

        // --- Objects: The Materialization Core ---

        // 1. Central Core (Icosahedron)
        const coreGeo = new THREE.IcosahedronGeometry(2, 1);
        const coreMat = new THREE.MeshBasicMaterial({
            color: 0xFFD700,
            wireframe: true,
            transparent: true,
            opacity: 0.8
        });
        const core = new THREE.Mesh(coreGeo, coreMat);
        scene.add(core);

        // 2. Inner Solid Core (Pulsing)
        const innerGeo = new THREE.OctahedronGeometry(1, 0);
        const innerMat = new THREE.MeshBasicMaterial({ color: 0xFFAA00 });
        const innerCore = new THREE.Mesh(innerGeo, innerMat);
        scene.add(innerCore);

        // 3. Orbiting Rings (The Alchemy)
        const ringsGroup = new THREE.Group();
        const ringGeo = new THREE.TorusGeometry(6, 0.05, 16, 100);
        const ringMat = new THREE.MeshBasicMaterial({ color: 0x444444, transparent: true, opacity: 0.5 });

        const r1 = new THREE.Mesh(ringGeo, ringMat);
        const r2 = new THREE.Mesh(ringGeo, ringMat);
        r2.rotation.x = Math.PI / 2;
        const r3 = new THREE.Mesh(ringGeo, ringMat);
        r3.rotation.y = Math.PI / 2;

        ringsGroup.add(r1, r2, r3);
        scene.add(ringsGroup);

        // 4. Particle Stream (Mana)
        const particlesCnt = 1000;
        const posArray = new Float32Array(particlesCnt * 3);
        const speedArray = new Float32Array(particlesCnt);

        for(let i = 0; i < particlesCnt * 3; i++) {
            posArray[i] = (Math.random() - 0.5) * 50;
        }
        for(let i = 0; i < particlesCnt; i++) {
            speedArray[i] = Math.random();
        }

        const pGeo = new THREE.BufferGeometry();
        pGeo.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
        const pMat = new THREE.PointsMaterial({
            size: 0.1,
            color: 0x00FFFF,
            transparent: true,
            opacity: 0.6,
            blending: THREE.AdditiveBlending
        });
        const particles = new THREE.Points(pGeo, pMat);
        scene.add(particles);


        // --- Animation Loop ---
        const clock = new THREE.Clock();

        function animate() {
            requestAnimationFrame(animate);
            const time = clock.getElapsedTime();

            // Core Rotation
            core.rotation.y = time * 0.2;
            core.rotation.z = time * 0.1;

            // Inner Core Pulse
            const scale = 1 + Math.sin(time * 3) * 0.2;
            innerCore.scale.set(scale, scale, scale);
            innerCore.rotation.y = -time * 0.5;

            // Rings Rotation
            ringsGroup.rotation.x = time * 0.1;
            ringsGroup.rotation.y = time * 0.05;

            // Particle Flow (Spiral Inward)
            const positions = particles.geometry.attributes.position.array;
            for(let i = 0; i < particlesCnt; i++) {
                const i3 = i * 3;
                const x = positions[i3];
                const y = positions[i3 + 1];
                const z = positions[i3 + 2];

                // Simple swirl logic: Rotate around Y axis
                const angle = 0.001 * speedArray[i];
                const cos = Math.cos(angle);
                const sin = Math.sin(angle);

                positions[i3] = x * cos - z * sin;
                positions[i3 + 2] = x * sin + z * cos;

                // Drift towards center slowly
                // positions[i3] *= 0.999;
                // positions[i3+1] *= 0.999;
                // positions[i3+2] *= 0.999;

                // Reset if too close
                // if (x*x + y*y + z*z < 4) { ... }
            }
            particles.geometry.attributes.position.needsUpdate = true;

            composer.render();
        }
        animate();


        // --- GSAP Scroll Interaction ---
        gsap.registerPlugin(ScrollTrigger);

        // Content Entrances
        gsap.utils.toArray('.content-box').forEach(box => {
            gsap.to(box, {
                y: 0,
                opacity: 1,
                duration: 1,
                scrollTrigger: {
                    trigger: box,
                    start: "top 80%",
                    toggleActions: "play none none reverse"
                }
            });
        });

        // Scene Transformation on Scroll
        // 1. Hero -> Intro: Core expands, Camera moves in
        const tl = gsap.timeline({
            scrollTrigger: {
                trigger: "body",
                start: "top top",
                end: "bottom bottom",
                scrub: 1
            }
        });

        tl.to(core.scale, { x: 3, y: 3, z: 3, duration: 2 }, "p1")
          .to(camera.position, { z: 5, duration: 2 }, "p1")
          .to(ringsGroup.rotation, { z: Math.PI, duration: 2 }, "p1")

          // 2. Intro -> Dream: Color shift
          .to(coreMat.color, { r: 0, g: 1, b: 1, duration: 2 }, "p2") // Gold to Cyan
          .to(innerMat.color, { r: 0, g: 1, b: 1, duration: 2 }, "p2")

          // 3. Dream -> Projects: Explosion/Scatter
          .to(particles.material, { size: 0.3, opacity: 0.8, duration: 2 }, "p3")
          .to(ringsGroup.scale, { x: 2, y: 2, z: 2, duration: 2 }, "p3");


        // --- Resize ---
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
            composer.setSize(window.innerWidth, window.innerHeight);
        });

    </script>
</body>
</html>
