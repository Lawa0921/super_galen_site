<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Uli | Rational Intuition</title>
    <meta name="description" content="Animal Communicator bridging Logic and Feeling.">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Zen+Maru+Gothic:wght@400;700;900&display=swap" rel="stylesheet">

    <!-- Dependencies -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
    <script src="https://unpkg.com/imagesloaded@5/imagesloaded.pkgd.min.js"></script>

    <style>
        :root {
            --c-bg: #FFFBF0; /* Creamy Paper White */
            --c-text: #4A4A4A; /* Pencil Lead Grey */
            --c-accent-1: #FF6B6B; /* Vibrant Coral */
            --c-accent-2: #4ECDC4; /* Vibrant Teal */
            --c-accent-3: #45B7D1; /* Sky Blue */
            --c-gold: #FFE66D; /* Sunshine Yellow */
            --c-outline: #2D2D2D; /* Dark Pencil */
        }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--c-bg);
            color: var(--c-text);
            font-family: 'Zen Maru Gothic', sans-serif;
            overflow-x: hidden;
            width: 100vw;
        }

        #canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            z-index: -1;
            /* Paper Texture Overlay */
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.05'/%3E%3C/svg%3E");
            pointer-events: none;
        }

        .content-layer {
            position: relative;
            z-index: 2;
        }

        header {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            pointer-events: none;
        }

        .hero-title {
            font-family: 'Zen Maru Gothic', sans-serif;
            font-weight: 900;
            font-size: clamp(4rem, 15vw, 9rem);
            line-height: 1;
            margin-bottom: 1rem;
            color: var(--c-accent-3);
            /* Colored pencil stroke effect via text-shadow */
            text-shadow:
                3px 3px 0px var(--c-bg),
                6px 6px 0px var(--c-accent-1);
        }

        .hero-subtitle {
            font-size: 1.5rem;
            letter-spacing: 0.1em;
            color: var(--c-text);
            font-weight: 700;
            background: rgba(255, 255, 255, 0.8);
            padding: 0.8rem 2rem;
            border-radius: 50px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border: 2px solid var(--c-accent-2);
        }

        .scroll-hint {
            position: absolute;
            bottom: 3rem;
            font-size: 1rem;
            color: var(--c-accent-1);
            animation: bounce 2s infinite;
            font-weight: bold;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
            40% {transform: translateY(-10px);}
            60% {transform: translateY(-5px);}
        }

        .section {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 4rem 1rem;
            box-sizing: border-box;
            position: relative;
        }

        .card {
            background: rgba(255, 255, 255, 0.9);
            border: 3px solid var(--c-text);
            border-radius: 20px; /* Rough rounded corners */
            padding: 3rem;
            max-width: 800px;
            width: 100%;
            box-shadow: 15px 15px 0px rgba(0,0,0,0.1); /* Hard shadow for sticker feel */
            transform: translateY(50px) rotate(-1deg);
            opacity: 0;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
        }

        .card:nth-child(even) {
            transform: translateY(50px) rotate(1deg);
        }

        .card.active {
            opacity: 1;
            transform: translateY(0) rotate(0deg);
        }

        h2 {
            font-family: 'Zen Maru Gothic', sans-serif;
            font-weight: 900;
            font-size: 2.8rem;
            margin-bottom: 2rem;
            color: var(--c-accent-1);
            text-transform: uppercase;
        }

        p {
            font-size: 1.2rem;
            line-height: 1.9;
            margin-bottom: 1.5rem;
            font-weight: 500;
        }

        .highlight {
            background: linear-gradient(120deg, var(--c-gold) 0%, var(--c-gold) 100%);
            background-repeat: no-repeat;
            background-size: 100% 40%;
            background-position: 0 90%;
            padding: 0 5px;
        }

        .gallery-grid {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
        }

        .gallery-item {
            width: calc(33.333% - 24px);
            margin-bottom: 24px;
            border-radius: 12px;
            overflow: hidden;
            background: #fff;
            border: 3px solid var(--c-text);
            box-shadow: 5px 5px 0px var(--c-accent-2);
            transition: transform 0.3s;
        }

        .gallery-item:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 8px 8px 0px var(--c-accent-1);
        }

        .gallery-item img {
            width: 100%;
            display: block;
        }

        @media (max-width: 768px) {
            .gallery-item { width: calc(50% - 12px); }
            .hero-title { font-size: 3.5rem; }
            .card { padding: 1.5rem; }
        }

        /* Lightbox */
        #lightbox {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255, 251, 240, 0.95);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }
        #lightbox.visible {
            opacity: 1;
            pointer-events: auto;
        }
        #lightbox img {
            max-width: 90vw;
            max-height: 85vh;
            border: 5px solid var(--c-text);
            border-radius: 10px;
            box-shadow: 10px 10px 0px var(--c-accent-1);
            background: #fff;
        }

        .back-btn {
            position: fixed;
            top: 2rem;
            left: 2rem;
            color: var(--c-text);
            text-decoration: none;
            border: 2px solid var(--c-text);
            padding: 0.5rem 1.5rem;
            border-radius: 50px;
            z-index: 100;
            transition: all 0.3s;
            font-weight: bold;
            background: #fff;
            box-shadow: 3px 3px 0px var(--c-text);
        }

        .back-btn:hover {
            transform: translate(1px, 1px);
            box-shadow: 1px 1px 0px var(--c-text);
        }

        #loader {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: var(--c-bg);
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--c-accent-1);
            font-family: 'Zen Maru Gothic', sans-serif;
            font-size: 1.5rem;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <a href="/guild" class="back-btn">← Guild</a>
    <div id="loader">Opening Sketchbook...</div>

    <div id="canvas-container"></div>
    <div id="lightbox"><img src="" alt="Zoom"></div>

    <div class="content-layer">
        <header>
            <h1 class="hero-title">鄔莉 Uli</h1>
            <div class="hero-subtitle">Rational Intuition</div>
            <div class="scroll-hint">▼ Scroll to Explore ▼</div>
        </header>

        <section class="section" id="intro">
            <div class="card">
                <h2>The Logical Feeler</h2>
                <p>我是鄔莉，結合理性思維與直覺感知的動物溝通工作者、教學者與創作者。我並非天生「感受型」，而是擁有清晰邏輯背景的人，習慣以理解與分析來認識世界。</p>
                <p>因此，在學習動物溝通的初期，我曾歷經長時間卡關與自我懷疑。</p>
            </div>
        </section>

        <section class="section" id="turning-point">
            <div class="card">
                <h2>The Epiphany</h2>
                <p>轉折來自一次練習中，當我接收到貓咪<span class="highlight">「吃蟑螂的口感」</span>這個極為具體的感受時，我第一次真正理解——感受本身就是一種語言。</p>
                <p>從那之後，我開始以理性角度拆解直覺運作的機制，結合心理學、生物本能與能量感知，整理出一套讓左腦也能理解的動物溝通邏輯。</p>
            </div>
        </section>

        <section class="section" id="gallery-section">
            <div class="gallery-grid">
                <!-- Gallery Items injected here -->
            </div>
        </section>

        <section class="section" style="height: 50vh; align-items: flex-end;">
             <div class="card" style="text-align: center; background: transparent; border: none; box-shadow: none;">
                <h2 style="font-size: 3rem; color: var(--c-accent-1); text-shadow: 2px 2px 0px #fff;">Touch the Spirits</h2>
                <div style="display: flex; gap: 20px; justify-content: center; margin-top: 2rem;">
                    <a href="https://www.threads.com/@uliseanala.talk.to.animal" target="_blank" style="color: var(--c-text); text-decoration: none; font-size: 1.5rem; font-weight: bold; border-bottom: 2px solid var(--c-accent-2);">Threads</a>
                    <a href="https://www.instagram.com/uliseanala.talk.to.animal/" target="_blank" style="color: var(--c-text); text-decoration: none; font-size: 1.5rem; font-weight: bold; border-bottom: 2px solid var(--c-accent-2);">Instagram</a>
                </div>
                <p style="margin-top: 2rem; font-size: 0.9rem; opacity: 0.8;">© 2024 Uli. All Rights Reserved.</p>
             </div>
        </section>
    </div>

    <script>
        // --- 1. Gallery Data ---
        // Generates gallery_1.webp to gallery_19.webp
        const galleryImages = Array.from({length: 19}, (_, i) => `gallery_${i + 1}.webp`);

        const galleryGrid = document.querySelector('.gallery-grid');
        galleryImages.forEach(img => {
            const div = document.createElement('div');
            div.className = 'gallery-item';
            div.innerHTML = `<img src="/assets/img/guild/uli/${img}" alt="Artwork">`;
            galleryGrid.appendChild(div);
        });

        // --- 2. Three.js "Bright Sketch Zoo" Setup ---
        const scene = new THREE.Scene();
        // Bright Creamy Fog
        scene.fog = new THREE.FogExp2(0xFFFBF0, 0.015);

        const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 100);
        camera.position.z = 15;

        const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        document.getElementById('canvas-container').appendChild(renderer.domElement);

        // -- Lighting (Bright Sunny Day) --
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.8);
        scene.add(ambientLight);

        const dirLight = new THREE.DirectionalLight(0xfffae0, 1.0); // Warm Sun
        dirLight.position.set(20, 30, 20);
        scene.add(dirLight);

        // Fill light
        const pointLight = new THREE.PointLight(0xFF6B6B, 0.4);
        pointLight.position.set(-10, -10, 5);
        scene.add(pointLight);

        // -- Materials (Vibrant Toon) --

        function createGradientMap() {
            const canvas = document.createElement('canvas');
            canvas.width = 3;
            canvas.height = 1;
            const ctx = canvas.getContext('2d');
            // Sharp bands: Shadow, Base, Highlight
            // Using slightly darker tone for shadow, pure color for mid, and white tint for highlight
            ctx.fillStyle = '#cccccc'; // shadow map value (mapped by light intensity)
            ctx.fillRect(0, 0, 1, 1);
            ctx.fillStyle = '#ffffff';
            ctx.fillRect(1, 0, 2, 1);

            const tex = new THREE.CanvasTexture(canvas);
            tex.magFilter = THREE.NearestFilter;
            tex.minFilter = THREE.NearestFilter;
            return tex;
        }
        const gradientMap = createGradientMap();

        function createToonMaterial(hexColor) {
            return new THREE.MeshToonMaterial({
                color: hexColor,
                gradientMap: gradientMap,
                side: THREE.DoubleSide,
            });
        }

        // Outline Helper: Dark Pencil Grey
        function addOutline(mesh) {
            const edges = new THREE.EdgesGeometry(mesh.geometry);
            const line = new THREE.LineSegments(edges, new THREE.LineBasicMaterial({ color: 0x333333, linewidth: 2 }));
            mesh.add(line);
        }

        // -- Creature Classes (High Saturation) --

        class SpiritCreature {
            constructor() {
                this.mesh = new THREE.Group();
                this.timeOffset = Math.random() * 100;
                this.speed = 0.5 + Math.random() * 0.5;
                scene.add(this.mesh);
            }
            update(time) {}
        }

        class Whale extends SpiritCreature {
            constructor() {
                super();
                // Vibrant Blue
                const mat = createToonMaterial(0x2D9CDB);

                const bodyGeo = new THREE.SphereGeometry(1.5, 32, 32);
                bodyGeo.scale(2, 1, 1);
                const body = new THREE.Mesh(bodyGeo, mat);
                addOutline(body);
                this.mesh.add(body);

                // Tail
                const tailGeo = new THREE.ConeGeometry(0.8, 1, 16);
                tailGeo.rotateZ(-Math.PI / 2);
                const tail = new THREE.Mesh(tailGeo, mat);
                tail.position.set(-2.5, 0, 0);
                addOutline(tail);

                const flukeGeo = new THREE.SphereGeometry(0.5, 16, 16);
                flukeGeo.scale(0.5, 1.5, 0.2);
                const fluke1 = new THREE.Mesh(flukeGeo, mat);
                fluke1.position.set(-0.5, 0.5, 0);
                fluke1.rotation.z = 0.5;
                const fluke2 = fluke1.clone();
                fluke2.position.set(-0.5, -0.5, 0);
                fluke2.rotation.z = -0.5;

                const tailGroup = new THREE.Group();
                tailGroup.add(tail, fluke1, fluke2);
                this.tailGroup = tailGroup;
                this.mesh.add(tailGroup);

                // Fins
                const finGeo = new THREE.SphereGeometry(0.6, 16, 16);
                finGeo.scale(1, 0.3, 1);
                const finL = new THREE.Mesh(finGeo, mat);
                finL.position.set(0.5, -0.5, 1);
                finL.rotation.x = 0.5;
                finL.rotation.z = 0.5;
                addOutline(finL);

                const finR = finL.clone();
                finR.position.set(0.5, -0.5, -1);
                finR.rotation.x = -0.5;

                this.mesh.add(finL, finR);
                this.finL = finL;
                this.finR = finR;

                this.mesh.position.set(
                    (Math.random() - 0.5) * 20,
                    (Math.random() - 0.5) * 10,
                    (Math.random() - 0.5) * 10
                );
            }

            update(time) {
                const t = time + this.timeOffset;
                this.mesh.position.x -= 0.03 * this.speed;
                if (this.mesh.position.x < -20) this.mesh.position.x = 20;

                this.mesh.position.y += Math.sin(t) * 0.01;
                this.tailGroup.rotation.y = Math.sin(t * 3) * 0.2;
                this.finL.rotation.z = 0.5 + Math.sin(t * 4) * 0.2;
                this.finR.rotation.z = 0.5 + Math.sin(t * 4) * 0.2;
            }
        }

        class Jelly extends SpiritCreature {
            constructor() {
                super();
                // Vibrant Coral/Pink
                const mat = createToonMaterial(0xFF6B6B);

                const headGeo = new THREE.SphereGeometry(0.8, 32, 16, 0, Math.PI * 2, 0, Math.PI/2);
                const head = new THREE.Mesh(headGeo, mat);
                addOutline(head);
                this.mesh.add(head);

                this.tentacles = [];
                for(let i=0; i<6; i++) {
                    const tGeo = new THREE.CylinderGeometry(0.05, 0.02, 2, 8);
                    const tMesh = new THREE.Mesh(tGeo, createToonMaterial(0xFFFFFF)); // White string
                    const angle = (i / 6) * Math.PI * 2;
                    const r = 0.4;
                    tMesh.position.set(Math.cos(angle)*r, -1, Math.sin(angle)*r);
                    this.mesh.add(tMesh);
                    this.tentacles.push({mesh: tMesh, basePos: tMesh.position.clone(), angle: angle});
                }

                this.mesh.position.set(
                    (Math.random() - 0.5) * 20,
                    (Math.random() - 0.5) * 20,
                    (Math.random() - 0.5) * 10
                );
            }

            update(time) {
                const t = time + this.timeOffset;
                this.mesh.position.y += 0.015 * this.speed;
                if(this.mesh.position.y > 15) this.mesh.position.y = -15;

                const s = 1 + Math.sin(t * 3) * 0.1;
                this.mesh.scale.set(s, 1/s, s);

                this.tentacles.forEach(tent => {
                    tent.mesh.rotation.x = Math.sin(t * 4 + tent.angle) * 0.2;
                    tent.mesh.rotation.z = Math.cos(t * 4 + tent.angle) * 0.2;
                });
            }
        }

        class Turtle extends SpiritCreature {
            constructor() {
                super();
                // Vibrant Green
                const mat = createToonMaterial(0x6FCF97);
                const shellMat = createToonMaterial(0x27AE60);

                const shellGeo = new THREE.SphereGeometry(1, 32, 16, 0, Math.PI*2, 0, Math.PI/2);
                shellGeo.scale(1, 0.6, 1.2);
                const shell = new THREE.Mesh(shellGeo, shellMat);
                addOutline(shell);
                this.mesh.add(shell);

                const headGeo = new THREE.SphereGeometry(0.4, 16, 16);
                const head = new THREE.Mesh(headGeo, mat);
                head.position.set(0, 0, 1.2);
                addOutline(head);
                this.mesh.add(head);

                this.flippers = [];
                const flipGeo = new THREE.SphereGeometry(0.3, 16, 16);
                flipGeo.scale(1.5, 0.2, 0.8);

                const positions = [
                    {x: 0.8, y: -0.2, z: 0.6}, {x: -0.8, y: -0.2, z: 0.6},
                    {x: 0.8, y: -0.2, z: -0.6}, {x: -0.8, y: -0.2, z: -0.6}
                ];

                positions.forEach((pos, i) => {
                    const f = new THREE.Mesh(flipGeo, mat);
                    f.position.set(pos.x, pos.y, pos.z);
                    f.rotation.y = (i%2===0 ? -0.5 : 0.5) * (i<2 ? 1 : -1);
                    this.mesh.add(f);
                    this.flippers.push(f);
                });

                this.mesh.position.set(
                    (Math.random() - 0.5) * 20,
                    (Math.random() - 0.5) * 10,
                    (Math.random() - 0.5) * 10
                );
            }

            update(time) {
                const t = time + this.timeOffset;
                this.mesh.position.z += 0.02 * this.speed;
                if(this.mesh.position.z > 20) this.mesh.position.z = -20;

                this.flippers.forEach((f, i) => {
                    f.rotation.z = Math.sin(t * 2 + (i<2?0:Math.PI)) * 0.3;
                });
            }
        }

        class Sunfish extends SpiritCreature {
            constructor() {
                super();
                // Lavender
                const mat = createToonMaterial(0xBB6BD9);

                const bodyGeo = new THREE.SphereGeometry(1.2, 32, 16);
                bodyGeo.scale(1, 1.2, 0.4);
                const body = new THREE.Mesh(bodyGeo, mat);
                addOutline(body);
                this.mesh.add(body);

                const finGeo = new THREE.ConeGeometry(0.3, 1.5, 16);
                const topFin = new THREE.Mesh(finGeo, mat);
                topFin.position.set(0, 1.5, 0);

                const botFin = topFin.clone();
                botFin.rotation.z = Math.PI;
                botFin.position.set(0, -1.5, 0);

                this.mesh.add(topFin, botFin);
                this.fins = [topFin, botFin];

                this.mesh.position.set(
                    (Math.random() - 0.5) * 25,
                    (Math.random() - 0.5) * 15,
                    (Math.random() - 0.5) * 5
                );
            }

            update(time) {
                const t = time + this.timeOffset;
                this.mesh.position.x += 0.02 * this.speed;
                if(this.mesh.position.x > 20) this.mesh.position.x = -20;

                this.fins.forEach(f => {
                    f.rotation.x = Math.sin(t * 5) * 0.3;
                });
                this.mesh.rotation.y = Math.sin(t) * 0.1;
            }
        }

        class Eel extends SpiritCreature {
            constructor() {
                super();
                // Vibrant Orange/Gold
                const curvePath = new THREE.CatmullRomCurve3([
                    new THREE.Vector3(0,0,0), new THREE.Vector3(1,0,0),
                    new THREE.Vector3(2,0,0), new THREE.Vector3(3,0,0)
                ]);
                const geo = new THREE.TubeGeometry(curvePath, 12, 0.15, 8, false);
                const mat = createToonMaterial(0xF2994A);
                this.body = new THREE.Mesh(geo, mat);
                addOutline(this.body); // Outline on tube looks sketchy/cool
                this.mesh.add(this.body);

                this.mesh.position.set(
                   (Math.random() - 0.5) * 20,
                   (Math.random() - 0.5) * 15,
                   (Math.random() - 0.5) * 10
                );
            }

            update(time) {
                const t = time + this.timeOffset;
                this.mesh.position.x -= 0.04 * this.speed;
                if(this.mesh.position.x < -20) this.mesh.position.x = 20;

                this.mesh.position.y += Math.sin(t * 2 + this.mesh.position.x) * 0.02;
                this.mesh.rotation.z = Math.sin(t * 3) * 0.1;
            }
        }

        // -- Spawning --
        const creatures = [];
        for(let i=0; i<3; i++) creatures.push(new Whale());
        for(let i=0; i<5; i++) creatures.push(new Jelly());
        for(let i=0; i<3; i++) creatures.push(new Turtle());
        for(let i=0; i<3; i++) creatures.push(new Sunfish());
        for(let i=0; i<4; i++) creatures.push(new Eel());

        // -- Animation --
        const clock = new THREE.Clock();

        function animate() {
            requestAnimationFrame(animate);
            const time = clock.getElapsedTime();
            creatures.forEach(c => c.update(time));
            renderer.render(scene, camera);
        }
        animate();

        // -- Interaction --
        window.addEventListener('mousemove', (e) => {
            const x = (e.clientX / window.innerWidth) * 2 - 1;
            const y = -(e.clientY / window.innerHeight) * 2 + 1;
            gsap.to(camera.position, {
                x: x * 0.8,
                y: y * 0.8,
                duration: 1
            });
        });

        const raycaster = new THREE.Raycaster();
        const mouse = new THREE.Vector2();

        window.addEventListener('click', (e) => {
            // Only trigger if not clicking UI
            if(e.target.closest('.card') || e.target.closest('a') || e.target.closest('.gallery-item')) return;

            mouse.x = (e.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(e.clientY / window.innerHeight) * 2 + 1;
            raycaster.setFromCamera(mouse, camera);

            const intersects = raycaster.intersectObjects(scene.children, true);
            if(intersects.length > 0) {
                const randomImg = galleryImages[Math.floor(Math.random() * galleryImages.length)];
                showLightbox(`/assets/img/guild/uli/${randomImg}`);
            }
        });

        // -- GSAP --
        gsap.registerPlugin(ScrollTrigger);

        document.querySelectorAll('.card').forEach(card => {
            ScrollTrigger.create({
                trigger: card,
                start: "top 85%",
                onEnter: () => card.classList.add('active')
            });
        });

        imagesLoaded(galleryGrid, function() {
            new Masonry(galleryGrid, {
                itemSelector: '.gallery-item',
                columnWidth: '.gallery-item',
                percentPosition: true,
                gutter: 24
            });
            document.getElementById('loader').style.display = 'none';
        });

        // Lightbox
        const lightbox = document.getElementById('lightbox');
        const lbImg = lightbox.querySelector('img');

        function showLightbox(src) {
            lbImg.src = src;
            lightbox.classList.add('visible');
        }

        lightbox.addEventListener('click', () => {
            lightbox.classList.remove('visible');
        });

        document.addEventListener('click', (e) => {
            if(e.target.closest('.gallery-item')) {
                const img = e.target.closest('.gallery-item').querySelector('img');
                showLightbox(img.src);
            }
        });

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

    </script>
</body>
</html>