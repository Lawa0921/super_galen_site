<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PROJECT: LITTLE LION // MK-85</title>
    <meta name="description" content="Iron Will. Solo Operator. The Drifter.">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Rajdhani:wght@300;500;700&family=Noto+Sans+TC:wght@300;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <!-- Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <style>
        :root {
            --bg-dark: #020205;
            --hud-primary: #00F3FF; /* Cyan */
            --hud-secondary: #FF003C; /* Red */
            --hud-accent: #FCEE0A; /* Gold */
            --hud-dim: rgba(0, 243, 255, 0.15);
            --glass-bg: rgba(2, 2, 5, 0.6);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background-color: var(--bg-dark);
            color: #fff;
            font-family: 'Rajdhani', sans-serif;
            overflow-x: hidden;
            width: 100vw;
            cursor: none; /* Custom cursor */
        }

        /* --- Custom Cursor --- */
        #cursor-target {
            position: fixed; top: 0; left: 0; width: 40px; height: 40px;
            border: 2px solid var(--hud-primary); border-radius: 50%;
            pointer-events: none; z-index: 9999;
            transform: translate(-50%, -50%);
            mix-blend-mode: screen;
            transition: width 0.2s, height 0.2s;
        }
        #cursor-dot {
            position: fixed; top: 0; left: 0; width: 6px; height: 6px;
            background: var(--hud-secondary); border-radius: 50%;
            pointer-events: none; z-index: 9999;
            transform: translate(-50%, -50%);
        }
        body:active #cursor-target { width: 30px; height: 30px; border-color: var(--hud-secondary); }

        /* --- Canvas --- */
        #webgl-canvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 0; pointer-events: none;
        }

        /* --- HUD Overlay --- */
        .hud-layer {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 10; pointer-events: none;
        }

        .hud-border {
            position: absolute; border: 1px solid var(--hud-dim);
        }
        .border-top { top: 30px; left: 5%; width: 90%; height: 1px; background: linear-gradient(90deg, transparent, var(--hud-primary), transparent); border: none; }
        .border-bottom { bottom: 30px; left: 5%; width: 90%; height: 1px; background: linear-gradient(90deg, transparent, var(--hud-primary), transparent); border: none; }

        .hud-data {
            font-family: 'Orbitron'; font-size: 0.8rem; color: var(--hud-primary);
            position: absolute;
        }
        .data-tl { top: 40px; left: 5%; }
        .data-tr { top: 40px; right: 5%; text-align: right; }
        .data-bl { bottom: 40px; left: 5%; }
        .data-br { bottom: 40px; right: 5%; text-align: right; }

        /* --- Boot Screen --- */
        #boot-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 10000;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
        }
        .boot-circle {
            width: 100px; height: 100px; border: 4px solid var(--hud-primary);
            border-top: 4px solid transparent; border-radius: 50%;
            animation: spin 1s infinite linear;
            margin-bottom: 2rem;
        }
        .boot-text {
            font-family: 'Orbitron'; color: var(--hud-primary); letter-spacing: 5px;
            animation: blink 0.5s infinite alternate;
        }

        /* --- Main Content --- */
        main { position: relative; z-index: 20; }

        section {
            min-height: 100vh;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            padding: 2rem;
            position: relative;
        }

        .holo-panel {
            background: rgba(10, 20, 30, 0.4);
            border: 1px solid var(--hud-dim);
            padding: 2rem;
            backdrop-filter: blur(10px);
            position: relative;
            max-width: 800px; width: 100%;
            transform: perspective(1000px) rotateX(0deg);
            transition: transform 0.1s;
            box-shadow: 0 0 30px rgba(0, 243, 255, 0.05);
        }
        .holo-panel::before {
            content: ''; position: absolute; top: -1px; left: -1px; width: 20px; height: 20px;
            border-top: 2px solid var(--hud-primary); border-left: 2px solid var(--hud-primary);
        }
        .holo-panel::after {
            content: ''; position: absolute; bottom: -1px; right: -1px; width: 20px; height: 20px;
            border-bottom: 2px solid var(--hud-primary); border-right: 2px solid var(--hud-primary);
        }

        /* Hero */
        .hero-title {
            font-family: 'Orbitron'; font-weight: 900;
            font-size: clamp(3rem, 10vw, 8rem);
            color: transparent; -webkit-text-stroke: 2px var(--hud-primary);
            text-shadow: 0 0 20px var(--hud-primary);
            margin-bottom: 1rem;
            text-align: center;
            opacity: 0; /* Animated in */
        }
        .hero-subtitle {
            font-size: clamp(1rem, 3vw, 1.5rem);
            color: var(--hud-accent); letter-spacing: 0.3em;
            margin-bottom: 3rem; text-align: center;
            opacity: 0;
        }

        .avatar-hex {
            width: 250px; height: 250px;
            clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
            background: #000;
            position: relative;
            margin: 0 auto;
            display: flex; justify-content: center; align-items: center;
        }
        .avatar-img {
            width: 96%; height: 96%;
            clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
            object-fit: cover;
            filter: sepia(0.5) hue-rotate(180deg) saturate(1.5) contrast(1.2);
            transition: 0.5s;
        }
        .avatar-hex:hover .avatar-img {
            filter: none;
        }

        /* Service Grid */
        .service-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem; width: 100%; margin-top: 2rem;
        }
        .service-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0) 100%);
            border: 1px solid var(--hud-dim);
            padding: 1.5rem;
            transition: 0.3s;
        }
        .service-card:hover {
            border-color: var(--hud-secondary);
            background: rgba(255, 0, 60, 0.1);
            transform: translateY(-5px);
        }
        .service-card i {
            font-size: 2rem; color: var(--hud-primary); margin-bottom: 1rem;
        }

        /* Footer */
        .finale-container {
            text-align: center;
            border: 2px solid var(--hud-secondary);
            padding: 3rem;
            position: relative;
            background: rgba(0,0,0,0.8);
        }
        .social-icons {
            display: flex; justify-content: center; gap: 2rem; margin-top: 2rem;
        }
        .social-btn {
            width: 60px; height: 60px;
            border: 1px solid var(--hud-accent);
            color: var(--hud-accent);
            display: flex; justify-content: center; align-items: center;
            font-size: 1.5rem; text-decoration: none;
            transition: 0.3s;
            clip-path: polygon(20% 0, 100% 0, 100% 80%, 80% 100%, 0 100%, 0 20%);
        }
        .social-btn:hover {
            background: var(--hud-accent); color: #000;
            box-shadow: 0 0 30px var(--hud-accent);
        }

        @keyframes spin { 100% { transform: rotate(360deg); } }
        @keyframes blink { 100% { opacity: 0.5; } }

        /* Responsive */
        @media (max-width: 768px) {
            .hero-title { -webkit-text-stroke: 1px var(--hud-primary); }
            .holo-panel { padding: 1.5rem; }
        }
    </style>
</head>
<body>

    <!-- BOOT SEQUENCE -->
    <div id="boot-screen">
        <div class="boot-circle"></div>
        <div class="boot-text">INITIALIZING MK-85 SYSTEM...</div>
        <div style="margin-top: 10px; font-family: 'Share Tech Mono'; color: #666; font-size: 0.8rem;" id="boot-log">
            LOADING ASSETS
        </div>
    </div>

    <!-- HUD LAYERS -->
    <div id="cursor-target"></div>
    <div id="cursor-dot"></div>

    <div class="hud-layer">
        <div class="border-top"></div>
        <div class="border-bottom"></div>

        <div class="hud-data data-tl">
            SYSTEM: ONLINE<br>
            TARGET: XIAOSHI
        </div>
        <div class="hud-data data-tr">
            <span id="clock">00:00:00</span><br>
            TEMP: 36.5°C
        </div>
        <div class="hud-data data-bl">
            PWR: 100%<br>
            MODE: SOLITARY
        </div>
        <div class="hud-data data-br">
            COORDS:<br>
            25.0330° N, 121.5654° E
        </div>
    </div>

    <!-- 3D BACKGROUND -->
    <div id="webgl-canvas"></div>

    <main>
        <!-- NAV -->
        <a href="/guild/" style="position: fixed; top: 2rem; left: 2rem; color: var(--hud-primary); text-decoration: none; border: 1px solid var(--hud-primary); padding: 0.5rem 1rem; font-family: 'Orbitron'; z-index: 100; background: rgba(0,0,0,0.8); backdrop-filter: blur(5px);">
            &lt; RETURN TO BASE
        </a>

        <!-- HERO -->
        <section id="hero">
            <div class="avatar-hex">
                <img src="/assets/img/guild/xiaoshi/avatar.webp" class="avatar-img" alt="Xiaoshi">
            </div>
            <h1 class="hero-title">LITTLE LION</h1>
            <h2 class="hero-subtitle">THE IRON DRIFTER</h2>
            <div class="holo-panel" style="text-align: center; max-width: 600px;">
                <p style="font-size: 1.2rem; color: #ccc;">
                    <span style="color: var(--hud-secondary)">// WARNING:</span> SOLO OPERATOR DETECTED.
                </p>
            </div>
        </section>

        <!-- ORIGIN -->
        <section id="origin">
            <div class="holo-panel">
                <h3 style="color: var(--hud-primary); font-family: 'Orbitron'; margin-bottom: 1rem; border-bottom: 1px solid var(--hud-dim); padding-bottom: 0.5rem;">
                    MISSION LOG: ORIGIN
                </h3>
                <div style="display: grid; grid-template-columns: 1fr; gap: 2rem;">
                    <p style="font-size: 1.1rem; line-height: 1.8; color: #ddd; font-family: 'Noto Sans TC';">
                        我是小獅，一個從基層爬起，被社會毒打的打工人。<br>
                        加入某奇怪論壇「跑腿幫」已經將近20年。<br><br>
                        <span style="color: var(--hud-accent);">► 目前狀態:</span> 遊走各地的接案者<br>
                        <span style="color: var(--hud-accent);">► 活動範圍:</span> 主要是雙北～但各地都會跑
                    </p>
                </div>
            </div>
        </section>

        <!-- CAPABILITIES -->
        <section id="capabilities">
            <h2 style="font-family: 'Orbitron'; font-size: 2.5rem; margin-bottom: 2rem; color: var(--hud-primary); text-shadow: 0 0 10px var(--hud-primary);">
                SUIT CAPABILITIES
            </h2>
            <div class="holo-panel" style="max-width: 1000px;">
                <div class="service-grid">
                    <div class="service-card">
                        <i class="fa-solid fa-broom"></i>
                        <h4 style="font-family: 'Orbitron'; color: #fff;">CLEANUP</h4>
                        <p style="font-size: 0.9rem; color: #aaa; margin-top: 0.5rem; font-family: 'Noto Sans TC';">
                            居家服務 / 掃墓清潔<br>
                            Eliminating targets (dirt).
                        </p>
                    </div>
                    <div class="service-card">
                        <i class="fa-solid fa-utensils"></i>
                        <h4 style="font-family: 'Orbitron'; color: #fff;">PROVISIONS</h4>
                        <p style="font-size: 0.9rem; color: #aaa; margin-top: 0.5rem; font-family: 'Noto Sans TC';">
                            美食部落客開拓<br>
                            Resource acquisition.
                        </p>
                    </div>
                    <div class="service-card">
                        <i class="fa-solid fa-user-clock"></i>
                        <h4 style="font-family: 'Orbitron'; color: #fff;">LOGISTICS</h4>
                        <p style="font-size: 0.9rem; color: #aaa; margin-top: 0.5rem; font-family: 'Noto Sans TC';">
                            專業跑腿 / 人力調度<br>
                            Rapid deployment.
                        </p>
                    </div>
                    <div class="service-card">
                        <i class="fa-solid fa-shield-halved"></i>
                        <h4 style="font-family: 'Orbitron'; color: #fff;">GUARDIAN</h4>
                        <p style="font-size: 0.9rem; color: #aaa; margin-top: 0.5rem; font-family: 'Noto Sans TC';">
                            專業管家 / 協助陪伴<br>
                            Asset protection.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- DIRECTIVE -->
        <section id="directive">
            <div class="holo-panel" style="text-align: center; border-color: var(--hud-secondary);">
                <i class="fa-solid fa-fingerprint" style="font-size: 4rem; color: var(--hud-secondary); margin-bottom: 1.5rem;"></i>
                <h3 style="color: var(--hud-secondary); font-family: 'Orbitron'; margin-bottom: 1.5rem;">PRIME DIRECTIVE</h3>
                <p style="font-size: 1.3rem; line-height: 1.8; font-family: 'Noto Sans TC';">
                    工作一切以<span style="color: var(--hud-accent); font-weight: bold; font-size: 1.5rem; margin: 0 5px;">「獨行」</span>為主。<br>
                    有些案件的特殊性，會引起我的好奇心。<br>
                    要是哪天真的剋死異鄉，所以趕快找尋公會加入～哈哈哈。
                </p>
            </div>
        </section>

        <!-- FINALE -->
        <section id="finale">
            <div class="finale-container">
                <div class="avatar-hex" style="width: 100px; height: 100px; margin: 0 auto 2rem auto;">
                    <img src="/assets/img/guild/xiaoshi/avatar.webp" class="avatar-img">
                </div>
                <h2 style="font-family: 'Orbitron'; font-size: 2rem; color: #fff; margin-bottom: 0.5rem;">READY FOR EXTRACTION?</h2>
                <p style="color: var(--hud-secondary); letter-spacing: 2px;">IRON WILL // UNBREAKABLE</p>

                <div class="social-icons">
                    <a href="https://www.threads.net/@iabc5040" target="_blank" class="social-btn">
                        <i class="fa-brands fa-threads"></i>
                    </a>
                    <a href="https://www.instagram.com/iabc5040/" target="_blank" class="social-btn">
                        <i class="fa-brands fa-instagram"></i>
                    </a>
                </div>
            </div>
        </section>

        <footer style="text-align: center; padding: 2rem; color: #555; font-size: 0.8rem;">
            SYSTEM OFFLINE. <br>
            DESIGNED BY SUPERGALEN.
        </footer>
    </main>

    <!-- SCRIPTS -->
    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
            }
        }
    </script>
    <script type="module">
        import * as THREE from 'three';
        import { EffectComposer } from 'three/addons/postprocessing/EffectComposer.js';
        import { RenderPass } from 'three/addons/postprocessing/RenderPass.js';
        import { UnrealBloomPass } from 'three/addons/postprocessing/UnrealBloomPass.js';

        // --- System Boot ---
        const bootScreen = document.getElementById('boot-screen');
        const bootLog = document.getElementById('boot-log');

        const logs = ["INITIALIZING CORE...", "CALIBRATING REPULSORS...", "ESTABLISHING UPLINK...", "SYSTEM GREEN."];
        let logIdx = 0;

        const logInterval = setInterval(() => {
            if(logIdx < logs.length) {
                bootLog.innerText = logs[logIdx];
                logIdx++;
            }
        }, 400);

        window.addEventListener('load', () => {
            setTimeout(() => {
                clearInterval(logInterval);
                gsap.to(bootScreen, {
                    opacity: 0,
                    duration: 0.8,
                    ease: "power2.inOut",
                    onComplete: () => {
                        bootScreen.style.display = 'none';
                        revealHero();
                    }
                });
            }, 2000);
        });

        function revealHero() {
            gsap.to(".hero-title", { opacity: 1, duration: 1, y: 0, ease: "power2.out" });
            gsap.to(".hero-subtitle", { opacity: 1, duration: 1, delay: 0.3, ease: "power2.out" });
            gsap.from(".hud-layer", { scale: 1.1, opacity: 0, duration: 1.5, ease: "back.out(1.7)" });
        }

        // --- Clock ---
        setInterval(() => {
            const now = new Date();
            document.getElementById('clock').innerText = now.toLocaleTimeString('en-US', {hour12: false});
        }, 1000);

        // --- Mouse Interaction ---
        const cursorTarget = document.getElementById('cursor-target');
        const cursorDot = document.getElementById('cursor-dot');
        const mouse = new THREE.Vector2();

        window.addEventListener('mousemove', (e) => {
            gsap.to(cursorTarget, { x: e.clientX, y: e.clientY, duration: 0.1 });
            gsap.to(cursorDot, { x: e.clientX, y: e.clientY, duration: 0 });

            // Normalize mouse for Three.js (-1 to 1)
            mouse.x = (e.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(e.clientY / window.innerHeight) * 2 + 1;
        });

        // --- THREE.JS SCENE ---
        const container = document.getElementById('webgl-canvas');
        const scene = new THREE.Scene();
        scene.fog = new THREE.FogExp2(0x020205, 0.02);

        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 10;

        const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 1.5)); // Optimize
        container.appendChild(renderer.domElement);

        // --- Post Processing (Bloom) ---
        const renderScene = new RenderPass(scene, camera);
        const bloomPass = new UnrealBloomPass(new THREE.Vector2(window.innerWidth, window.innerHeight), 1.5, 0.4, 0.85);
        bloomPass.threshold = 0.1;
        bloomPass.strength = 1.2; // Intense bloom
        bloomPass.radius = 0.5;

        const composer = new EffectComposer(renderer);
        composer.addPass(renderScene);
        composer.addPass(bloomPass);

        // --- Objects ---

        // 1. Reactor Core Rings
        const rings = [];
        const ringGroup = new THREE.Group();
        scene.add(ringGroup);

        for (let i = 0; i < 5; i++) {
            const geometry = new THREE.TorusGeometry(3 + i * 1.5, 0.05, 16, 100);
            const material = new THREE.MeshBasicMaterial({ color: i % 2 === 0 ? 0x00F3FF : 0xFF003C });
            const ring = new THREE.Mesh(geometry, material);

            ring.rotation.x = Math.random() * Math.PI;
            ring.rotation.y = Math.random() * Math.PI;

            ringGroup.add(ring);
            rings.push({ mesh: ring, speed: (Math.random() - 0.5) * 0.02 });
        }

        // 2. Particle Tunnel
        const particlesGeometry = new THREE.BufferGeometry();
        const particlesCount = 2000;
        const posArray = new Float32Array(particlesCount * 3);

        for(let i = 0; i < particlesCount * 3; i+=3) {
            // Cylinder distribution
            const theta = Math.random() * Math.PI * 2;
            const r = 5 + Math.random() * 20; // Radius
            const z = (Math.random() - 0.5) * 100;

            posArray[i] = r * Math.cos(theta);
            posArray[i+1] = r * Math.sin(theta);
            posArray[i+2] = z;
        }

        particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
        const particlesMaterial = new THREE.PointsMaterial({
            size: 0.05,
            color: 0x00F3FF,
            transparent: true,
            opacity: 0.8,
            blending: THREE.AdditiveBlending
        });

        const particleSystem = new THREE.Points(particlesGeometry, particlesMaterial);
        scene.add(particleSystem);

        // 3. Floating Data Blocks (Instanced)
        const blockGeo = new THREE.BoxGeometry(0.5, 0.5, 0.5);
        const blockMat = new THREE.MeshBasicMaterial({ color: 0xFCEE0A, wireframe: true });
        const blocks = new THREE.InstancedMesh(blockGeo, blockMat, 50);
        scene.add(blocks);

        const dummy = new THREE.Object3D();
        for (let i = 0; i < 50; i++) {
            dummy.position.set(
                (Math.random() - 0.5) * 40,
                (Math.random() - 0.5) * 40,
                (Math.random() - 0.5) * 60
            );
            dummy.rotation.set(Math.random(), Math.random(), Math.random());
            dummy.updateMatrix();
            blocks.setMatrixAt(i, dummy.matrix);
        }

        // --- Animation ---

        function animate() {
            // Rotate Rings
            rings.forEach((r, i) => {
                r.mesh.rotation.x += r.speed;
                r.mesh.rotation.y += r.speed * 0.5;
                // React to mouse
                r.mesh.rotation.z += mouse.x * 0.001 * (i+1);
            });

            // Pulse Reactor
            const scale = 1 + Math.sin(Date.now() * 0.002) * 0.05;
            ringGroup.scale.set(scale, scale, scale);

            // Move Tunnel
            particleSystem.rotation.z += 0.001;

            // Mouse Parallax for Group
            ringGroup.rotation.x = mouse.y * 0.1;
            ringGroup.rotation.y = mouse.x * 0.1;

            composer.render();
            requestAnimationFrame(animate);
        }
        animate();

        // --- Scroll Interaction (Camera Fly) ---
        gsap.registerPlugin(ScrollTrigger);

        // Fly camera through tunnel
        gsap.to(camera.position, {
            z: -30,
            ease: "none",
            scrollTrigger: {
                trigger: "body",
                start: "top top",
                end: "bottom bottom",
                scrub: 1
            }
        });

        // Rotate particles on scroll
        gsap.to(particleSystem.rotation, {
            z: 2,
            ease: "none",
            scrollTrigger: {
                trigger: "body",
                start: "top top",
                end: "bottom bottom",
                scrub: 1
            }
        });

        // Tilt Holo Panels
        document.querySelectorAll('.holo-panel').forEach(panel => {
            panel.addEventListener('mousemove', (e) => {
                const rect = panel.getBoundingClientRect();
                const x = e.clientX - rect.left; // x position within the element.
                const y = e.clientY - rect.top;  // y position within the element.

                const centerX = rect.width / 2;
                const centerY = rect.height / 2;

                const rotateX = ((y - centerY) / centerY) * -5; // Max 5 deg
                const rotateY = ((x - centerX) / centerX) * 5;

                gsap.to(panel, { transform: `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg)`, duration: 0.5 });
            });
            panel.addEventListener('mouseleave', () => {
                gsap.to(panel, { transform: `perspective(1000px) rotateX(0deg) rotateY(0deg)`, duration: 0.5 });
            });
        });

        // Resize
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
            composer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>
