<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZAIRA | EXPLORER</title>
    <!-- Fonts: Inter + IBM Plex Mono (Lab/Tech but grounded) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@300;400;500&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <style>
        :root {
            --bg-color: #0f172a; /* Slate 900 */
            --bg-secondary: #1e293b; /* Slate 800 */
            --text-main: #e2e8f0; /* Slate 200 */
            --text-muted: #94a3b8; /* Slate 400 */
            --accent-color: #f97316; /* Orange 500 (Signal/Alert/Warmth) */
            --accent-glow: rgba(249, 115, 22, 0.2);
            --font-main: 'Inter', sans-serif;
            --font-mono: 'IBM Plex Mono', monospace;
            --border-color: rgba(148, 163, 184, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: var(--font-main);
            overflow-x: hidden;
            overscroll-behavior: none;
            cursor: crosshair; /* Lab precision feel */
        }

        /* Canvas Containers */
        #canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: -1;
        }

        /* Grid Overlay (Subtle Tech) */
        .grid-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                linear-gradient(var(--border-color) 1px, transparent 1px),
                linear-gradient(90deg, var(--border-color) 1px, transparent 1px);
            background-size: 100px 100px;
            opacity: 0.05;
            z-index: -1;
            pointer-events: none;
        }

        /* Loading Screen */
        #loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-color);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            flex-direction: column;
            font-family: var(--font-mono);
            transition: opacity 0.8s ease;
        }
        .loader-text {
            margin-bottom: 1rem;
            font-size: 0.8rem;
            letter-spacing: 0.2em;
            color: var(--accent-color);
        }
        .loader-bar-container {
            width: 200px;
            height: 2px;
            background: var(--bg-secondary);
            overflow: hidden;
        }
        .loader-bar {
            width: 0%;
            height: 100%;
            background: var(--accent-color);
            animation: load 2s ease-in-out forwards;
        }
        @keyframes load { 0% { width: 0%; } 100% { width: 100%; } }

        /* Typography */
        h1, h2, h3, h4 {
            font-family: var(--font-main);
            font-weight: 300;
        }

        .mono {
            font-family: var(--font-mono);
        }

        .accent {
            color: var(--accent-color);
        }

        /* Section Layouts */
        section {
            min-height: 100vh;
            padding: 4rem 2rem;
            position: relative;
            display: flex;
            align-items: center;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
        }

        /* Hero Section */
        #hero {
            justify-content: flex-start;
            padding-top: 15vh;
        }

        .hero-content {
            max-width: 600px;
            z-index: 10;
        }

        .hero-label {
            font-size: 0.8rem;
            letter-spacing: 0.2em;
            margin-bottom: 1rem;
            display: block;
            opacity: 0;
            transform: translateX(-20px);
        }

        .hero-title {
            font-size: clamp(3rem, 8vw, 7rem);
            line-height: 0.9;
            margin-bottom: 2rem;
            letter-spacing: -0.02em;
            opacity: 0;
            transform: translateX(-20px);
        }

        .hero-desc {
            font-family: var(--font-mono);
            font-size: 0.9rem;
            line-height: 1.8;
            color: var(--text-muted);
            border-left: 2px solid var(--accent-color);
            padding-left: 1.5rem;
            max-width: 400px;
            opacity: 0;
            transform: translateX(-20px);
        }

        /* Avatar Float */
        .avatar-float {
            position: absolute;
            right: 10%;
            top: 20%;
            width: 250px; /* Larger */
            height: 350px; /* Portrait ratio */
            border: 1px solid var(--border-color);
            overflow: hidden;
            z-index: 5;
            opacity: 0;
            transform: translateY(30px);
            background: var(--bg-secondary);
        }
        .avatar-float::after {
            content: '';
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(15, 23, 42, 0.3); /* Tint */
            mix-blend-mode: multiply;
        }
        .avatar-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: grayscale(100%) contrast(1.2);
            transition: transform 1s ease;
        }
        .avatar-float:hover .avatar-img {
            transform: scale(1.05);
        }
        .avatar-label {
            position: absolute;
            bottom: 0;
            right: 0;
            background: var(--bg-color);
            color: var(--text-muted);
            font-family: var(--font-mono);
            font-size: 0.7rem;
            padding: 0.5rem 1rem;
            border-top: 1px solid var(--border-color);
            border-left: 1px solid var(--border-color);
        }


        /* Content Panels (Asymmetrical) */
        .panel-wrapper {
            display: flex;
            justify-content: flex-end; /* Push to right generally */
            margin-bottom: 10vh;
        }
        .panel-wrapper.left {
            justify-content: flex-start;
        }

        .data-panel {
            background: rgba(30, 41, 59, 0.7); /* Semi-transparent Slate 800 */
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-color);
            padding: 2.5rem;
            width: 100%;
            max-width: 500px;
            position: relative;
            transition: border-color 0.3s ease;
        }
        .data-panel:hover {
            border-color: var(--accent-color);
        }

        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            margin-bottom: 2rem;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 1rem;
        }

        .panel-title {
            font-size: 1.5rem;
            letter-spacing: 0.05em;
        }

        .panel-id {
            font-family: var(--font-mono);
            font-size: 0.8rem;
            color: var(--accent-color);
        }

        .tag-cloud {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1.5rem;
        }
        .tag {
            font-family: var(--font-mono);
            font-size: 0.75rem;
            padding: 0.25rem 0.75rem;
            border: 1px solid var(--border-color);
            color: var(--text-muted);
            transition: all 0.3s ease;
        }
        .tag:hover {
            color: var(--accent-color);
            border-color: var(--accent-color);
            background: rgba(249, 115, 22, 0.05);
        }

        /* Field Notes (Timeline) */
        .log-item {
            margin-bottom: 2rem;
            padding-left: 1rem;
            border-left: 1px solid var(--border-color);
            position: relative;
        }
        .log-item::before {
            content: '';
            position: absolute;
            left: -3px;
            top: 5px;
            width: 5px;
            height: 5px;
            background: var(--accent-color);
        }
        .log-meta {
            font-family: var(--font-mono);
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-bottom: 0.25rem;
        }
        .log-header {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
        }
        .log-desc {
            font-size: 0.95rem;
            color: var(--text-muted);
            line-height: 1.6;
        }

        /* Social Hub */
        .social-hub {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 2rem;
        }
        .social-card {
            display: flex;
            align-items: center;
            padding: 1.5rem;
            background: rgba(15, 23, 42, 0.5);
            border: 1px solid var(--border-color);
            color: var(--text-muted);
            text-decoration: none;
            transition: all 0.3s ease;
        }
        .social-card i {
            font-size: 1.2rem;
            margin-right: 1rem;
            color: var(--text-main);
        }
        .social-card:hover {
            border-color: var(--accent-color);
            transform: translateY(-2px);
            background: rgba(30, 41, 59, 0.8);
        }
        .social-info div:first-child {
            font-size: 0.9rem;
            color: var(--text-main);
            margin-bottom: 0.2rem;
        }
        .social-info div:last-child {
            font-family: var(--font-mono);
            font-size: 0.7rem;
        }

        /* Frequency Indicator */
        .freq-readout {
            position: fixed;
            bottom: 2rem;
            left: 2rem;
            font-family: var(--font-mono);
            font-size: 0.7rem;
            color: var(--text-muted);
            z-index: 50;
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        .freq-bar {
            width: 30px;
            height: 10px;
            display: flex;
            align-items: flex-end;
            gap: 2px;
        }
        .bar-seg {
            width: 2px;
            background: var(--accent-color);
            animation: equalize 1s infinite ease-in-out;
        }
        .bar-seg:nth-child(2) { animation-delay: 0.1s; }
        .bar-seg:nth-child(3) { animation-delay: 0.2s; }
        .bar-seg:nth-child(4) { animation-delay: 0.3s; }
        @keyframes equalize { 0%, 100% { height: 2px; } 50% { height: 100%; } }

        /* Media Queries */
        @media (max-width: 768px) {
            .hero-title { font-size: 3.5rem; }
            .avatar-float {
                position: relative;
                width: 100%;
                height: 300px;
                right: auto;
                top: auto;
                margin-bottom: 2rem;
            }
            .panel-wrapper { justify-content: flex-start; }
            #hero { padding-top: 10vh; flex-direction: column-reverse; }
        }

    </style>
</head>
<body>

    <!-- Overlay -->
    <div class="grid-overlay"></div>
    <div id="loader">
        <div class="loader-text mono">INITIALIZING FREQUENCIES...</div>
        <div class="loader-bar-container"><div class="loader-bar"></div></div>
    </div>

    <!-- 3D Canvas -->
    <div id="canvas-container"></div>

    <!-- UI Elements -->
    <div class="freq-readout">
        <div class="freq-bar">
            <div class="bar-seg"></div>
            <div class="bar-seg"></div>
            <div class="bar-seg"></div>
            <div class="bar-seg"></div>
        </div>
        <span>ZAI_LAB // V.1.0</span>
        <span id="scroll-val">DEPTH: 0m</span>
    </div>

    <!-- Main Content -->
    <main>

        <!-- Hero Section -->
        <section id="hero">
            <div class="container">
                <div class="avatar-float">
                    <img src="/assets/img/guild/zaira/avatar.webp" alt="Zaira" class="avatar-img">
                    <div class="avatar-label">ID: ZAIRA</div>
                </div>

                <div class="hero-content">
                    <span class="hero-label mono accent">SUBJECT_001</span>
                    <h1 class="hero-title">EXPLORING<br>FREQUENCIES</h1>
                    <div class="hero-desc">
                        Experimenting. Climbing. Listening.<br>
                        Still exploring the path of life.<br>
                        <span class="mono accent" style="font-size: 0.7rem; margin-top: 1rem; display: block;">STATUS: ACTIVE</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Bio / Lab Data -->
        <section id="bio">
            <div class="container">
                <div class="panel-wrapper left">
                    <div class="data-panel scroll-reveal">
                        <div class="panel-header">
                            <h2 class="panel-title">THE LAB</h2>
                            <span class="panel-id">SEC_01</span>
                        </div>
                        <p style="line-height: 1.8; color: var(--text-muted); margin-bottom: 1.5rem;">
                            我是 Zaira，還在探索自己的人生路上。興趣多元廣泛，喜歡寫字、畫畫、唱歌、偶爾爬爬山，覺得有趣很特別的事情都想試試看！
                        </p>
                        <p style="line-height: 1.8; color: var(--text-muted);">
                            我用 Medium 記錄我覺得值得分享的內容，包含語言學習、個人成長和歌詞翻譯等主題。
                            在今天開了自己的 Podcast 頻道（在意實驗室｜ Zai Lab）和 Instagram 帳號。
                            目前我也不知道最終會長成什麼樣子，但想試試看各種有趣的事情，所以才叫「實驗室」。
                        </p>

                        <div class="tag-cloud">
                            <span class="tag">WRITING</span>
                            <span class="tag">DRAWING</span>
                            <span class="tag">SINGING</span>
                            <span class="tag">HIKING</span>
                            <span class="tag">LANGUAGES</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Field Notes (Logs) -->
        <section id="logs">
            <div class="container">
                <div class="panel-wrapper"> <!-- Right aligned -->
                    <div class="data-panel scroll-reveal">
                        <div class="panel-header">
                            <h2 class="panel-title">FIELD NOTES</h2>
                            <span class="panel-id">SEC_02</span>
                        </div>

                        <div class="log-item">
                            <div class="log-meta">LOC: ROME, IT // DURATION: 1YR</div>
                            <h4 class="log-header">Exchange Program</h4>
                            <p class="log-desc">交換學生一年。在羅馬的古老石牆間迴響，解鎖義大利語頻段。</p>
                        </div>

                        <div class="log-item">
                            <div class="log-meta">LOC: TANZANIA // TYPE: VOLUNTEER</div>
                            <h4 class="log-header">Service Learning</h4>
                            <p class="log-desc">深入坦尚尼亞，進行服務學習志工計劃。在原始頻率中尋找純粹的連結。</p>
                        </div>

                        <div class="log-item">
                            <div class="log-meta">LOC: CZECH REP // ROLE: TEACHER</div>
                            <h4 class="log-header">Internship</h4>
                            <p class="log-desc">華語老師實習半年。學生來自烏克蘭、義大利、捷克、斯洛伐克和印尼。</p>
                        </div>

                        <div style="margin-top: 2rem; padding: 1rem; border: 1px dashed var(--border-color); font-size: 0.9rem; color: var(--text-muted); text-align: center;">
                            "語言與文化是我和世界產生連結的工具。"
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Connect -->
        <section id="connect">
            <div class="container">
                <div class="panel-wrapper left">
                    <div class="data-panel scroll-reveal" style="background: transparent; border: none; backdrop-filter: none; padding: 0;">
                        <div class="panel-header" style="border-bottom: none;">
                            <h2 class="panel-title">TRANSMIT</h2>
                            <span class="panel-id">SEC_03</span>
                        </div>
                        <p style="margin-bottom: 2rem; color: var(--text-muted);">
                            非常喜歡和別人聊聊，知道別人背後的故事和不同的經驗讓我覺得很有趣！歡迎大家來交流 ✨
                        </p>

                        <div class="social-hub">
                            <a href="https://medium.com/@zairaforzaaa" target="_blank" class="social-card">
                                <i class="fa-brands fa-medium"></i>
                                <div class="social-info">
                                    <div>Medium</div>
                                    <div>Thoughts & Lyrics</div>
                                </div>
                            </a>

                            <a href="https://player.soundon.fm/p/0b85eda0-363a-4873-a101-ebb9f9fed4d8" target="_blank" class="social-card">
                                <i class="fa-solid fa-microphone-lines"></i>
                                <div class="social-info">
                                    <div>Zai Lab</div>
                                    <div>Podcast</div>
                                </div>
                            </a>

                            <a href="https://www.instagram.com/zailab_zaira_forzaaa/" target="_blank" class="social-card">
                                <i class="fa-brands fa-instagram"></i>
                                <div class="social-info">
                                    <div>Instagram</div>
                                    <div>Visual Diary</div>
                                </div>
                            </a>

                            <a href="https://www.threads.net/@zailab_zaira_forzaaa" target="_blank" class="social-card">
                                <i class="fa-brands fa-threads"></i>
                                <div class="social-info">
                                    <div>Threads</div>
                                    <div>Daily Echoes</div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <!-- Simplex Noise for procedural terrain generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/simplex-noise/2.4.0/simplex-noise.min.js"></script>

    <script>
        // --- Three.js: The Frequency Ridge ---
        // Concept: A vertical ribbon/terrain that represents a climbing path and a sound wave.
        // It's a generated mesh that undulates based on time (sound) and moves based on scroll (climb).

        const initScene = () => {
            const container = document.getElementById('canvas-container');
            const scene = new THREE.Scene();
            // Background color is handled by CSS, but fog should match
            scene.fog = new THREE.Fog(0x0f172a, 10, 50);

            const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 100);
            camera.position.set(0, 0, 20); // Default view

            const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
            container.appendChild(renderer.domElement);

            // -- Create the Ridge Mesh --
            // We'll use a PlaneGeometry but manipulate vertices to form a vertical "mountain slice"
            // Width = X (time/frequency), Height = Y (Altitude/Scroll)
            const width = 40;
            const height = 60;
            const segW = 80; // High resolution for smooth waves
            const segH = 80;
            const geometry = new THREE.PlaneGeometry(width, height, segW, segH);

            // Material: Wireframe for "Schematic/Lab" feel
            const material = new THREE.MeshBasicMaterial({
                color: 0x64748b, // Slate 500
                wireframe: true,
                transparent: true,
                opacity: 0.15,
                side: THREE.DoubleSide
            });

            const ridge = new THREE.Mesh(geometry, material);
            scene.add(ridge);

            // Secondary Mesh: Points for "Data" feel
            const pointMaterial = new THREE.PointsMaterial({
                color: 0xf97316, // Orange Accent
                size: 0.08,
                transparent: true,
                opacity: 0.4
            });
            const ridgePoints = new THREE.Points(geometry, pointMaterial);
            scene.add(ridgePoints);

            // Simplex Noise instance
            const simplex = new SimplexNoise();

            // Store original positions
            const posAttribute = geometry.attributes.position;
            const originalPos = [];
            for (let i = 0; i < posAttribute.count; i++) {
                originalPos.push({
                    x: posAttribute.getX(i),
                    y: posAttribute.getY(i),
                    z: posAttribute.getZ(i)
                });
            }

            // Animation Loop
            let time = 0;
            let scrollY = 0;
            let targetScrollY = 0;

            // Scroll Listener
            window.addEventListener('scroll', () => {
                targetScrollY = window.scrollY;
                // Update UI Depth
                document.getElementById('scroll-val').innerText = `DEPTH: ${Math.floor(targetScrollY * 0.5)}m`;
            });

            const animate = () => {
                requestAnimationFrame(animate);
                time += 0.008;

                // Smooth scroll interpolation
                scrollY += (targetScrollY - scrollY) * 0.05;
                const normalizedScroll = scrollY * 0.01; // Scale down for 3D units

                // Update Vertices
                const count = posAttribute.count;

                // Optimized vertex loop:
                // Pre-calculate common factors to avoid redundant math inside the loop
                const timeFactor = time;
                const scrollFactor = normalizedScroll;

                for (let i = 0; i < count; i++) {
                    const orig = originalPos[i];

                    // Create a "Wave" effect that travels up (simulating climbing/moving forward)
                    // Noise depends on X (horizontal spread) and Y (vertical position + time/scroll)

                    // 1. Base Terrain (Static-ish Mountain) - Large features
                    const noise1 = simplex.noise2D(orig.x * 0.1, (orig.y + scrollFactor) * 0.1) * 2;

                    // 2. Frequency Ripple (Dynamic Sound) - More intense in center, fading to edges
                    // Use simple distance math instead of Math.abs for speed if possible, but abs is fast enough
                    const distFromCenter = 1 - Math.min(Math.abs(orig.x) / 15, 1);

                    // 3D noise for "Sound" ripple
                    const freq = simplex.noise3D(orig.x * 0.5, orig.y * 0.5, timeFactor) * distFromCenter * 2;

                    // Combine Z offset
                    const z = noise1 + freq;

                    // Direct buffer write
                    // (posAttribute.array is Float32Array, can write directly if we had the index,
                    // but using setZ helper is cleaner for readability unless perf is critical)
                    posAttribute.setZ(i, z);
                }
                posAttribute.needsUpdate = true;
                geometry.computeVertexNormals();

                // Rotate based on scroll slightly to give depth
                ridge.rotation.x = 0.2 + (scrollY * 0.0002);
                ridgePoints.rotation.x = ridge.rotation.x;

                renderer.render(scene, camera);
            };

            animate();

            // Handle Resize
            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            });
        };

        // --- GSAP UI Animations ---
        document.addEventListener('DOMContentLoaded', () => {
            // Loader
            setTimeout(() => {
                const loader = document.getElementById('loader');
                loader.style.opacity = '0';
                setTimeout(() => {
                    loader.style.display = 'none';
                    initAnim();
                }, 800);
            }, 1500); // Artificial load time for "Initializing" feel

            // Defer heavy Three.js init slightly to prioritize DOM paint if needed,
            // but here we want it ready.
            initScene();

            function initAnim() {
                gsap.registerPlugin(ScrollTrigger);

                // Hero Entrance
                const tl = gsap.timeline();
                tl.to('.hero-label', { opacity: 1, x: 0, duration: 0.8, ease: 'power2.out' })
                  .to('.hero-title', { opacity: 1, x: 0, duration: 1, ease: 'power2.out' }, '-=0.6')
                  .to('.hero-desc', { opacity: 1, x: 0, duration: 1, ease: 'power2.out' }, '-=0.8')
                  .to('.avatar-float', { opacity: 1, y: 0, duration: 1.2, ease: 'power3.out' }, '-=0.8');

                // Panel Reveals
                gsap.utils.toArray('.scroll-reveal').forEach(elem => {
                    gsap.fromTo(elem,
                        { opacity: 0, y: 50 },
                        {
                            opacity: 1, y: 0,
                            duration: 1,
                            ease: 'power3.out',
                            scrollTrigger: {
                                trigger: elem,
                                start: 'top 85%',
                                toggleActions: 'play none none reverse'
                            }
                        }
                    );
                });
            }
        });

    </script>
</body>
</html>