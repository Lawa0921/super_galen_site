---
/**
 * å¤šèªè¨€é¦–é 
 * å‹•æ…‹è·¯ç”±ï¼š/zh-TW/, /zh-CN/, /en/, /ja/, /ko/
 */
import BaseLayout from '@components/layout/BaseLayout.astro';
import LanguageSwitcher from '@components/i18n/LanguageSwitcher.astro';
import { languages, type Language, useTranslations } from '@i18n/index';

// æ”¯æ´çš„èªè¨€åˆ—è¡¨
const supportedLangs = Object.keys(languages) as Language[];

export function getStaticPaths() {
  return supportedLangs.map((lang) => ({
    params: { lang },
  }));
}

const { lang } = Astro.params as { lang: Language };

// ä½¿ç”¨ç¿»è­¯ç³»çµ±
const { t, all: trans } = useTranslations(lang);

// é é¢æ¨™é¡Œ
const pageTitle = trans.site?.title || "SuperGalen's Dungeon";
const pageDescription = trans.site?.description || '';

// é·ç§»æç¤ºè¨Šæ¯
const migrationMessages: Record<Language, string> = {
  'zh-TW': 'ğŸš§ ç¶²ç«™æ­£åœ¨å¾ Jekyll é·ç§»åˆ° Astroï¼Œæ•¬è«‹æœŸå¾…ï¼',
  'zh-CN': 'ğŸš§ ç½‘ç«™æ­£åœ¨ä» Jekyll è¿ç§»åˆ° Astroï¼Œæ•¬è¯·æœŸå¾…ï¼',
  'en': 'ğŸš§ Site is migrating from Jekyll to Astro. Stay tuned!',
  'ja': 'ğŸš§ ã‚µã‚¤ãƒˆã¯ Jekyll ã‹ã‚‰ Astro ã«ç§»è¡Œä¸­ã§ã™ã€‚ãŠæ¥½ã—ã¿ã«ï¼',
  'ko': 'ğŸš§ ì‚¬ì´íŠ¸ê°€ Jekyllì—ì„œ Astroë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ ì¤‘ì…ë‹ˆë‹¤. ê¸°ëŒ€í•´ ì£¼ì„¸ìš”!',
};
---

<BaseLayout title={pageTitle} description={pageDescription} lang={lang}>
  <header class="site-header">
    <div class="header-content">
      <h1 class="site-title">{pageTitle}</h1>
      <LanguageSwitcher currentLang={lang} currentPath={Astro.url.pathname} />
    </div>
  </header>

  <main class="game-container">
    <div class="migration-notice">
      <div class="notice-icon">ğŸ°</div>
      <h2>{t('common.loading') || 'Loading...'}</h2>
      <p class="notice-text">{migrationMessages[lang]}</p>

      <div class="feature-preview">
        <h3>Phase 2: i18n ç³»çµ±å·²é‡æ§‹</h3>
        <ul>
          <li>âœ… YAML ç¿»è­¯æª”æ¡ˆè½‰æ›ç‚º TypeScript</li>
          <li>âœ… é¡å‹å®‰å…¨çš„ç¿»è­¯å­˜å–</li>
          <li>âœ… èªè¨€åˆ‡æ›çµ„ä»¶</li>
          <li>âœ… URL è·¯ç”±å¤šèªè¨€æ”¯æ´</li>
        </ul>
      </div>

      <div class="translation-demo">
        <h3>ç¿»è­¯ç¯„ä¾‹ï¼š</h3>
        <dl>
          <dt>common.confirm:</dt>
          <dd>{t('common.confirm')}</dd>

          <dt>common.cancel:</dt>
          <dd>{t('common.cancel')}</dd>

          <dt>achievements.title:</dt>
          <dd>{t('achievements.title')}</dd>

          <dt>inventory.title:</dt>
          <dd>{t('inventory.title')}</dd>
        </dl>
      </div>
    </div>
  </main>
</BaseLayout>

<style>
  .site-header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    padding: 1rem 2rem;
    background: rgba(10, 14, 39, 0.95);
    border-bottom: 1px solid #ffd700;
    z-index: 100;
  }

  .header-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    max-width: 1200px;
    margin: 0 auto;
  }

  .site-title {
    font-size: 1.5rem;
    color: #ffd700;
    margin: 0;
  }

  .game-container {
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 6rem 2rem 2rem;
    background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 100%);
    color: #ffd700;
  }

  .migration-notice {
    text-align: center;
    padding: 2rem;
    border: 2px solid #ffd700;
    border-radius: 8px;
    background: rgba(0, 0, 0, 0.5);
    max-width: 700px;
  }

  .notice-icon {
    font-size: 4rem;
    margin-bottom: 1rem;
  }

  h2 {
    margin-bottom: 1rem;
    font-size: 1.8rem;
  }

  .notice-text {
    margin-bottom: 2rem;
    color: #e0e0e0;
    font-size: 1.1rem;
  }

  .feature-preview,
  .translation-demo {
    text-align: left;
    margin-top: 2rem;
    padding: 1rem;
    background: rgba(255, 215, 0, 0.05);
    border-radius: 4px;
  }

  .feature-preview h3,
  .translation-demo h3 {
    font-size: 1rem;
    margin-bottom: 0.5rem;
    color: #ffd700;
  }

  .feature-preview ul {
    margin: 0;
    padding-left: 1.5rem;
    color: #a0ffa0;
  }

  .feature-preview li {
    margin: 0.25rem 0;
  }

  .translation-demo dl {
    display: grid;
    grid-template-columns: auto 1fr;
    gap: 0.5rem 1rem;
    margin: 0;
  }

  .translation-demo dt {
    color: #888;
    font-family: monospace;
  }

  .translation-demo dd {
    color: #e0e0e0;
    margin: 0;
  }
</style>
